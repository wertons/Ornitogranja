webpackJsonp([14],{79:function(e,t,i){var n,o;n=[i(29),i(80)],o=function(e,t){var i=e.extend({defaults:{contributionType:void 0,maxPhotoSize:5242880,regexList:[/.*(youtu.be)\/(.*)/,/.*(youtube).com\/watch\?v=([^&]*).*/,/.*(vimeo).com\/(.*)/]},_continueSubmit:function(e,t){var i=this,n="create";return e.error?void i.trigger("uploadingError",e.error):(i.trigger("clearUploadingMsg"),t.remoteVideoId=$.trim(e.video_id),t.videoType=$.trim(e.video_type),e.backup_url&&(t.backupUrl=$.trim(e.backup_url)),i.syncNoReload?void i._doSyncNoReload(n,t,null):(n+=t.contentType,this.sync(n,this,{data:t,sync:!0})))},_doSync:function(e,t,i){var n=this;return n.sync(e+n.defaults.contentType,n,{data:t,files:i,sync:!0})},_doSyncNoReload:function(e,t,i,n,o){var a,l=this,s=o.toLowerCase();return $.publish("sync-no-reload-start"),a=l.sync(t+o,l,{data:i,dataType:"text",files:n,sync:!1}),a.done(function(e){e=JSON.parse(e),l._formatDescription(e),(e.uploadedPhoto||e.imageUrl||e.remoteMediaUrl)&&l.trigger("clearUploadingMsg"),$.publish(s+"-saved-success-"+t,e)}).fail(function(e){$.publish(s+"-save-error-"+t,i),$.error("Error creating new"+s+"in community base model","common/models/community.base.js")}).always(function(){$.publish("sync-no-reload-complete"),$.publish("sync-no-reload-complete-"+t)}),a},flag:function(e){return this.sync("flag",this,{data:e})},followUpRelation:function(e){return this.sync("followUpRelation",this,{data:e})},_formatDescription:function(e){e&&e.description&&(e.descriptionFormatted=e.description.replace(/\r?\n/g,"<br />"))},gearheadConnect:function(e){return this.sync("gearheadConnect",this,{data:e})},gearheadSwitch:function(e){return this.sync("gearheadSwitch",this,{data:e})},initialize:function(){},isNew:function(){return null==this.get("contentId")},save:function(e,i){var n=this,o=$.extend({files:i},e),a=n.get("contentType"),l=o.remoteVideoUrl||i&&i.filter(".js-video-upload").val(),s="update",r=!0,c=n._validate(o);if(!_(c).isEmpty())return n.trigger("validateError",c),null;if(!n.isNew()){var d="update"+a;return n.sync(d,n,{data:e,files:i,sync:!0})}if(s="create",l){if(n.validateVideo(o)||(r=!1,c.video=$.t("video.video.err")),!r)return n.trigger("validateError",c),null;o.contentType=a,has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id&&t.postAction(n.defaults.fbGraphAction,"product",BC.product.url,function(){}),n._processVideo(o)}else has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id&&t.postAction(n.defaults.fbGraphAction,"product",BC.product.url,function(){}),n._doSync(s,e,i);return!1},_processVideo:function(e,t){var i=this;if(i.trigger("uploadingVideo"),{site_id:BC.site.id,product_sku:BC.product.sku,product_brand:BC.product.brand.displayName,product_group:BC.product.group,product_title:BC.product.displayName,title:e.title,description:e.description,video_id:""},t&&(i.syncNoReload=!0),e.files&&e.files.length&&e.files.val().length)i.trigger("uploadingError");else{var n={};i.defaults.regexList.forEach(function(t){var i=t.exec(e.remoteVideoUrl);i&&3===i.length&&(n.video_type=i[1].replace(".",""),n.video_id=i[2])}),n.error=n.video_type?null:"Unsupported video",i._continueSubmit(n,e)}return!1},undelete:function(e){return this.sync("undelete",this,{data:e})},unflag:function(e){return this.sync("unflag",this,{data:e})},userFollow:function(e){return this.sync("userFollow",this,{data:e})},_validate:function(){return{}},validateDescription:function(e){return e.description&&!/^\s*$/.test(e.description)},validateExtension:function(e,t){var i=!0,n=e.split(".");if(1===n.length)i=!1;else{var o=n.pop().toLowerCase();$.inArray(o,["jpg","jpeg","png","gif","bmp"])===-1&&(i=!1)}return i},validatePhoto:function(e){return!(e.files&&e.files.length&&e.files.val().length>0&&!this.validateExtension(e.files.val())||e.remoteMediaUrl&&e.remoteMediaUrl.length>0&&!this.validateExtension(e.remoteMediaUrl))},validatePhotoSize:function(e){var t=this,i=0;return!(e.files&&e.files.length&&(i=e.files[0].size,i>t.defaults.maxPhotoSize))},validateTitle:function(e){return e.title&&!/^\s*$/.test(e.title)},validateVideo:function(e){if(e.files&&e.files.length&&e.files.val().length){if(!this._validateVideoExtension(e.files.val()))return!1}else if(!e.remoteVideoUrl||!e.remoteVideoUrl.length)return!1;return!0},_validateVideoExtension:function(e){var t=e.split(".");if(1===t.length)return!1;var i=t.pop().toLowerCase();return $.inArray(i,["avi","mpg","wmv","mov","flv","mpeg4","3gpp","3gp","mp4"])!==-1},vote:function(e){return this.sync("vote",this,{data:e})}});return i.extend=function(t,i){return t.defaults.contributionType||$.error('"defaults.contributionType" must be defined when extending BaseCommunity'),e.extend.apply(this,arguments)},i}.apply(t,n),!(void 0!==o&&(e.exports=o))},80:function(e,t,i){var n,o;window.fbAsyncInit=function(){FB.init({appId:"269236519761010",cookie:!0,xfbml:!0}),$.publish("fbAsyncInit")},n=[i(5)],o=function(){function e(){$(function(){$("body").on("click",".js-facebook-share",t)})}function t(e){FB.ui({method:"share",display:"popup",href:$('meta[property="og:url"]').attr("content")||location.href})}function i(e,t,i,n){FB.getLoginStatus(function(t){"connected"===t.status?(t.authResponse.userID,t.authResponse.accessToken,FB.api("/me/backcountry_social:"+e,"post",{product:window.location.protocol+"//"+window.location.host+i},n)):n()})}var n=function(){if(!document.getElementById("facebook-jssdk")){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.src="//connect.facebook.net/en_US/all.js",t.parentNode.insertBefore(e,t)}};return has("socialbuttonsonload")?window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent&&window.attachEvent("onload",n):n(),"complete"===document.readyState&&n(),$.subscribe("fbAsyncInit",e),{postAction:i}}.apply(t,n),!(void 0!==o&&(e.exports=o))},120:function(e,t,i){var n,o;n=[i(38)],o=function(e){var t=e.extend({SELECTOR:void 0,model:void 0,elements:void 0,ready:function(){var e=this,t=e.elements;t||(t=$(e.SELECTOR)),e.processElements(t)},processElements:function(e){var t=this;e.each(function(){var e=$(this),i=e.data();if(!t._valid(i))return!0;i=t._setUserData(i),i=t._modifyData(i);var n=t._buildModel(i);t._buildView(n,e),t.add(n)})},_valid:function(e){return!0},_setUserData:function(e){return e.user={displayName:e.userDisplay_name,url:e.userUrl,employee:e.userEmployee,representative:e.userRepresentative,alumni:e.userAlumni},delete e.userDisplay_name,e.userUrl,e.userEmployee,e.userRepresentative,e.userAlumni,e},_modifyData:function(e){return e},_buildModel:function(e){},_buildView:function(e,t){}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},122:function(e,t,i){var n,o;n=[i(20),i(55)],o=function(e){var t=e.extend({_formSubmitted:!1,events:{"click .change":"handlePhotoChangeClick","click .delete":"handlePhotoDeleteClick","click .js-edit-submit":"handleSubmitButtonClick","submit form":"handleFormSubmit"},initialize:function(){this.pdpWall32=has("communityproductwall32")&&!this.isProfilePage,this.pdpWall32&&(this.$pdpWallMasonryContainer=$(".js-pdp-wall-items-wrap")),this.$("form").errorHandler({classForContainers:"alert-inline error",classForSummary:"alert-list",classForSummaryEntry:"alert-block error",container:"faux-label",location:"none",showErrorSummary:!0})},_inputElements:{},_bindEvents:function(){var t=this;t.model.bind("validateError",function(e){t._validateError(e)}),t.model.bind("uploadingPhoto",function(){t._handleUploadingMedia("photo")}),t.model.bind("clearUploadingMsg",function(){t._handleUploadMediaComplete()}),t._super(e,"_bindEvents")},handleFormSubmit:function(){return!1},handleSubmitButtonClick:function(){this._formSubmitted||(this._formSubmitted=!0,this.$("form").submit())},handlePhotoDeleteClick:function(){var e=this;e.model.set({deleteMediaFlag:!0,image_url_large:"",image_url_medium:"",image_url_small:""}),e._showEditPhotoElement();var t=$("<p></p>").addClass("alert-block success").html($.t("community.base.photo.deleted"));e.$(".add-media .faux-col").last().prepend(t),e._updatePdpWallMasonry()},handlePhotoChangeClick:function(){this._showEditPhotoElement(),this._updatePdpWallMasonry()},_handleUploadingMedia:function(e){var t=e+".uploading",i='<li><p class="js-media-loading-msg media-loading-msg">'+$.t(t)+"</p></li>";this.$el.find(".button-row.submit-upc").append(i),this.$uploadMediaMsg=this.$el.find(".js-media-loading-msg"),this.$uploadMediaMsg.ajaxloader({inject:"insertBefore",position:"static",size:"small",style:"dark"}).ajaxloader("show"),this.$uploadMediaMsg.prev(".ui-ajaxloader").addClass("media-upload-ajaxloader")},_handleUploadMediaComplete:function(){this.$uploadMediaMsg.data("bc-ajaxloader")&&this.$uploadMediaMsg.ajaxloader("destroy"),this.$el.find(".js-media-loading-msg").remove()},_pdpMasonryLoaded:function(){return this.$pdpWallMasonryContainer.hasClass("masonry")},_showEditPhotoElement:function(){var e=this.$(".add-media .faux-col");e.first().addClass("hidden"),e.last().removeClass("hidden")},_updatePdpWallMasonry:function(){this.pdpWall32&&this._pdpMasonryLoaded()&&this.$pdpWallMasonryContainer.masonry("reload")},_validateError:function(e){var t=this;t._formSubmitted=!1;var i=[];$.each(e,function(e,n){i.push({error:n,input:t._inputElements[e]})}),this.$("form").errorHandler("showErrors",JSON.stringify({errors:i}))}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},123:function(e,t,i){var n,o;n=[i(20),i(88),i(261),i(228),i(265),i(139),i(237),i(333),i(334),i(335),i(230)],o=function(e,t,i,n,o,a,l,s,r,c){var d=e.extend({_CONTRIBUTION_TYPE:void 0,_TEMPLATE_MESSAGE_NAME:"message",_TEMPLATE_MESSAGE:"#template-message",_TEMPLATE_CONTENT_FLAG_NAME:"content-flag",_TEMPLATE_CONTENT_FLAG:"#template-content-flag",_CHILD_COLLECTION:void 0,_MAX_UNAUTHORIZED_FLAGS:2,_editView:void 0,className:void 0,childClassName:void 0,events:{"click .upc-tools .edit a":"editClick","click .upc-tools .delete a":"destroyClick","click .upc-tools .flag a":"flagClick","click .upc-tools .unflag a":"unflagClick","click .flagged h3 a":"showFlagClick","click .flag-upc .submit-upc-reply":"saveFlagClick","click .button-row .js-cancel":"closeDialog","click .js-alert-block-undo":"undeleteClick","click .upc-mbl-tools .edit a":"editClick","click .upc-mbl-tools .delete a":"destroyClick","click .upc-mbl-tools .flag a":"flagClick","click .upc-mbl-tools .unflag a":"unflagClick","click .js-profile-menu-icon":"userToolsClick","click .js-profile-tools-delete":"destroyClick","click .js-profile-tools-edit":"editClick","click .js-profile-tools-flag":"flagClick","click .js-profile-tools-unflag":"unflagClick","click .profile-post.flagged h3 a":"showFlagClick","click .profile-post-replies .flag-upc-btn":"saveFlagClick"},initialize:function(){var e=this;e.isProfilePage="profile"===BC.page.id,e.isApiWall=has("communityapiproductwall")&&("pdp"===BC.page.id||"bike-builder-pdp"===BC.page.id)||has("apiprofilepage")&&"profile"===BC.page.id,e.pdpWall32=has("communityproductwall32")&&!e.isProfilePage,e.API_BASE_URL="/community/",e.isApiWall&&(BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered)&&!has("readonlycommunitywall")&&e._initPersonalizedWallTools(),e._TEMPLATE_CONTENT_EDIT_NAME=e._CONTRIBUTION_TYPE+"-edit",e._initHelpfulVoteView(),e._initTemplates(),e._initBadgeTooltips(),"bcs"!==BC.site.code&&"competitivecyclist"!==BC.site.code||e._initExpertGearheadReplace(),e.$pdpWallMasonryContainer=$(".js-pdp-wall-items-wrap"),e.isProfilePage&&(e.$masonryContainer=$(".js-profile-wall-masonry-container"))},_bindEvents:function(){var e=this;e.model.bind("flagError",function(t){e._flagError(t)}),e.model.bind("unflagError",function(t){e._unflagError(t)}),e.model.bind("change:showFlagged",function(t){e.render({showFlaggedClick:!0})}),e.model.bind("change:flagged",function(t){e.render()}),e.model.bind("destroy",function(t){e._destroySuccess()}),e.model.bind("destroyError",function(t){e._destroyError()})},_initTemplates:function(){var e=this;e._initTemplate(e._TEMPLATE_MESSAGE_NAME,$(e._TEMPLATE_MESSAGE).html()),e._initTemplate(e._TEMPLATE_CONTENT_FLAG_NAME,$(e._TEMPLATE_CONTENT_FLAG).html()),e._initEditTemplate()},_initTemplate:function(e,t){BC.templates[e]||(BC.templates[e]=_.template(t))},_initBadgeTooltips:function(){this.$("#badges li img").tooltip({hover:!0})},_initEditTemplate:function(){var e=this;null!=e._TEMPLATE_CONTENT_EDIT&&e._initTemplate(e._TEMPLATE_CONTENT_EDIT_NAME,$(e._TEMPLATE_CONTENT_EDIT).html())},_initHelpfulVoteView:function(){var e=this,t=$();(0===e.$(".edit").length||e.$(".upc-replies .edit").length>0)&&(t=e.$(".vote").first()),t.length&&(e._helpfulVoteView=new i({model:e.model,el:t,isApiWall:!!e.isApiWall}))},_initEditView:function(){var e,t=this,i=t.$("section.edit"),n=t.model.clone();void 0!==t._editView&&(n.set(i.data()),e=new t._editView({el:i,model:n}),e.on("comment-in-place-edit",function(e){t.model.set("description",e.description)}),e.on("photo-in-place-edit",function(e){t.model.set("description",e.description),t.model.set("title",e.title)}),e.on("question-in-place-edit",function(e){_(e).each(function(e,i){t.model.set(i,e)})}),e.on("review-in-place-edit",function(e){_(e).each(function(e,i){"sizeFit"===i&&(i="size_fit"),t.model.set(i,e)})}))},_initExpertGearheadReplace:function(){var e,t=this,i=!!t.$el.find(".js-expert-gearhead-info").length,n=[],o=".js-gearhead-badge",a=i?[]:t.$el.find("article.upc-child "+o),l=i?[]:t.$el.find(".upc-single "+o),s=t.$el.find(".js-is-gearhead");l.length&&(e=$(l[0]),n.push({$badge:e,$container:e.parents(".js-user-card").first(),userId:""+e.parents(".upc").data("user-id")})),_(a).each(function(e){var t=$(e).parents("article.upc-child");n.push({$badge:$(e),$container:t.find(".js-user-card"),userId:""+t.data("user-id")})}),!t.isProfilePage&&n.length&&($.subscribe("expert-gearhead-data-loaded",function(e){"bcs"===BC.site.code?t._addGearheadContactInfo_bcs(s,e):t._addGearheadContactInfo_v3(n)},t),BC.expertGearheads||(BC.expertGearheads=[],$.ajax({dataType:"json",url:t.API_BASE_URL+"gearheads",cache:!0,success:function(e){BC.expertGearheads=e,$.publish("expert-gearhead-data-loaded",e)}})))},_addGearheadContactInfo_bcs:function(e,t){var i=this;e.each(function(e,n){var o=$(n),a=o.parent(),l=_.find(t,function(e){return e.userId==o.data("userId")});if(l&&(l.phone?l.phone=l.phone.replace(/\./g,"-"):l.phone=$.t("gearhead.default.contact.phone"),l.email=i._buildEmailAccordingToSite(l.email),l.firstName=l.displayName.split(" ")[0],l.product=BC.product.displayName,l.productUrl=window.location.href,o.after(r({expert:l})),a.addClass("ghx-badge"),a.parent().hasClass("upc-single"))){var s=a.parent();a.detach(),s.prepend(a)}})},_addGearheadContactInfo_v3:function(e){var t=this;_.each(e,function(e){var i,n={bcs:r,competitivecyclist:c},o={bcs:$.t("gearhead.default.contact.phone"),competitivecyclist:"1-888-276-7130"};e.$badge,i=_.filter(BC.expertGearheads,function(t){return t.userId===e.userId}),i.length&&(i=i[0],i.phone?i.phone=i.phone.replace(/\./g,"-"):i.phone=o[BC.site.code],i.email=t._buildEmailAccordingToSite(i.email),i.firstName=i.displayName.split(" ")[0],i.product=BC.product.displayName,i.productUrl=window.location.href,"competitivecyclist"===BC.site.code?e.$container.siblings().last().after(n[BC.site.code]({expert:i})):e.$container.after(n[BC.site.code]({expert:i})))})},_buildEmailAccordingToSite:function(e){var t=e.split("@");return t.length<=1||"steepandcheap"===BC.site.code?e:t[0]+"@"+BC.site.domain},_initPersonalizedWallTools:function(){var e,t,i=this,n=i.pdpWall32?"Delete":$.t("just.in.delete.facet"),o=i.pdpWall32?"Edit":$.t("label.community.wall.tweak.this"),a=(i.$el.hasClass("comment"),""+i.$el.data("user-id"));i.isProfilePage&&BC.profile.id===a?(e=i.$el.find(".js-profile-tools"),e.find(".js-profile-tools-flag").addClass("edit js-profile-tools-edit").removeClass("flag js-profile-tools-flag").find("a").text($.t("label.community.wall.tweak.this")),e.find(".js-profile-tools-edit").clone().appendTo(e).addClass("delete js-profile-tools-delete").removeClass("edit js-profile-tools-edit").find("a").text($.t("label.community.delete.this"))):BC.profile.id===a&&(e=i.$el.find(".js-upc-tool-list:first"),t=e.find(".js-vote-wrap"),t.addClass("edit").removeClass("vote").find(".js-helpful-vote-link").removeClass("helpful-vote pre_yes").text(o),e.find(".js-flag-wrap").addClass("delete").removeClass("flag").find(".js-flag-link").text(n),i.pdpWall32&&t.find(".js-num-votes").hide())},_flagError:function(e){this.$(".flag-upc .button-row .submit-upc-reply").tooltip({content:e.errorMessage})},_unflagError:function(e){this.$(".unflag").tooltip({content:e.errorMessage})},_delayRemoveSuccessMsg:function(){var e=this;e.pdpWall32?e.deleteMsgDelay=setTimeout(function(){e.$el.slideUp().promise().done(function(){e.$el.remove(),e._updatePdpWallMasonry()})},1e4):e.deleteMsgDelay=setTimeout(function(){e.$el.slideUp()},1e4)},_destroySuccess:function(e){var t=this,i=BC.templates[t._TEMPLATE_MESSAGE_NAME]({message:$.t("community.base.inactivate.success",t._CONTRIBUTION_TYPE)});t.pdpWall32?(t.$el.children().slideUp({step:function(){t._updatePdpWallMasonry()}}),t._scrollToContent(),t.$el.append(i).addClass("upc-deleted")):(t.destroyedHtml=t.$el.html(),t.$el.html("").append(i).addClass("upc-deleted")),t._delayRemoveSuccessMsg()},_destroyError:function(e){this.$(".upc-tools .delete a").tooltip({content:e.errorMessage})},_pdpMasonryLoaded:function(){return this.$pdpWallMasonryContainer.hasClass("masonry")},_scrollToContent:function(){var e={bcs:40,competitivecyclist:140,steepcheap:110};$("html, body").animate({scrollTop:this.$el.offset().top-e[BC.site.code]})},_updatePdpWallMasonry:function(){this.pdpWall32&&this._pdpMasonryLoaded()&&this.$pdpWallMasonryContainer.masonry("reload")},flagClick:function(e){var t,i=this,n=i.$(".js-flag-link").first(),o=i.$(".flag-upc").first(),a=(has("small"),i.model);return o.length>0?(i.pdpWall32&&(o.is(":visible")?(o.hide(),n.toggleClass("flag-is-open")):(o.show(),n.toggleClass("flag-is-open")),i._updatePdpWallMasonry()),!1):(t=BC.templates[i._TEMPLATE_CONTENT_FLAG_NAME]({contentId:a.get("contentId")}),i.pdpWall32?(i.$(".js-child-solicit").first().append(t),n.toggleClass("flag-is-open"),e.stopPropagation(),i._updatePdpWallMasonry()):i.$(".upc-replies").first().prepend(t),void(i.isProfilePage&&(i.$(".js-profile-menu-icon").trigger("click"),i.$masonryContainer.imagesLoaded(function(){i.$masonryContainer.masonry(),i.$masonryContainer.trigger("masonryLoaded")}))))},saveFlagClick:function(){var e=this;e.checkAuthorizedToFlag()&&e.model.flag({reason:e.$(".flag-upc .flag-reason").val()})},unflagClick:function(){var e=this;e.checkAuthorizedToFlag(!0)&&e.model.unflag()},checkAuthorizedToFlag:function(e){var t=this,i=0;return!!(BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered)||(i=parseInt($.cookie("community-unauth-flag-count"),10)||0,i<this._MAX_UNAUTHORIZED_FLAGS?(i++,$.cookie("community-unauth-flag-count",i,{expires:1,path:"/"}),!0):($("#auth").authModal("authenticate",function(){e?t.unflagClick():t.saveFlagClick()},$.t("community.base.max.unauth.flag")),!1))},showFlagClick:function(){var e=this;e.model.set({showFlagged:!0})},editClick:function(e){var t=this,i=(t._CONTRIBUTION_TYPE,t.model);e.stopPropagation();var n=BC.templates[t._TEMPLATE_CONTENT_EDIT_NAME](i.toJSON());t.pdpWall32?t.$el.prepend(n):void 0===t.$("section.edit")[0]&&t.$(".upc-replies").first().prepend(n),t.$("section."+t.className).hide(),t.$("section.edit").show(),t._initEditView(),t.pdpWall32?(t._updatePdpWallMasonry(),t._scrollToContent()):window.location.hash=t._CONTRIBUTION_TYPE+"-"+t.model.get("contentId"),t.isProfilePage&&(t.$(".js-profile-post-body").hide(),t.$(".js-profile-menu-icon").trigger("click"),t.$masonryContainer.imagesLoaded(function(){t.$masonryContainer.masonry(),t.$masonryContainer.trigger("masonryLoaded")}))},closeDialog:function(){var e=this,t="photo"===e.className?"photo-edit":e.className;e.$el.find("section.edit."+t).remove(),e.$("form.flag-upc").remove(),e.$el.children("section."+e.className).show(),e.pdpWall32&&(e._updatePdpWallMasonry(),e._scrollToContent()),e.isProfilePage&&(e.$(".js-profile-post-body").show(),e.$masonryContainer.imagesLoaded(function(){e.$masonryContainer.masonry(),e.$masonryContainer.trigger("masonryLoaded")}))},destroyClick:function(e){var t=this;t.model.destroy(),t.pdpWall32&&(t._updatePdpWallMasonry(),e.stopPropagation()),t.isProfilePage&&(t.$masonryContainer.masonry(),t.$masonryContainer.trigger("masonryLoaded"))},render:function(e){var i=this,s=i.$el,r=i.model,c="",d="";if(d=i.isProfilePage?"/community/include/profile/wallv1/wall":"",i.pdpWall32&&r.get("showFlagged")){var p="8"===BC.site.id?"1":BC.site.id;c="/community/content/",c+=r.get("contentId")+"?siteId="+p+"&hasChildren=true",$.ajax({dataType:"json",url:c}).done(function(n){var o,a;n.contents[0].isFlagged=!1,e&&e.showFlaggedClick&&(n.contents[0].unFlagBtn=!0),s.communitywall({isProfile:i._isProfilePage,lazyLoad:!1,wallData:n}),o=s.communitywall("returnHtml"),s.communitywall("destroy"),s.html($(o).children().html()),i._updatePdpWallMasonry(),i.model.collection.processElements(s),a=new t({el:s,model:i.model})})}else $.ajax({url:"/Store/community/include/productWallContent.jsp",data:{contentId:r.get("contentId"),showFlagged:r.get("showFlagged"),wallPath:d},success:function(e){var t=$(e).html();if(s.html(t),i._initHelpfulVoteView(),null!=i._CHILD_COLLECTION){var r=s.find(".js-child-solicit"),e=r.data();e&&(BC.product.url&&(e.successUrl=BC.product.url,e.errorUrl=BC.product.url),r.closest("article.upc").hasClass("question")?new o({el:r,model:new l(e)}):new n({el:r,model:new a(e)}));var c=i.$("."+i.childClassName);i._CHILD_COLLECTION=i._CHILD_COLLECTION.extend({elements:c}),new i._CHILD_COLLECTION}i.isProfilePage&&i.$masonryContainer.imagesLoaded(function(){i.$masonryContainer.masonry(),i.$masonryContainer.trigger("masonryLoaded")})},dataType:"text"})},undeleteClick:function(e){var t=this;t.pdpWall32?(t.$el.children().slideDown({step:function(){t._updatePdpWallMasonry()}}),t.$el.removeClass("upc-deleted"),t.$el.find(".alert-block.undo").remove(),e.stopPropagation()):t.$el.html(t.destroyedHtml),t.model.undelete(),t._updatePdpWallMasonry(),t.deleteMsgDelay&&clearTimeout(t.deleteMsgDelay)},userToolsClick:function(e){$(e.target).next(".js-profile-tools").toggle()}});return d}.apply(t,n),!(void 0!==o&&(e.exports=o))},139:function(e,t,i){var n,o;n=[i(79)],o=function(e){var t=e.extend({defaults:{contributionType:"comment"},_doSyncNoReload:function(t,i,n){this._super(e,"_doSyncNoReload",t,i,n,"Comment")},save:function(e,t){var i,n=this,o=$.extend({files:t},e),a={},l=!0;return n.validateDescription(o)||(l=!1,a.description=$.t("comment.description.err")),l?(i=n.isNew()?"create":"update",n._doSyncNoReload(i,e,t),!1):(n.trigger("validateError",a),null)}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},220:function(e,t,i){var n,o;n=[i(120),i(139),i(313),i(314)],o=function(e,t,i,n){var o=e.extend({SELECTOR:".upc-child.comment",model:t,initialize:function(e,t){this.isExploreBlog=!!t&&t.isExploreBlog},_valid:function(e){return null!=e.comment_id},_modifyData:function(e){return e.contentId=e.comment_id,delete e.comment_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var o;return o=this.isExploreBlog?new i({model:e,el:t}):new n({model:e,el:t})}});return o}.apply(t,n),!(void 0!==o&&(e.exports=o))},221:function(e,t,i){var n,o;n=[],o=function(){return{expand:function(e,t){if(e&&t)return e.replace(/{(\w+)}/g,function(e,i){return t[i]||i})}}}.apply(t,n),!(void 0!==o&&(e.exports=o))},228:function(e,t,i){var n,o;n=[i(88),i(240)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",pageId:"pageId"},_bindCommentSaveEvents:function(){var t=this;$.subscribe("comment-saved-success-create",function(i){t._buildSingleComment(i),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn"),$.unsubscribe("comment-saved-success-create")}),$.subscribe("comment-save-error-create",function(i){var n='<p class="alert-block error js-comment-error-msg hidden">'+$.t("label.comment.save.error")+"</p>";t.$el.find(".js-comment-error-msg").remove(),$(n).prependTo(t.$el).slideDown(),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn"),$.unsubscribe("comment-save-error-create")})},_buildSingleComment:function(t){var i,n,o,a,l=this,s=t.descriptionFormatted||t.description,r="community-explore-post"===BC.page.id,c=r?"new-comment-added":"new-dynamically-added-content",d={contents:{children:[]}};d.contents.children.push({contentId:t.id,contentType:"comment",created:$.formatDateTime("MM dd, yy",new Date),description:t.description,descriptionFormatted:s,isFlagged:!1,totalChildren:0,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},votes:0}),l.$el.communitywall({isExploreComment:r,isNewContent:!0,isSingleChildContent:!0,lazyLoad:!1,wallData:d}),n=$(l.$el.communitywall("returnHtml")).hide(),l.$el.find("#upc-content").val(""),r?(n.insertAfter(l.$el).slideDown(),i=$(".js-comments-heading-bubble"),o=parseInt(i.text(),10)+1,i.text(o)):has("communityproductwall32")?(n.appendTo(l.$el.parents(".js-pdp-wall-masonry-item").find(".upc-replies")).fadeIn(),l._super(e,"_updatePdpWallMasonry")):n.insertBefore(l.$el).slideDown(),a={contentClass:"article.upc-child",contentId:t.id,contentIdSelector:"#comment-"+t.id,contentType:"comment"},$.publish(c,a),l.$el.communitywall("destroy")},expandView:function(){this.$("form").removeClass("collapsed")},handleFormSubmit:function(){var e,t=this;return t._bindCommentSaveEvents(),t.model.save({description:t.$("#"+t._inputElements.description).val(),pageId:t.$("#"+t._inputElements.pageId).val(),userId:BC.profile.id},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},231:function(e,t,i){var n,o;n=[i(5)],o=function(){$.widget("bc.videoLazyloader",{options:{auto:!1,debug:!1,enqueue:!0,proximity:!1,videoSelector:""},_create:function(){var e=this,t=e.options,i=e.element;e._$queue=$(),t.enqueue&&e.enqueue(i),t.auto&&(e._on(window,{scroll:"_scroll"}),e.load())},enqueue:function(e){var t=this,i=t.options,n=$(e),o=$();return n.data("src")&&(o=o.add(n)),o=o.add(n.find(i.videoSelector+"[data-src]")),i.debug&&console.log("bc.videoLazyloader: adding %o elements to the queue",o.clone().get()),t._$queue=t._$queue.add(o),t._recalc(),t._sort(),t.element},load:function(){var e=this,t=e.options;return $(e._$queue.get()).each(function(i,n){var o=$(n),a=o.data("distanceFromWindowCenter")-o.height()/2;if(!(t.proximity===!1||a<$(window).height()+t.proximity))return!1;var l=o.data("src");t.debug&&console.log("bc.videoLazyloader: loading %o element",o.clone().get(0)),e._$queue=e._$queue.not(n);var s=$("<iframe/>");$(o[0].attributes).each(function(){s.attr(this.name,this.value)}),s.attr("src",l).removeAttr("data-src").removeData("src"),o.replaceWith(s),e._trigger("complete",null,s),e._recalc()}),e._trigger("finish"),$.publish("videoLazyLoaderComplete"),e.element},queue:function(){var e=this;return e._$queue.get()},_destroy:function(){var e=this;clearTimeout(e._timeout)},_recalc:function(){var e=this;e._$queue.each(function(){var e=$(this),t=e.offset().top,i=e.height()/2,n=t+i;e.data("centerPoint",n)})},_scroll:function(e){var t=this;clearTimeout(t._timeout),t._timeout=setTimeout(function(){t._sort(),t.load()},20)},_sort:function(){var e=this,t=$(window),i=t.scrollTop(),n=t.height()/2;e._$queue.each(function(){var e=$(this),t=Math.abs(e.data("centerPoint")-i-n);e.data("distanceFromWindowCenter",t)}),e._$queue=$(e._$queue.get().sort(function(e,t){return $(e).data("distanceFromWindowCenter")-$(t).data("distanceFromWindowCenter")}))}})}.apply(t,n),!(void 0!==o&&(e.exports=o))},237:function(e,t,i){var n,o;n=[i(79),i(80)],o=function(e,t){var i=e.extend({defaults:{contributionType:"answer",fbGraphAction:"answer_a_question_of",contentType:"Answer"},_validate:function(e){var t=this,i={};return t.validateDescription(e)||(i.description=$.t("answer.description.err")),t.validatePhoto(e)||(i.photo=$.t("answer.photo.err")),i}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},239:function(e,t,i){var n;n=function(){$.widget("bc.tabnavigate",{options:{defaultTab:"",buttonMap:{},tabSel:".js-tabnavigate-tab",viewSel:".js-tabnavigate-view"},_create:function(){var e=this,t=e.options;if(_.isEmpty(t.buttonMap))for(var i=0;i<$(t.tabSel).length;i++)t.buttonMap[t.tabSel+'[data-tab="'+i+'"]']=t.viewSel+'[data-tab="'+i+'"]';$.each(e.options.buttonMap,function(t,i){var n=e.element.find(t);e._on(n,{click:function(n){n.preventDefault(),e._showTab(t,i)}})}),e.options.defaultTab&&e.element.find(e.options.defaultTab).click()},_showTab:function(e,t){var i=this;$.each(i.options.buttonMap,function(e,t){$(t,i.element).addClass("hidden"),$(e,i.element).removeClass("selected")}),$(e,i.element).addClass("selected"),$(t,i.element).removeClass("hidden").removeClass("collapsed"),i._trigger("onShowTab")}})}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},240:function(e,t,i){var n,o;n=[i(323),i(324),i(325),i(326),i(327),i(328),i(339),i(340),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(5)],o=function(e,t,i,n,o,a,l,s,r,c,d,p,u,m,h){$.widget("bc.communitywall",{options:{lazyLoad:!0,isExploreComment:!1,isNewContent:!1,isProfile:!1,isSingleChildContent:!1,wallData:{}},_create:function(){var e=this;e.wallHtmlString="",e.wallData=e.options.wallData.contents||[],e.showCommunityTools=!has("readonlycommunitywall"),e.options.isExploreComment?(e._buildExploreComment(e.wallData),e.wallHtmlString+=e.wallData.exploreHtml):e.options.isSingleChildContent?(e._buildChildElements(e.wallData,has("mobile")),e.wallHtmlString+=e.wallData.childrenHtml):e._buildContentHtml()},_buildChildElements:function(t,i){var n=this;_(t.children).each(function(e){n._buildContentElements(e,i)}),"bcs"===BC.site.code?t.childrenHtml=e({children:t.children,isMobile:i,showCommunityTools:n.showCommunityTools,siteCode:BC.site.code,lazyLoad:n.options.lazyLoad}):t.childrenHtml=p({children:t.children,isMobile:i,showCommunityTools:n.showCommunityTools,siteCode:BC.site.code,lazyLoad:n.options.lazyLoad})},_buildContentHtml:function(){var e,o=this,a=has("mobile");_(o.wallData).each(function(e){var t;e.printContentType="productImage"===e.contentType?"photo":e.contentType,e.referenceUrlAtg=e.referenceUrl+"#"+e.printContentType+"-"+e.contentId,o._buildContentElements(e,a),e.description&&!e.descriptionFormatted&&(e.descriptionFormatted=e.description.replace(/\r?\n/g,"<br>")),e.children&&!o.options.isProfile&&o._buildChildElements(e,a),o.showCommunityTools&&!o.options.isProfile&&(t={contentId:e.contentId,contentType:e.printContentType,contentUrl:window.location.pathname,formClass:e.children?"second-level":"",isMobile:a,productId:e.referenceId,redirectUrl:window.location.pathname+window.location.search,userDisplayName:e.user.displayName},"competitivecyclist"!==BC.site.code?e.solicitForm="question"===e.contentType?i(t):n(t):e.solicitForm="question"===e.contentType?c(t):d(t))}),e={isMobile:a,isNewContent:o.options.isNewContent,lazyLoad:this.options.lazyLoad,wallData:o.wallData},o.options.isProfile?o.wallHtmlString+=s(e):"bcs"===BC.site.code?(e.siteCode=BC.site.code,o.wallHtmlString+=t(e)):(e.siteCode=BC.site.code,o.wallHtmlString+=u(e))},_buildContentElements:function(e,t){var i={content:e,isMobile:t,lazyLoad:this.options.lazyLoad,showUserDetails:"steepcheap"!==BC.site.code,siteId:BC.site.id},n={content:e,interactionType:"question"===e.contentType?"answer":"comment",isMobile:t,isNewContent:this.options.isNewContent,showCommunityTools:this.showCommunityTools,siteId:BC.site.id};this.options.isProfile?(e.user||(e.user={displayName:BC.profilePageInfo?BC.profilePageInfo.displayName:"",imageUrl:BC.profilePageInfo?BC.profilePageInfo.imageUrl:"",userId:BC.profilePageInfo?BC.profilePageInfo.userId:""}),e.userVCard=r(i)):"bcs"===BC.site.code?e.userVCard=a(i):e.userVCard=h(i),"bcs"===BC.site.code?e.upcTools=o(n):e.upcTools=m(n);
},_buildExploreComment:function(e,t){e.exploreHtml=l({comment:e.children[0]})},returnHtml:function(){return this.wallHtmlString}})}.apply(t,n),!(void 0!==o&&(e.exports=o))},259:function(e,t,i){var n,o;n=[i(122)],o=function(e){var t=e.extend({_inputElements:{description:"comment-edit-textarea"},_bindEvents:function(){var t=this;$.subscribe("comment-saved-success-update",function(e){t._handleEdit(e)}),t._super(e,"_bindEvents")},_handleEdit:function(t){var i=this,n="community-explore-post"===BC.page.id,o=n?i.$el:i.$el.closest(".upc-replies"),a=i.$el.siblings(".user-content-child.comment"),l=n?".js-existing-comment-description":".description",s=t.descriptionFormatted||t.description,r=n?".existing-comment":".upc-child.comment";has("communityproductwall32")?(i.$el.remove(),a.find(l).html(s).end().show(),i._super(e,"_updatePdpWallMasonry")):o.empty().prev(r).find(l).html(s).end().show(),i.trigger("comment-in-place-edit",t)},handleFormSubmit:function(){var e=this;return e.model.save({description:e.$("#comment-edit-textarea").val()}),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},261:function(e,t,i){var n,o;n=[i(20),i(80)],o=function(e,t){var i=e.extend({options:{serviceUrl:""},events:{"click a.pre_yes":"helpfulVoteClick","click .js-helpful-vote-link-mbl":"helpfulVoteClick"},_bindEvents:function(){var e=this;this.model.bind("change:is_helpful_vote_count",function(t){e._helpfulVoteSuccess()}),this.model.bind("voteError",function(t){e._helpfulVoteError(t)})},_checkIfUserCanVote:function(e){var t=!1,i="json",n=this,o=""+BC.profile.id;n.options.ghRecommend?(t="undefined"==typeof _.find(n.options.voteList,function(e){return e.userId===o}),t?e():(n._helpfulVoteError({errorMessage:$.t("label.community.wall.multiple.vote")}),n.$clickTarget.removeClass("pre_yes").addClass("post_yes"))):$.ajax({dataType:i,timeout:5e3,url:n.options.serviceUrl}).done(function(i){t=!_(i).contains(o),t?e():(n._helpfulVoteError({errorMessage:$.t("label.community.wall.multiple.vote")}),n.$clickTarget.removeClass("pre_yes").addClass("post_yes"))}).fail(function(e,t,i){n._helpfulVoteError(),$.error("Error calling Community API - Helpful Vote Service: "+i,"/common/views/helpful_vote.js")})},_helpfulVoteError:function(e){var t=this,i=e||{errorMessage:$.t("helpful.vote.err.unknown")};t.$el.find("a.pre_yes").tooltip({content:i.errorMessage||$.t("helpful.vote.err.unknown")})},_helpfulVoteSuccess:function(){var e=this,i=has("mobile"),n=$(".blog-comments").length,o="profile"===BC.page.id,a=has("communityproductwall32"),l=e.model.get("is_helpful_vote_count"),s=e.$("a.pre_yes");if(s.removeClass("pre_yes").addClass("post_yes"),i||!n&&!o?i?a?e.$el.find(".js-mbl-capsule").html(l):s.find(".js-mbl-capsule").html(l):a?s.siblings(".js-num-votes").html(l):s.find("span").html("("+l+")"):s.next(".js-helpful-vote-count").html("("+l+")"),!e.options.ghRecommend&&!a){var r,c,d,p=$("<b/>").addClass("upc-succesful-vote").appendTo("body"),u=p.css("color"),_=p.css("backgroundColor");p.remove(),r=e.$el.css("background-color"),e.$el.closest("article").animate({backgroundColor:_},750).delay(1e3).animate({backgroundColor:u},750),n&&(d=e.$el.closest(".comment-text-wrapper"),c=d.css("background-color"),d.animate({backgroundColor:_},750).delay(1e3).animate({backgroundColor:c},750))}if(has("fbopengraph")&&"1"===BC.site.id){var m;m="pdp"===BC.page.id?BC.product.url:e.$el.parent().siblings(".product-information").find("a.summary").attr("href"),t.postAction("vote_a_content_about","product",m,function(){})}o&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","Profile Page","Helpful Vote"])},helpfulVoteClick:function(e){var t,i,n=this,o=n.options;if(n.$auth=$("#auth"),n.$clickTarget=$(e.currentTarget),BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered)if(i={userId:BC.profile.id},o.isApiWall)if(o.ghRecommend)$.extend(i,{pdpExpertise:o.productId}),n._checkIfUserCanVote(function(){n.model.vote(i),$.publish("gh.recommend.plus.one.vote")});else{if(t=n.model.get("contentId"),"bcs"===BC.site.code){var a=n.model.get("contentType");$.publish("ScWallInteractions.sitecatalystutil",{events:"event370",evarValue:a+"-"+t,action:"helpful vote",prodId:BC.product.id})}o.serviceUrl||(o.serviceUrl="/community/content/"+t+"/votes"),n._checkIfUserCanVote(function(){n.model.vote(i)})}else n.model.vote(i);else n.$auth.authModal("authenticate",function(){n.helpfulVoteClick()},$.t("helpful.vote.auth.reason"))}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},265:function(e,t,i){var n,o;n=[i(88)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},initialize:function(){var t=this;this._super(e,"initialize"),t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))})},expandView:function(){this.$("form").removeClass("collapsed")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),userId:BC.profile.id},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},285:function(e,t,i){var n,o;n=[i(120),i(237),i(380)],o=function(e,t,i){var n=e.extend({SELECTOR:".upc-child.answer, .upc.answer",model:t,_valid:function(e){return null!=e.answer_id},_modifyData:function(e){return e.contentId=e.answer_id,delete e.answer_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var n=new i({model:e,el:t});return n}});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},287:function(e,t,i){var n,o;n=[i(79),i(80)],o=function(e,t){var i=e.extend({defaults:{contributionType:"productImage",contentType:"Photo"},_doSyncNoReload:function(t,i,n){this._super(e,"_doSyncNoReload",t,i,n,"Photo")},save:function(e,i){var n=this,o=$.extend({files:i},e),a=n.isNew()?"create":"update",l=n._validateInputs(o,a);return _(l).isEmpty()?(n._showUploadedFile(i),n._doSyncNoReload(a,e,i),$.publish("ScSubmitImage.sitecatalystutil"),"create"===a&&has("fbopengraph")&&"bcs"===BC.site.code&&t.postAction("share_a_photo_about","product",BC.product.url,$.noop),!1):(n.trigger("validateError",l),null)},_showUploadedFile:function(e){var t=this;if(e&&e.length)if(photoUpload=e.get(0),photoUpload.files&&photoUpload.files[0]){var i=photoUpload.files[0],n=new FileReader;t.trigger("uploadingPhoto"),n.onload=function(e){newImageUpload=e.target.result,$.publish("photo-image-uploaded",{newImageUpload:newImageUpload})},n.readAsDataURL(i)}else photoUpload&&(t.trigger("uploadingPhoto"),newImageUpload="//content.backcountry.com/promo_upload/bcs/2015/currently-uploading-image-default.jpeg",$.publish("photo-image-uploaded",{newImageUpload:newImageUpload}))},_validateInputs:function(e,t){var i={};return this.validateTitle(e)||(i.title=$.t("photo.title.err")),"create"!==t||e.remoteMediaUrl||e.files||(i.photo=$.t("photo.photo.err")),i}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},288:function(e,t,i){var n,o;n=[i(79)],o=function(e){var t=e.extend({defaults:{contributionType:"question",fbGraphAction:"ask_a_question_about",contentType:"Question"},_doSyncNoReload:function(t,i,n){this._super(e,"_doSyncNoReload",t,i,n,"Question")},save:function(e,t){var i=this,n=$.extend({files:t},e),o=i.get("contentType"),a=n.remoteVideoUrl||t&&t.filter(".js-video-upload").val(),l=i.isNew()?"create":"update",s=!0,r=i._validateInputs(n);if(!_(r).isEmpty())return i.trigger("validateError",r),null;if(t&&t.length&&!a&&i._showUploadedFile(t),e.remoteMediaUrl&&i.trigger("uploadingPhoto"),"create"===l)if(a){if(i.validateVideo(n)||(s=!1,r.video=$.t("video.video.err")),!s)return i.trigger("validateError",r),null;n.contentType=o,i._processVideo(n,"noReload")}else i._doSyncNoReload(l,e,t);else i._doSyncNoReload(l,e,t);return $.publish("ScSubmitImage.sitecatalystutil"),!1},_showUploadedFile:function(e){var t=this;if(e&&e.length)if(photoUpload=e.get(0),photoUpload.files&&photoUpload.files[0]){var i=photoUpload.files[0],n=new FileReader;t.trigger("uploadingPhoto"),n.onload=function(e){newImageUpload=e.target.result,$.publish("question-image-uploaded",{newImageUpload:newImageUpload})},n.readAsDataURL(i)}else photoUpload&&(t.trigger("uploadingPhoto"),newImageUpload="//content.backcountry.com/promo_upload/bcs/2015/currently-uploading-image-default.jpeg",$.publish("question-image-uploaded",{newImageUpload:newImageUpload}))},_validateInputs:function(e){var t=this,i={};return t.validateDescription(e)||(i.description=$.t("question.description.err")),t.validatePhoto(e)||e.files&&e.files.filter(".js-photo-upload").val()&&(i.photo=$.t("review.photo.err")),i}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},289:function(e,t,i){var n,o;n=[i(80),i(79),i(295)],o=function(e,t){var i=t.extend({defaults:{contributionType:"review",gender:"",familiarity:0,size_fit:0,fbGraphAction:"write_a_review_about",contentType:"Review"},photoExtensionValid:!0,photoSizeValid:!0,_createFitDataMapString:function(e){var t=[];return e.userHeightFt&&t.push("heightFeet="+e.userHeightFt),e.userHeight&&t.push("heightInches="+e.userHeight),e.userWeight&&t.push("weightLbs="+e.userWeight),e.sizePurchased&&t.push("sizePurchased="+e.sizePurchased),"undefined"!=typeof e.saveToProfile&&t.push("saveToProfile="+e.saveToProfile),t.join(",")},_doSyncNoReload:function(e,i,n){this._super(t,"_doSyncNoReload",e,i,n,"Review")},_validate:function(e){var t,i=this;return BC.user.communityAuthModal&&has("onereviewperuser")&&BC.user.isExplicitOrAutoLoggedIn?(t=function(t){var n;return i.isDupeReview=t,n=i._validationChecks(e),$.publish("asyncValidationComplete",n),n},void $(document).duplicatereviewajax({callback:t,profileId:BC.profile.id,productId:BC.product.id})):i._validationChecks(e)},_validationChecks:function(e){var t=this,i={};return t.validateRanking(e)||(i.ranking=$.t("review.ranking.err")),t.validateTitle(e)||(i.title=$.t("review.title.err")),t.validateDescription(e)||(i.description=$.t("review.description.err")),t.photoExtensionValid||(i.photoExtension=$.t("label.review.photo.file.type")),t.photoSizeValid||(i.maxSize=$.t("label.review.photo.file.size")),t.isDupeReview&&(i.duplicate=$.t("label.community.pdp.single.review")),t.fitValidationErrors&&_(t.fitValidationErrors).each(function(e,t){i[t]=e}),i},_validateInputsAreNumbers:function(e){var t,i=this;t=function(e){return!/^\d+$/.test(e)},"english"===e.units&&e.userHeightFt&&t(e.userHeightFt)&&(i.fitValidationErrors.fitHeightFeet=$.t("label.community.fit.data.height.error")),e.userHeight&&t(e.userHeight)&&(i.fitValidationErrors.fitHeight=$.t("label.community.fit.data.height.error")),e.userWeight&&t(e.userWeight)&&(i.fitValidationErrors.fitWeight=$.t("label.community.fit.data.weight.error"))},buildFitData:function(e){var t=this;return t.fitValidationErrors={},t._validateInputsAreNumbers(e),"metric"===e.units&&_(t.fitValidationErrors).isEmpty()&&t.convertFitDataToEnglish(e),t._createFitDataMapString(e)},convertFitDataToEnglish:function(e){var t=.393701*e.userHeight,i=Math.floor(t/12),n=Math.round(t%12);return e.userHeightFt=i,e.userHeight=n,e.userWeight=Math.round(2.20462*e.userWeight),e},save:function(t,i){var n,o,a,l=this,s=$.extend({files:i},t),r=l.get("contentType"),c=s.remoteVideoUrl||i&&i.filter(".js-video-upload").val(),d="update",p=!0,u=l._validate(s);if(!_(u).isEmpty())return l.trigger("validateError",u),null;if(i&&i.length&&!c)if(o=i.get(0),o.files&&o.files[0]){var m=o.files[0],h=new FileReader;l.trigger("uploadingPhoto"),h.onload=function(e){n=e.target.result,$.publish("review-image-uploaded",{newImageUpload:n})},h.readAsDataURL(m)}else o&&(l.trigger("uploadingPhoto"),n="//content.backcountry.com/promo_upload/bcs/2015/currently-uploading-image-default.jpeg",$.publish("review-image-uploaded",{newImageUpload:n}));return t.remoteMediaUrl&&l.trigger("uploadingPhoto"),l.isNew()?(d="create",BC.user.communityAuthModal&&!c?$.subscribe("asyncValidationComplete",function(e){return _(e).isEmpty()?void l._doSyncNoReload(d,t,i):(l.trigger("validateError",e),null)}):c?(a=function(){return l.validateVideo(s)||(p=!1,u.video=$.t("video.video.err")),p?(s.contentType=r,l._processVideo(s,"noReload"),void(has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id&&e.postAction(l.defaults.fbGraphAction,"product",BC.product.url,$.noop))):(l.trigger("validateError",u),null)},BC.user.communityAuthModal?$.subscribe("asyncValidationComplete",function(e){return _(e).isEmpty()?void a():(l.trigger("validateError",e),null)}):a()):(l._doSyncNoReload(d,t,i),has("fbopengraph")&&"1"===BC.site.id&&"pdp"===BC.page.id&&e.postAction(l.defaults.fbGraphAction,"product",BC.product.url,$.noop))):l._doSyncNoReload(d,t,i),!1},validateRanking:function(e){return!(!e.ranking||parseInt(e.ranking,10)<1)}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},290:function(e,t,i){var n,o;n=[i(79),i(80)],o=function(e,t){var i=e.extend({defaults:{contributionType:"video",contentType:"Video"},save:function(e,i){var n=this,o=$.extend({files:i},e),a={},l=!0;return n.validateTitle(o)||(l=!1,a.title=$.t("video.title.err")),l?(o.contentType=n.get("contentType"),n.isNew()?(has("fbopengraph")&&"1"===BC.site.id&&t.postAction("share_a_video_about","product",BC.product.url,$.noop),void n._processVideo(o)):n.sync("updateVideo",n,{data:e,sync:!0})):(n.trigger("validateError",a),null)}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},295:function(e,t,i){var n,o;n=[],o=function(){$.widget("bc.duplicatereviewajax",{options:{callback:$.noop,productId:0,profileId:0},_create:function(){var e=this;e._isDuplicateReview(e.options.callback)},_isDuplicateReview:function(e){var t=this,i="json",n="/community/users/"+t.options.profileId+"/reviews?productId="+t.options.productId;$.ajax({dataType:i,timeout:1e3,url:n}).done(function(e){t.isDupeReview=!!e.length}).fail(function(){t.isDupeReview=!1}).always(function(){e(t.isDupeReview)})}})}.apply(t,n),!(void 0!==o&&(e.exports=o))},300:function(e,t){!function(e,t,i){"use strict";var n,o=t.event;o.special.smartresize={setup:function(){t(this).bind("resize",o.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",o.special.smartresize.handler)},handler:function(e,i){var o=this,a=arguments;e.type="smartresize",n&&clearTimeout(n),n=setTimeout(function(){t.event.handle.apply(o,a)},"execAsap"===i?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,i){this.element=t(i),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(i){this.options=t.extend(!0,{},t.Mason.settings,i),this.styleQueue=[];var n=this.element[0].style;this.originalStyle={height:n.height||""};var o=this.options.containerStyle;for(var a in o)this.originalStyle[a]=n[a]||"";this.element.css(o),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){l.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,i){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var i=0,n=e.length;i<n;i++)this._placeBrick(e[i]);var o={};if(o.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var a=0;for(i=this.cols;--i&&0===this.colYs[i];)a++;o.width=(this.cols-a)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:o});var l,s=this.isLaidOut&&this.options.isAnimated?"animate":"css",r=this.options.animationOptions;for(i=0,n=this.styleQueue.length;i<n;i++)l=this.styleQueue[i],l.$el[s](l.style,r);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var i,n,o,a,l,s=t(e);if(i=Math.ceil(s.outerWidth(!0)/this.columnWidth),i=Math.min(i,this.cols),1===i)o=this.colYs;else for(n=this.cols+1-i,o=[],l=0;l<n;l++)a=this.colYs.slice(l,l+i),o[l]=Math.max.apply(Math,a);for(var r=Math.min.apply(Math,o),c=0,d=0,p=o.length;d<p;d++)if(o[d]===r){c=d;break}var u={top:r+this.offset.y};u[this.horizontalDirection]=this.columnWidth*c+this.offset.x,this.styleQueue.push({$el:s,style:u});var _=r+s.outerHeight(!0),m=this.cols+1-p;for(d=0;d<m;d++)this.colYs[c+d]=_},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,i){if(t){this._filterFindBricks(e).css({top:this.element.height()});var n=this;setTimeout(function(){n._appended(e,i)},1)}else this._appended(e,i)},_appended:function(e,t){var i=this._getBricks(e);this.$bricks=this.$bricks.add(i),this.layout(i,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var i=this.element[0].style;for(var n in this.originalStyle)i[n]=this.originalStyle[n];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function i(){e.call(o,a)}function n(e){var o=e.target;o.src!==s&&t.inArray(o,r)===-1&&(r.push(o),--l<=0&&(setTimeout(i),a.unbind(".imagesLoaded",n)))}var o=this,a=o.find("img").add(o.filter("img")),l=a.length,s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",r=[];return l||i(),a.bind("load.imagesLoaded error.imagesLoaded",n).each(function(){var e=this.src;this.src=s,this.src=e}),o};var a=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if("string"==typeof e){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"masonry");return n?t.isFunction(n[e])&&"_"!==e.charAt(0)?void n[e].apply(n,i):void a("no such method '"+e+"' for masonry instance"):void a("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'")})}else this.each(function(){var i=t.data(this,"masonry");i?(i.option(e||{}),i._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}}(window,jQuery)},313:function(e,t,i){var n,o;n=[i(20),i(261),i(228),i(259),i(139),i(230)],o=function(e,t,i,n,o){var a=e.extend({_CONTRIBUTION_TYPE:"comment",_TEMPLATE_MESSAGE_NAME:"message",_TEMPLATE_MESSAGE:"#template-message",_TEMPLATE_CONTENT_FLAG_NAME:"content-flag",_TEMPLATE_CONTENT_FLAG:"#template-content-flag",_TEMPLATE_CONTENT_EDIT_NAME:"comment-edit",_TEMPLATE_CONTENT_EDIT:"#template-comment-edit",_MAX_UNAUTHORIZED_FLAGS:2,options:{commentTools:".js-blog-comment-tools",editToolClasses:"js-comment-tools-edit",deleteToolClasses:"js-comment-tools-delete"},events:{"click .js-comment-menu-icon":"userToolsClick","click .js-comment-tools-delete":"deleteClick","click .js-comment-tools-flag":"flagClick","click .js-comment-tools-unflag":"unflagClick","click .flagged h3 a":"showFlagClick","click .flag-upc-btn":"saveFlagClick","click .js-comment-tools-edit":"editClick","click .js-cancel-comment-edit":"cancelEditClick"},initialize:function(){var e=this;$(function(){e.setElement(e.el),e._initCommentTools(),e._initHelpfulVoteView(),e._initTemplates(),e._initBadgeTooltips(),e.delegateEvents(e.events)})},_bindEvents:function(){var e=this;e.model.bind("flagError",function(t){e._flagError(t)}),e.model.bind("unflagError",function(t){e._unflagError(t)}),e.model.bind("change:showFlagged",function(t){e.render()}),e.model.bind("change:flagged",function(t){e.render()}),e.model.bind("destroy",function(t){e._destroySuccess()}),e.model.bind("destroyError",function(t){e._destroyError()})},_initCommentTools:function(){(BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered)&&this.$el.data("userId")==BC.profile.id&&this.$el.find(this.options.commentTools).empty().append(this._createCommentTool("edit","label.community.wall.tweak.this")).append(this._createCommentTool("delete","label.community.delete.this"))},_createCommentTool:function(e,t){return $("<li>").addClass(this.options[e+"ToolClasses"]).append($("<a>").text($.t(t)))},_initTemplates:function(){var e=this;e._initTemplate(e._TEMPLATE_MESSAGE_NAME,$(e._TEMPLATE_MESSAGE).html()),e._initTemplate(e._TEMPLATE_CONTENT_FLAG_NAME,$(e._TEMPLATE_CONTENT_FLAG).html()),e._initTemplate(e._TEMPLATE_CONTENT_EDIT_NAME,$(e._TEMPLATE_CONTENT_EDIT).html())},_initTemplate:function(e,t){BC.templates[e]||(BC.templates[e]=_.template(t))},_initBadgeTooltips:function(){this.$("#badges li img").tooltip({hover:!0})},_initHelpfulVoteView:function(){var e=this,i=$();(0===e.$(".js-comment-tools-edit").length||e.$(".upc-replies .js-comment-tools-edit").length>0)&&(i=e.$(".helpful-vote-wrapper").first()),i.length&&(e._helpfulVoteView=new t({model:e.model,isApiWall:!0,el:i}))},_initEditView:function(){var e,t=this,i=t.$(".upc-comment-edit"),o=t.model.clone();o.set(i.data()),e=new n({el:i,model:o}),e.on("comment-in-place-edit",function(e){t.model.set("description",e.description)})},_flagError:function(e){this.$(".flag-upc-btn").tooltip({content:e.errorMessage})},_unflagError:function(e){this.$(".unflag").tooltip({content:e.errorMessage})},_destroySuccess:function(e){var t=this,i=BC.templates[t._TEMPLATE_MESSAGE_NAME]({message:$.t("community.base.inactivate.success",t._CONTRIBUTION_TYPE)});t.$el.html(i).addClass("upc-deleted")},_destroyError:function(e){this.$(".upc-tools .delete a").tooltip({content:e.errorMessage})},cancelEditClick:function(){var e=this;e.$("section.upc-comment-edit").empty(),e.$("form.flag-upc").remove(),e.$(".existing-comment").show()},checkAuthorizedToFlag:function(e){var t=this,i=0;return!!(BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered)||(i=parseInt($.cookie("community-unauth-flag-count"),10)||0,i<this._MAX_UNAUTHORIZED_FLAGS?(i++,$.cookie("community-unauth-flag-count",i,{expires:1,path:"/"}),!0):($("#auth").authModal("authenticate",function(){e?t.unflagClick():t.saveFlagClick()},$.t("community.base.max.unauth.flag")),!1))},deleteClick:function(){this.toggleUserTools(this),this.model.destroy()},editClick:function(){var e=this,t=e.model;e.toggleUserTools(e);var i=BC.templates[e._TEMPLATE_CONTENT_EDIT_NAME](t.toJSON());e.$(".upc-comment-edit").first().html(i),e.$(".existing-comment").hide(),e.$("#comment-edit-textarea").animate({"min-height":"160px"},500).focus(),e._initEditView(),window.location.hash=e._CONTRIBUTION_TYPE+"-"+e.model.get("contentId")},flagClick:function(){var e=this,t=e.model;if(e.toggleUserTools(e),e.$(".flag-upc").length>0)return!1;var i=BC.templates[e._TEMPLATE_CONTENT_FLAG_NAME]({contentId:t.get("contentId")});e.$(".upc-replies").first().prepend(i)},saveFlagClick:function(){var e=this;e.checkAuthorizedToFlag()&&e.model.flag({reason:e.$(".flag-upc .flag-reason").val()})},showFlagClick:function(){var e=this;e.model.set({showFlagged:!0})},toggleUserTools:function(e){e.$el.find(this.options.commentTools).toggle()},unflagClick:function(){var e=this;e.checkAuthorizedToFlag(!0)&&e.model.unflag()},userToolsClick:function(e){$(e.target).next(this.options.commentTools).toggle()},render:function(e){var t=this,i=t.model,n=t.$el;$.ajax({url:"/Store/community/explore/includes/blogPostComment.jsp",data:{contentId:i.get("contentId"),showFlagged:i.get("showFlagged")},success:function(e){var i=$(e).find("article").html();n.html(i),t._initHelpfulVoteView()},dataType:"text"})}});return a}.apply(t,n),!(void 0!==o&&(e.exports=o))},314:function(e,t,i){var n,o;n=[i(123),i(259)],o=function(e,t){var i=e.extend({_CONTRIBUTION_TYPE:"comment",_editView:t,_TEMPLATE_CONTENT_EDIT:"#template-comment-edit",className:"comment",events:{"click .upc-child > .upc-tools .edit a":"editClick","click .upc-child > .upc-tools .delete a":"destroyClick","click .upc-child > .upc-tools .flag a":"flagClick","click .upc-child > .upc-tools .unflag a":"unflagClick","click .upc-child.flagged h3 a":"showFlagClick","click .upc-child + .upc-replies > .flag-upc .submit-upc-reply":"saveFlagClick","click .upc-child > .upc-mbl-tools .edit a":"editClick","click .upc-child > .upc-mbl-tools .delete a":"destroyClick"},constructor:function(){var t=this;t.events=$.extend({},e.prototype.events,t.events),e.prototype.constructor.apply(t,arguments)}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},323:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.each(children,function(e){if(__p+='\n  <article class="upc-child user-content-child '+(null==(__t=e.contentType)?"":__t)+" ",e.isFlagged&&(__p+=" flagged-"+(null==(__t=e.contentType)?"":__t)+" flagged-child"),__p+='"\n    data-'+(null==(__t=e.contentType)?"":__t)+'_id="'+(null==(__t=e.contentId)?"":__t)+'"\n    data-body="'+(null==(__t=e.description)?"":__t)+'"\n    data-description="'+(null==(__t=e.description)?"":__t)+'"\n    data-flagged="',e.isFlagged&&(__p+=null==(__t=e.isFlagged)?"":__t),__p+='"\n    data-show_flagged="',__p+=e.isFlagged?" false ":" true ",__p+='"\n    data-user-display_name="'+(null==(__t=e.user.displayName)?"":__t)+'"\n    data-user-id="'+(null==(__t=e.user.userId)?"":__t)+'"\n    data-user-url="'+(null==(__t=e.user.profileUrl)?"":__t)+'"\n    data-user-employee="'+(null==(__t=e.user.employeeStatus)?"":__t)+'">\n\n    ',e.isFlagged)__p+='\n      <section class="user-content-child '+(null==(__t=e.contentType)?"":__t)+' flagged" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n        <h3 class="flagged-messaging">\n          <a href="#'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n            '+(null==(__t=$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason))?"":__t)+"\n          </a>\n        </h3>\n      </section>\n    ";else{__p+='\n      <section class="user-content-child '+(null==(__t=e.contentType)?"":__t)+" js-"+(null==(__t=e.contentType)?"":__t)+'" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'"\n        itemprop="'+(null==(__t=e.contentType)?"":__t)+'" itemscope itemtype="http://schema.org/UserComments">\n        <section class="upc-content">\n          <span class="upc-type"></span>\n          <section class="js-user-card user-card" itemprop="author" itemscope itemtype="http://schema.org/Person">\n            '+(null==(__t=e.userVCard)?"":__t)+'\n\n            <span class="user-content__byline mouse" itemprop="datePublished">\n              <time datetime="'+(null==(__t=e.created)?"":__t)+'">\n                '+(null==(__t=e.created)?"":__t)+"\n              </time>\n            </span>\n          </section>\n\n          ";var t=e.descriptionFormatted||e.description;__p+='\n          <p class="user-content__body description" itemprop="'+(null==(__t=e.contentType)?"":__t)+'Text">'+(null==(__t=t)?"":__t)+"</p>\n          ",e.imageUrl&&(__p+='\n            <a class="js-highslide" id="photo-'+(null==(__t=e.contentId)?"":__t)+'" href="'+(null==(__t=e.imageUrl)?"":__t)+'">\n              <img data-src="'+(null==(__t=e.imageUrl)?"":__t)+'" class="js-community-lazyload cpi upc-reply-cpi" alt="'+(null==(__t=e.description)?"":__t)+'"/>\n            </a>\n          '),__p+='\n        </section>\n        <section class="user-content__footer">\n          ',showCommunityTools&&"competitivecyclist"!==siteCode&&(__p+='\n            <article class="js-child-solicit user-content-child-solicit">\n              <span class="user-content__show-form-btn">\n                ',__p+=isMobile?"\n                  "+(null==(__t=$.t("community.answer.form.button.mobile"))?"":__t)+"\n                ":"\n                  "+(null==(__t=$.t("community.answer.form.button"))?"":__t)+"\n                ",__p+="\n              </span>\n            </article>\n            "+(null==(__t=e.upcTools)?"":__t)+"\n          "),__p+="\n        </section>\n      </section>\n    "}__p+="\n  </article>\n"}),__p+="\n";return __p}},324:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.each(wallData,function(e){if(e.imageUrl){var t=lazyLoad?" js-community-lazyload":"",i=lazyLoad?"data-":"";e.upcImage='<a class="js-highslide" id="photo-'+e.contentId+'" href="'+e.imageUrl+'"><img '+i+'src="'+e.imageUrl+'" class="cpi upc-cpi'+t+' user-content__image" alt="'+e.title+'"/></a>'}if(__p+="\n\n  ","productImage"===e.contentType&&(e.contentType="photo"),__p+="\n\n  ",e.videoId&&e.videoType&&(e.upcVideo=e.upcVideo||"",e.upcVideo+='<div class="user-content__video-wrapper">',"youtube"===e.videoType?e.upcVideo+='<iframe itemprop="video" class="video-youtube" src="//www.youtube.com/embed/'+e.videoId+'?rel=0&amp;wmode=opaque" frameborder="0"  allowfullscreen></iframe>':"vimeo"===e.videoType&&(e.upcVideo+='<iframe itemprop="video" class="video-vimeo" src="//player.vimeo.com/video/'+e.videoId+'" frameborder="0"></iframe>'),e.upcVideo+="</div>"),__p+='\n\n  <article class="js-pdp-wall-masonry-item user-content-thread upc '+(null==(__t=e.contentType)?"":__t)+"\n          ",e.isFlagged&&(__p+=" flagged-"+(null==(__t=e.contentType)?"":__t)+" flagged-parent"),__p+="\n          ","question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+='"\n    data-'+(null==(__t=e.contentType)?"":__t)+'_id="'+(null==(__t=e.contentId)?"":__t)+'"\n    ',"photo"===e.contentType&&(__p+='data-cpi_id="'+(null==(__t=e.contentId)?"":__t)+'"'),__p+='\n    data-title="',e.title&&(__p+=null==(__t=e.title)?"":__t),__p+='"\n    data-gender="',e.gender&&(__p+=null==(__t=e.gender)?"":__t),__p+='"\n    data-familiarity="',e.familiarity&&(__p+=null==(__t=e.familiarity)?"":__t),__p+='"\n    data-size_fit="',e.sizeFit&&(__p+=null==(__t=e.sizeFit)?"":__t),__p+='"\n    data-description="',e.description&&(__p+=null==(__t=e.description)?"":__t),__p+='"\n    data-fit-height-ft="',e.fitData&&e.fitData.heightFeet&&(__p+=null==(__t=e.fitData.heightFeet)?"":__t),__p+='"\n    data-fit-height-in="',e.fitData&&e.fitData.heightInches&&(__p+=null==(__t=e.fitData.heightInches)?"":__t),__p+='"\n    data-fit-size-purchased="',e.fitData&&e.fitData.sizePurchased&&(__p+=null==(__t=e.fitData.sizePurchased)?"":__t),__p+='"\n    data-fit-weight="',e.fitData&&e.fitData.weightLbs&&(__p+=null==(__t=e.fitData.weightLbs)?"":__t),__p+='"\n    data-flagged="',e.isFlagged&&(__p+=null==(__t=e.isFlagged)?"":__t),__p+='"\n    data-has_image="',e.hasImage&&(__p+=null==(__t=e.hasImage)?"":__t),__p+='"\n    data-image_url_small="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n    data-image_url_medium="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),
__p+='"\n    data-image_url_large="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n    data-is_gearhead="',e.user&&e.user.isGearhead&&(__p+=null==(__t=e.user.isGearhead)?"":__t),__p+='"\n    data-video_id="',e.videoId&&(__p+=null==(__t=e.videoId)?"":__t),__p+='"\n    data-video_type="',e.videoType&&(__p+=null==(__t=e.videoType)?"":__t),__p+='"\n    data-rank="',e.starRating&&(__p+=null==(__t=e.starRating)?"":__t),__p+='"\n    data-user-display_name="',e.user.displayName&&(__p+=null==(__t=e.user.displayName)?"":__t),__p+='"\n    data-user-id="',e.user.userId&&(__p+=null==(__t=e.user.userId)?"":__t),__p+='"\n    data-user-url="',e.user.profileUrl&&(__p+=null==(__t=e.user.profileUrl)?"":__t),__p+='"\n    data-user-employee="',e.user.employeeStatus&&(__p+=null==(__t=e.user.employeeStatus)?"":__t),__p+='"\n    data-votes="',e.votes&&(__p+=null==(__t=e.votes)?"":__t),__p+='"\n    itemprop="',e.contentType&&(__p+=null==(__t=e.contentType)?"":__t),__p+='"\n    itemscope itemtype="http://schema.org/Review">\n\n  ',e.isFlagged)__p+='\n    <section class="upc-single '+(null==(__t=e.contentType)?"":__t)+' flagged" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n      <h3 class="flagged-messaging">\n        <a class="flagged-messaging-link" href="#'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n          '+(null==(__t=$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason))?"":__t)+"\n        </a>\n      </h3>\n    </section>\n  ";else{__p+='\n    <section class="upc-single user-content-'+(null==(__t=e.contentType)?"":__t)+" "+(null==(__t=e.contentType)?"":__t)+" ","question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+='" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n      <section class="upc-content user-content js-user-content">\n        <section class="upc-head">\n          <div class="upc-head__details">\n            ',"review"===e.contentType&&(__p+='\n              <div class="user-content__rating">\n                <span class="rating-value-'+(null==(__t=e.starRating)?"":__t)+' user-content__rating-stars" itemprop="ratingValue"></span>\n              </div>\n            '),__p+='\n\n            <span class="user-content__byline mouse" itemprop="datePublished">\n              <time datetime="'+(null==(__t=e.created)?"":__t)+'">'+(null==(__t=e.created)?"":__t)+"</time>\n            </span>\n          </div>\n\n          ",e.title&&(__p+='\n            <h3 class="user-content__title upc-title" itemprop="name">'+(null==(__t=e.title)?"":__t)+"</h3>\n          "),__p+="\n\n          ","review"===e.contentType&&(__p+='\n            <ul class="product-review-details">\n              ',e.familiarity&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.familiarity"))?"":__t)+'</span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.familiarity)?"":__t)+"</span>\n                </li>\n              "),__p+="\n              ",e.sizeFit&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.size.fit"))?"":__t)+'</span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.sizeFit)?"":__t)+"</span>\n                </li>\n              "),__p+="\n              ",e.fitData&&e.fitData.sizePurchased&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("community.product.info.size.purchased"))?"":__t)+' </span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.fitData.sizePurchased)?"":__t)+"</span>\n                </li>\n              "),__p+='\n              <li class="product-review-details__item">\n              ',e.fitData&&e.fitData.heightFeet&&(__p+='\n                  <span class="product-review-details__item-title product-review-details__item-title--short">'+(null==(__t=$.t("community.user.info.height.label"))?"":__t)+'</span>\n                  <span class="product-review-details__item-description product-review-details__item-description--space">'+(null==(__t=e.fitData.heightFeet)?"":__t)+"' ",e.fitData.heightInches&&(__p+=(null==(__t=e.fitData.heightInches)?"":__t)+'"'),__p+="</span>\n              "),__p+="\n              ",e.fitData&&e.fitData.weightLbs&&(__p+='\n                <span class="product-review-details__item-title product-review-details__item-title--short">'+(null==(__t=$.t("community.user.info.weight.label"))?"":__t)+'</span>\n                <span class="product-review-details__item-description">'+(null==(__t=e.fitData.weightLbs)?"":__t)+(null==(__t=$.t("community.user.info.weight.units"))?"":__t)+"</span>\n              "),__p+="\n              </li>\n            </ul>\n          "),__p+="\n        </section>\n\n        ",has("showstravaonproductwall")&&e.user.avgTimeRide&&(__p+='\n          <div class="review-list-item-strava">\n              <img src="/images/competitivecyclist/strava/strava-echelon.png" height="35px" width="35px"/>\n              <span class="review-list-strava-title">\n                  '+(null==(__t=$.t("community.strava.average.time.label"))?"":__t)+'\n              </span>\n              <span class="js-strava-dialog-link strava-dialog-link" data-content-id="'+(null==(__t=e.contentId)?"":__t)+'"> '+(null==(__t=e.user.avgTimeRide)?"":__t)+"\n                  "+(null==(__t=$.t("community.strava.average.time.range"))?"":__t)+'\n              </span>\n          </div>\n          <div class="strava-modal" id="strava-modal-'+(null==(__t=e.contentId)?"":__t)+'">\n              <div class="js-strava-close strava-modal-close" data-content-id="'+(null==(__t=e.contentId)?"":__t)+'">\n              </div>\n            <div class="strava-modal-content">\n                <ul>\n                    <li>\n                      <span>'+(null==(__t=$.t("community.strava.average.description"))?"":__t)+'</span>\n                    </li>\n                    <li>\n                        <a href="/strava" target="_blank">\n                          <img src="//content.backcountry.com/promo_upload/cc/promos/2015/strava/connect-with-strava.png"/>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n          </div>\n        '),__p+="\n\n        ";var n=e.descriptionFormatted||e.description||"";__p+='\n        <p class="user-content__body description" itemprop="'+(null==(__t=e.contentType)?"":__t)+'Body">'+(null==(__t=n)?"":__t)+"</p>\n\n        ","video"!==e.contentType&&"photo"!==e.contentType&&(__p+="\n          ",e.videoId?__p+="\n            "+(null==(__t=e.upcVideo)?"":__t)+"\n          ":e.imageUrl&&(__p+="\n            "+(null==(__t=e.upcImage)?"":__t)+"\n          "),__p+="\n        "),__p+="\n      </section>\n\n      ","video"===e.contentType?__p+="\n        "+(null==(__t=e.upcVideo)?"":__t)+"\n      ":"photo"===e.contentType&&(__p+="\n        "+(null==(__t=e.upcImage)?"":__t)+"\n      "),__p+='\n      \n      <section class="js-user-card user-card" itemprop="author" itemscope itemtype="http://schema.org/Person">\n        '+(null==(__t=e.userVCard)?"":__t)+'\n      </section>\n      <section class="user-content__footer js-user-content__footer">\n        ',e.solicitForm&&!isNewContent?__p+="\n          "+(null==(__t=e.solicitForm)?"":__t)+"\n        ":isNewContent&&(__p+='\n          <div class="content-solicit-placeholder"></div>\n        '),__p+="\n        "+(null==(__t=e.upcTools)?"":__t)+'\n      </section>\n    </section>\n\n    <section class="upc-replies">\n      ',e.childrenHtml&&(__p+="\n        "+(null==(__t=e.childrenHtml)?"":__t)+"\n      "),__p+="\n    </section>\n\n  "}__p+="\n  </article>\n"}),__p+="\n";return __p}},325:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<article class="js-child-solicit user-content-child-solicit"\n  data-question-id="'+(null==(__t=contentId)?"":__t)+'"\n  data-success-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n  data-error-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n  data-question-url="'+(null==(__t=contentUrl)?"":__t)+'"\n  data-product-id="'+(null==(__t=productId)?"":__t)+'">\n\n  <a class="js-user-content-show-form-btn user-content__show-form-btn">\n    ',__p+=isMobile?"\n      "+(null==(__t=$.t("community.answer.form.button.mobile"))?"":__t)+"\n    ":"\n      "+(null==(__t=$.t("community.answer.form.button"))?"":__t)+"\n    ",__p+='\n  </a>\n\n  <form id="answerf" name="answerf" enctype="multipart/form-data" action="'+(null==(__t=contentUrl)?"":__t)+'" method="post" class="hidden js-user-content-child-solicit__form user-content-child-solicit__form '+(null==(__t=formClass)?"":__t)+' wall-interaction">\n    <h3 class="user-content-child-solicit__form-header">\n      '+(null==(__t=$.t("community.answer.form.heading",userDisplayName))?"":__t)+'\n    </h3>\n\n    <div class="user-content-child-solicit__textarea-wrapper">\n      <textarea id="upc-content" class="user-content-child-solicit__textarea"></textarea>\n    </div>\n\n    <div class="user-content-child-solicit__upload-media">\n      <div class="faux-label add-media">\n        <span class="label-text">\n          '+(null==(__t=$.t("label.community.wall.add.photo"))?"":__t)+'\n          <em class="optional-text">'+(null==(__t=$.t("label.community.wall.optional"))?"":__t)+'</em>\n        </span>\n        <div class="faux-col">\n          <span class="label-text label-media-upload">'+(null==(__t=$.t("label.community.wall.from.computer"))?"":__t)+'</span>\n          <input type="file" name="uploadMedia" id="upload-photo" class="qa-upload-photo"/>\n          <span class="label-text label-remote-content">'+(null==(__t=$.t("label.community.wall.from.website"))?"":__t)+'</span>\n          <input type="text" id="hotlink-photo" class="upload-media__remote-content qa-hotlink-photo" placeholder="http://"/>\n        </div>\n      </div>\n    </div>\n\n    <div class="user-content-child-solicit__button-row">\n      <a class="btn-secondary js-create-submit">'+(null==(__t=$.t("label.submit"))?"":__t)+"</a>\n    </div>\n  </form>\n</article>";return __p}},326:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<article class="js-child-solicit user-content-child-solicit"\n  data-comment-content-id="'+(null==(__t=contentId)?"":__t)+'"\n  data-success-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n  data-error-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n  data-product-id="'+(null==(__t=productId)?"":__t)+'">\n\n  <a class="js-user-content-show-form-btn user-content__show-form-btn">\n    '+(null==(__t=$.t("community.comment.form.button"))?"":__t)+'\n  </a>\n\n  <form id="commentf" name="commentf" enctype="multipart/form-data" action="'+(null==(__t=contentUrl)?"":__t)+'" method="post" class="hidden js-user-content-child-solicit__form user-content-child-solicit__form '+(null==(__t=formClass)?"":__t)+'">\n\n    <h3 class="user-content-child-solicit__form-header">\n      '+(null==(__t=$.t("community.comment.form.heading"))?"":__t)+'\n    </h3>\n    <div class="user-content-child-solicit__textarea-wrapper">\n      <textarea id="upc-content" class="user-content-child-solicit__textarea cta"></textarea>\n    </div>\n\n    <div class="user-content-child-solicit__button-row">\n      <a class="btn-secondary js-create-submit">'+(null==(__t=$.t("community.comment.form.submit"))?"":__t)+"</a>\n    </div>\n  </form>\n</article>";return __p}},327:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){if(showCommunityTools){if(__p+="\n  ",isMobile){if(__p+='\n    <ul class="upc-tools js-upc-tool-list">\n      ',isNewContent)__p+='\n        <li class="edit"><a>'+(null==(__t=$.t("label.edit"))?"":__t)+'</a></li>\n        <li class="delete"><a>'+(null==(__t=$.t("community.delete.wall.content"))?"":__t)+"</a></li>\n      ";else{__p+="\n        ";var flagType=content.isFlagged||content.unFlagBtn?"unflag":"flag";__p+='\n        <li class="'+(null==(__t=flagType)?"":__t)+' js-upc-mbl-flag js-flag-wrap">\n          <a class="js-flag-link flag-label">\n            <span>\n              ',__p+=content.unFlagBtn?" \n                "+(null==(__t=$.t("label.community.wall.unflag"))?"":__t)+"\n              ":"\n                "+(null==(__t=$.t("community.upc.tools.flag.label.mobile"))?"":__t)+"\n              ",__p+='\n            </span>\n          </a>\n        </li>\n        <li class="vote js-vote-wrap">\n          <a class="helpful-vote js-helpful-vote-link js-helpful-vote-link-mbl">\n            <span class="mbl-likes">'+(null==(__t=$.t("community.upc.tools.upvote.label.mobile"))?"":__t)+'</span>\n          </a>\n          <span class="js-mbl-capsule mbl-capsule">'+(null==(__t=content.votes)?"":__t)+"</span>\n        </li>\n      "}__p+="\n    </ul>\n  "}else __p+='\n    <div class="upc-tools">\n      <ul class="js-upc-tool-list">\n        ',isNewContent?__p+='\n          <li class="edit"><a>'+(null==(__t=$.t("label.edit"))?"":__t)+'</a></li>\n          <li class="delete"><a>'+(null==(__t=$.t("community.delete.wall.content"))?"":__t)+"</a></li>\n        ":(__p+="\n          ",__p+=content.isFlagged||content.unFlagBtn?'\n            <li class="unflag js-flag-wrap"><a class="js-flag-link">'+(null==(__t=$.t("label.community.wall.unflag"))?"":__t)+"</a></li>\n          ":'\n            <li class="flag js-flag-wrap">\n              <a class="js-flag-link">\n                <span class="flag-label">\n                  '+(null==(__t=$.t("community.upc.tools.flag.label"))?"":__t)+"\n                </span>\n              </a>\n            </li>\n          ",__p+='\n          <li class="vote js-vote-wrap">\n            <a class="helpful-vote pre_yes js-helpful-vote-link">\n            </a>\n            <span class="js-num-votes num-votes">'+(null==(__t=content.votes)?"":__t)+"</span>\n          </li>\n        "),__p+="\n      </ul>\n    </div>\n  ";__p+="\n"}else __p+='\n  <div class="upc-tools empty"></div>\n';__p+="\n"}return __p}},328:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="user-card__wrap ',content.user&&content.user.isGearhead&&(__p+=" js-is-gearhead "),__p+='" \n  data-user-id="'+(null==(__t=content.user.userId)?"":__t)+'">\n  <span class="user-card__photo-wrapper">\n    <img ',lazyLoad&&(__p+="data-"),__p+='src="'+(null==(__t=content.user.imageUrl)?"":__t)+'" alt="'+(null==(__t=content.user.displayName)?"":__t)+'" data-username="'+(null==(__t=content.user.displayName)?"":__t)+'" data-userid="'+(null==(__t=content.user.userId)?"":__t)+'" class="user-card__photo js-community-lazyload" itemprop="image"/>\n  </span>\n\n  <span class="user-card__info">\n    <a href="'+(null==(__t=content.user.profileUrl)?"":__t)+'" class="user-card__name qa-review-user-name" itemprop="url">'+(null==(__t=content.user.displayName)?"":__t)+"</a>\n    ",content.user.isGearhead&&(__p+='\n    <span class="user-card__title">\n       <span class="js-gearhead-badge">'+(null==(__t=$.t("label.user.badge.gearhead"))?"":__t)+"</span>\n    </span>\n    "),__p+=" \n  </span>\n</div>\n";return __p}},333:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<span class="expert-gearhead-info">\n\t<a href="mailto:'+(null==(__t=expert.email)?"":__t)+"?subject=About your thoughts on "+(null==(__t=expert.product)?"":__t)+"&body=%0D%0D"+(null==(__t=expert.productUrl)?"":__t)+'" class="btn-secondary expert-gearhead-email-btn js-expert-gearhead-email">Email</a>\n\t<span class="expert-gearhead-call">'+(null==(__t=$.t("label.call"))?"":__t)+' <a href="tel:+1-'+(null==(__t=expert.phone)?"":__t)+'" class="expert-gearhead-phone js-expert-gearhead-phone">'+(null==(__t=expert.phone)?"":__t)+"</a></span>\n</span>\n";return __p}},334:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<span class="expert-gearhead-info js-expert-gearhead-info">\n  ';var buttonClass=has("large")?"":"btn-secondary ";__p+='\n\n  <div class="expert-gearhead-info__contact-wrap">\n    <span class="expert-gearhead-info__call">\n      <a href="tel:+1-'+(null==(__t=expert.phone)?"":__t)+'" class="'+(null==(__t=buttonClass)?"":__t)+'expert-gearhead-info__phone js-expert-gearhead-phone">\n        ',__p+=has("large")?"\n          "+(null==(__t=expert.phone)?"":__t)+"\n        ":"\n          Call\n        ",__p+='\n      </a>\n    </span>\n    <a href="mailto:'+(null==(__t=expert.email)?"":__t)+"?subject=About your thoughts on "+(null==(__t=expert.product)?"":__t)+"&body=%0D%0D"+(null==(__t=expert.productUrl)?"":__t)+'" class="'+(null==(__t=buttonClass)?"":__t)+'expert-gearhead-info__email js-expert-gearhead-email">\n      ',__p+=has("large")?"\n        "+(null==(__t=expert.email)?"":__t)+"\n      ":"\n        Email\n      ",__p+='\n    </a>\n  </div>\n\n  <img class="expert-gearhead-info__badge"\n       srcset="/images/bcs/ghx/Badge_Certified-40@2x.png 2x,\n               /images/bcs/ghx/Badge_Certified-40@3x.png 3x"\n       src="/images/bcs/ghx/Badge_Certified-40.png" alt="'+(null==(__t=$.t("label.gearhead.certified"))?"":__t)+'">\n</span>\n'}return __p}},335:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<span class="expert-gearhead-info js-expert-gearhead-info">\n  <h4 class="expert-gearhead-info__heading">\n    '+(null==(__t=$.t("label.gearhead.expert.contact.info",expert.firstName))?"":__t)+'\n  </h4>\n  <div class="expert-gearhead-info__contact-wrap">\n    <span class="expert-gearhead-info__call">\n      <a href="tel:+1-'+(null==(__t=expert.phone)?"":__t)+'" class="expert-gearhead-info__phone js-expert-gearhead-phone">'+(null==(__t=expert.phone)?"":__t)+'</a>\n    </span>\n    <a href="mailto:'+(null==(__t=expert.email)?"":__t)+"?subject=About your thoughts on "+(null==(__t=expert.product)?"":__t)+"&body=%0D%0D"+(null==(__t=expert.productUrl)?"":__t)+'" class="expert-gearhead-info__email js-expert-gearhead-email">\n      '+(null==(__t=expert.email)?"":__t)+"\n    </a>\n  </div>\n</span>\n";return __p}},339:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<article class="js-child-solicit upc-child-solicitations upc-child comment',comment.isFlagged&&(__p+=" flagged-comment flagged-child"),__p+='"\n    data-success-url=""\n    data-error-url=""\n    data-post-id=""\n    data-comment_id="'+(null==(__t=comment.contentId)?"":__t)+'"\n    data-description="'+(null==(__t=comment.description)?"":__t)+'"\n    data-flagged="',comment.isFlagged&&(__p+=null==(__t=comment.isFlagged)?"":__t),__p+='"\n    data-show_flagged="true"\n    data-user-display_name="'+(null==(__t=comment.user.displayName)?"":__t)+'"\n    data-user-id="'+(null==(__t=comment.user.userId)?"":__t)+'"\n    data-user-url="'+(null==(__t=comment.user.profileUrl)?"":__t)+'"\n    data-page-type="explore"\n    data-url="">\n\n    <div class="comment-text-wrapper">\n        <div class="author-wrapper">\n            <div class="author">\n                <div class="profile-pic">\n                    ',__p+=comment.user.imageUrl?'\n                        <img src="'+(null==(__t=comment.user.imageUrl)?"":__t)+'" class="js-miniprofile-hook" alt="'+(null==(__t=comment.user.displayName)?"":__t)+'" data-username="'+(null==(__t=comment.user.displayName)?"":__t)+'" data-userid="'+(null==(__t=comment.user.userId)?"":__t)+'" itemprop="image">\n                    ':'\n                        <img src="/images/bcs/pages/community/blog/profile-default-big.png">\n                    ',__p+='\n                </div>\n                <h4 class="author-name">\n                    <a href="'+(null==(__t=comment.user.profileUrl)?"":__t)+'">'+(null==(__t=comment.user.displayName)?"":__t)+'</a>\n                </h4>\n                <time datetime="'+(null==(__t=comment.created)?"":__t)+'">'+(null==(__t=comment.created)?"":__t)+'</time>\n            </div>\n        </div>\n        <div class="comment-text existing-comment">\n            ';var descriptionDisplay=comment.descriptionFormatted||comment.description;__p+='\n            <p class="js-existing-comment-description">'+(null==(__t=descriptionDisplay)?"":__t)+'</p>\n        </div>\n        <section class="upc-comment-edit"></section>\n\n        <div class="blog-comment-menu">\n            <div class="blog-comment-menu-icon js-comment-menu-icon"></div>\n            <ul class="blog-comment-tools js-blog-comment-tools">\n                <li class="js-comment-tools-edit"><a>'+(null==(__t=$.t("label.community.wall.tweak.this"))?"":__t)+'</a></li>\n                <li class="js-comment-tools-delete"><a>'+(null==(__t=$.t("just.in.delete.facet")+" "+$.t("label.this"))?"":__t)+'</a></li>\n            </ul>\n        </div>\n    </div>\n    <section class="upc-replies"></section>\n</article>\n'}return __p}},340:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.each(wallData,function(e){if(__p+="\n    ",e.imageUrl){var t=lazyLoad?" js-lazyload":"",i=lazyLoad?"data-":"";e.upcImage='<a class="js-highslide" id="photo-'+e.contentId+'" href="'+e.imageUrl+'"><div class="profile-post-content-img-wrap"><img '+i+'src="'+e.imageUrl+'" class="profile-post-content-img'+t+'" alt="'+e.title+'"/></div></a>'}__p+="\n\n    ",e.videoId&&e.videoType&&(e.upcVideo="",isMobile&&(e.upcVideo+='<div class="mbl-video-wrapper">'),"youtube"===e.videoType?e.upcVideo+='<iframe itemprop="video" class="profile-post-iframe js-video-frame" src="//www.youtube.com/embed/'+e.videoId+'?rel=0&amp;wmode=opaque" frameborder="0" width="438" height="360" allowfullscreen></iframe>':"vimeo"===e.videoType&&(e.upcVideo+='<iframe itemprop="video" class="profile-post-iframe js-video-frame" src="//player.vimeo.com/video/'+e.videoId+'" width="438" height="360" frameborder="0"></iframe>'),isMobile&&(e.upcVideo+="</div>")),__p+="\n\n    ","productImage"===e.contentType&&(e.contentType="photo"),__p+="\n\n    ";var n="question"===e.contentType?"Answers":"Comments";if(__p+='\n\n    <div class="upc '+(null==(__t=e.contentType)?"":__t)+" js-masonry-item profile-post-wrap profile-post-hidden js-profile-post-hidden",e.isFlagged&&(__p+=" flagged-"+(null==(__t=e.contentType)?"":__t)+" flagged-parent"),"question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),e.totalChildren>0&&isMobile&&(__p+=" js-slidetoggle-productwall-content"),__p+='"\n        data-'+(null==(__t=e.contentType)?"":__t)+'_id="'+(null==(__t=e.contentId)?"":__t)+'"\n        ',"photo"===e.contentType&&(__p+='data-cpi_id="'+(null==(__t=e.contentId)?"":__t)+'"'),__p+='\n        data-description="',e.description&&(__p+=null==(__t=e.description)?"":__t),__p+='"\n        data-gender="',e.gender&&(__p+=null==(__t=e.gender)?"":__t),__p+='"\n        data-familiarity="',e.familiarity&&(__p+=null==(__t=e.familiarity)?"":__t),__p+='"\n        data-flagged="',e.isFlagged&&(__p+=null==(__t=e.isFlagged)?"":__t),__p+='"\n        data-has_image="',e.hasImage&&(__p+=null==(__t=e.hasImage)?"":__t),__p+='"\n        data-image_url_large="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n        data-image_url_medium="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n        data-image_url_small="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n        data-rank="',e.starRating&&(__p+=null==(__t=e.starRating)?"":__t),__p+='"\n        data-size_fit="',e.sizeFit&&(__p+=null==(__t=e.sizeFit)?"":__t),__p+='"\n        data-title="',e.title&&(__p+=null==(__t=e.title)?"":__t),__p+='"\n        data-user-display_name="',e.user.displayName&&(__p+=null==(__t=e.user.displayName)?"":__t),__p+='"\n        data-user-employee="',e.user.employeeStatus&&(__p+=null==(__t=e.user.employeeStatus)?"":__t),__p+='"\n        data-user-id="',e.user.userId&&(__p+=null==(__t=e.user.userId)?"":__t),__p+='"\n        data-user-url="',e.user.profileUrl&&(__p+=null==(__t=e.user.profileUrl)?"":__t),__p+='"\n        data-video_id="',e.videoId&&(__p+=null==(__t=e.videoId)?"":__t),__p+='"\n        data-video_type="',e.videoType&&(__p+=null==(__t=e.videoType)?"":__t),__p+='"\n        itemprop="',e.contentType&&(__p+=null==(__t=e.contentType)?"":__t),__p+='"\n        itemscope itemtype="http://schema.org/Review">\n\n    ',e.isFlagged)__p+='\n        <section class="profile-post '+(null==(__t=e.contentType)?"":__t)+' flagged" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n            <h3 class="flagged-messaging">\n                <div class="flagged-circular-icon"></div>\n                <a href="#'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n                    '+(null==(__t=$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason))?"":__t)+"\n                </a>\n            </h3>\n        </section>\n    ";else{__p+='\n        <article class="profile-post">\n            <section class="upc-replies profile-post-replies"></section>\n            <section class="js-profile-post-body">\n                <div class="profile-post-header-wrap">\n                    '+(null==(__t=e.userVCard)?"":__t)+'\n                    <h4 class="profile-post-header">\n                        '+(null==(__t=e.user.displayName)?"":__t)+'\n                        <span class="profile-post-header-title">\n                            '+(null==(__t=$.t("label.community.profile.wrote"+e.contentType))?"":__t)+'\n                            <a href="'+(null==(__t=e.referenceUrl)?"":__t)+'" class="summary" itemprop="url">\n                                '+(null==(__t=e.brandName)?"":__t)+" "+(null==(__t=e.referenceTitle)?"":__t)+"\n                            </a>\n                            "+(null==(__t=$.t("label.community.profile.on"))?"":__t)+" "+(null==(__t=e.created)?"":__t)+"\n                        </span>\n                    </h4>\n                </div>\n                ","question"===e.contentType&&0===e.totalChildren&&(__p+='\n                    <a href="'+(null==(__t=e.referenceUrl)?"":__t)+'" class="summary" itemprop="url" rel="self bookmark">\n                        <span class="upc-status unanswered">'+(null==(__t=$.t("label.community.wall.unanswered.question"))?"":__t)+"</span>\n                    </a>\n                "),__p+="\n                ",e.videoId&&e.videoType?__p+="\n                    "+(null==(__t=e.upcVideo)?"":__t)+"\n                ":e.imageUrl&&(__p+="\n                    "+(null==(__t=e.upcImage)?"":__t)+"\n                "),__p+="\n                ","review"===e.contentType&&(__p+='\n                    <div class="profile-post-rating rating">\n                        <span class="rating-value rating-'+(null==(__t=e.starRating)?"":__t)+'" itemprop="ratingValue">'+(null==(__t=e.starRating)?"":__t)+'</span>\n                        <span class="rating-best">5</span>\n                    </div>\n                '),__p+='\n                <h4 class="profile-post-text-title">\n                    <a href="'+(null==(__t=e.referenceUrlAtg)?"":__t)+'" class="summary" itemprop="url" rel="self bookmark">\n                        ',e.title&&(__p+=null==(__t=e.title)?"":__t),__p+="\n                    </a>\n                </h4>\n                ","review"===e.contentType&&(__p+="\n                    ",e.familiarity&&(__p+='\n                        <h5 class="profile-post-review-details">\n                            <span class="review-list-familiarity-title">'+(null==(__t=$.t("label.community.wall.familiarity"))?"":__t)+"</span>\n                            "+(null==(__t=e.familiarity)?"":__t)+"\n                        </h5>\n                    "),__p+="\n                    ",e.gender&&(__p+='\n                        <h5 class="profile-post-review-details">\n                            <span class="review-list-gender-title">'+(null==(__t=$.t("label.community.wall.gender"))?"":__t)+"</span>\n                            "+(null==(__t=e.gender)?"":__t)+"\n                        </h5>\n                    "),__p+="\n                    ",e.sizeFit&&(__p+='\n                        <h5 class="profile-post-review-details">\n                            <span class="review-list-familiarity-title">'+(null==(__t=$.t("label.community.wall.size.fit"))?"":__t)+"</span>\n                            "+(null==(__t=e.sizeFit)?"":__t)+"\n                        </h5>\n                    "),__p+="\n                    ",_(e.fitData).isEmpty()||(__p+='\n                        <div class="fit-data-wrap">\n                            ',(e.fitData.heightFeet||e.fitData.heightInches)&&(__p+='\n                                <div class="fit-data-single-wrap">\n                                    <span class="fit-data-label">'+(null==(__t=$.t("label.community.fit.data.height"))?"":__t)+": </span>\n                                    ",e.fitData.heightFeet&&(__p+='\n                                        <span class="fit-data-feet">'+(null==(__t=e.fitData.heightFeet)?"":__t)+"&#39;</span>\n                                    "),__p+="\n                                    ",e.fitData.heightInches&&(__p+='\n                                        <span class="fit-data-inches">'+(null==(__t=e.fitData.heightInches)?"":__t)+'</span>"\n                                    '),__p+="\n                                </div>\n                            "),__p+="\n                            ",e.fitData.weightLbs&&(__p+='\n                                <div class="fit-data-single-wrap">\n                                  <span class="fit-data-label">'+(null==(__t=$.t("label.pdp.tech.weight"))?"":__t)+": </span>"+(null==(__t=e.fitData.weightLbs)?"":__t)+" lbs\n                                </div>\n                            "),__p+="\n                            ",e.fitData.sizePurchased&&(__p+='\n                                <div class="fit-data-single-wrap size-purchased">\n                                  <span class="fit-data-label">'+(null==(__t=$.t("label.community.fit.data.size"))?"":__t)+": </span>"+(null==(__t=e.fitData.sizePurchased)?"":__t)+"\n                                </div>\n                            "),__p+="\n                        </div>\n                    "),__p+="\n                "),__p+='\n                <div class="profile-post-text">\n                    ';var o=e.descriptionFormatted||e.description;__p+='\n                    <p itemprop="'+(null==(__t=e.contentType)?"":__t)+'Body">'+(null==(__t=o)?"":__t)+'</p>\n                </div>\n                <div class="product-listing">\n                    <a href="'+(null==(__t=e.referenceUrl)?"":__t)+'" class="summary" rel="self bookmark" itemprop="url">\n                        <div class="product-listing-image-wrap">\n                            <img class="product-listing-image" itemprop="image" src="'+(null==(__t=e.referenceImage)?"":__t)+'" alt="'+(null==(__t=e.referenceTitle)?"":__t)+'" data-medium-img="'+(null==(__t=e.referenceImage)?"":__t)+'" />\n                        </div>\n                        <h4 itemprop="name" class="product-listing-title">\n                            '+(null==(__t=e.brandName)?"":__t)+" "+(null==(__t=e.referenceTitle)?"":__t)+'\n                        </h4>\n                    </a>\n                </div>\n                <div class="helpful-vote-wrapper vote">\n                    <a class="helpful-vote-btn pre_yes"></a>\n                    <p class="helpful-vote-text js-helpful-vote-count">('+(null==(__t=e.votes)?"":__t)+')</p>\n                </div>\n\n                <div class="profile-post-upc-menu">\n                    <div class="profile-post-upc-menu-icon js-profile-menu-icon">&nbsp;</div>\n                    <ul class="profile-post-upc-tools js-profile-tools">\n                        ',
__p+=isNewContent?'\n                            <li class="edit js-profile-tools-edit">\n                                <a><span class="flag-text">'+(null==(__t=$.t("label.community.wall.tweak.this"))?"":__t)+'</span></a>\n                            </li>\n                            <li class="delete js-profile-tools-delete">\n                                <a><span class="flag-text">'+(null==(__t=$.t("label.community.delete.this"))?"":__t)+"</span></a>\n                            </li>\n                        ":'\n                            <li class="flag js-profile-tools-flag">\n                                <a><span class="flag-text">'+(null==(__t=$.t("label.community.flag.this"))?"":__t)+"</span></a>\n                            </li>\n                        ",__p+='\n                    </ul>\n                    <p class="qa-content-edit"></p>\n                </div>\n            </section>\n        </article>\n        <section class="profile-post-comments">\n            <p>\n                ',__p+=e.totalChildren?'\n                    <a href="${upcUrl}" class="summary" itemprop="url" rel="self bookmark">\n                        '+(null==(__t=e.totalChildren)?"":__t)+" "+(null==(__t=n)?"":__t)+"\n                    </a>\n                ":"\n                    "+(null==(__t=e.totalChildren)?"":__t)+" "+(null==(__t=n)?"":__t)+"\n                ",__p+="\n            </p>\n        </section>\n\n    "}__p+="\n    </div>\n"}),__p+="\n";return __p}},341:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<section class="profile-post-avatar" itemprop="author" itemscope itemtype="http://schema.org/Person">\n    <div class="user-photo-wrapper">\n        <img ',lazyLoad&&(__p+="data-"),__p+='src="'+(null==(__t=content.user.imageUrl)?"":__t)+'" alt="'+(null==(__t=content.user.displayName)?"":__t)+'" data-username="'+(null==(__t=content.user.displayName)?"":__t)+'" data-userid="'+(null==(__t=content.user.userId)?"":__t)+'" class="photo js-lazyload js-miniprofile-hook" itemprop="image" />\n    </div>\n</section>\n';return __p}},342:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<article class="js-child-solicit upc-child-solicitations"\n    data-question-id="'+(null==(__t=contentId)?"":__t)+'"\n    data-success-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n    data-error-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n    data-question-url="'+(null==(__t=contentUrl)?"":__t)+'"\n    data-product-id="'+(null==(__t=productId)?"":__t)+'">\n       \n    <form id="answerf" name="answerf" enctype="multipart/form-data" action="'+(null==(__t=contentUrl)?"":__t)+'" method="post" class="add-upc-reply collapsed wall-interaction '+(null==(__t=formClass)?"":__t)+'">\n        <h3 class="secondary-form-header">'+(null==(__t=$.t("label.community.wall.answer.heading",userDisplayName))?"":__t)+'</h3>\n\n        <div class="textarea-wrapper">\n            <div class="inner">\n                <textarea id="upc-content" class="cta"></textarea>\n            </div>\n        </div>\n    \n        <div class="faux-label add-media">\n            <span class="inline-label label-text">\n                '+(null==(__t=$.t("label.community.wall.add.photo"))?"":__t)+'\n                <em class="optional-text">'+(null==(__t=$.t("label.community.wall.optional"))?"":__t)+'</em>\n            </span>\n            <div class="faux-col">\n                <span class="label-text label-media-upload">'+(null==(__t=$.t("label.community.wall.from.computer"))?"":__t)+'</span>\n                <input type="file" name="uploadMedia" id="upload-photo"/>\n                <span class="label-text label-remote-content">'+(null==(__t=$.t("label.community.wall.from.website"))?"":__t)+'</span>\n                <input type="text" id="hotlink-photo" placeholder="http://"/>\n            </div>\n        </div>\n  \n        <div class="button-row">\n            <a class="btn primary submit-upc-reply js-create-submit submit-answer-btn">'+(null==(__t=$.t("label.community.wall.post.answer"))?"":__t)+"</a>\n        </div>\n    </form>\n</article>";return __p}},343:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<article class="js-child-solicit upc-child-solicitations" \n    data-comment-content-id="'+(null==(__t=contentId)?"":__t)+'"\n    data-success-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n    data-error-url="'+(null==(__t=redirectUrl)?"":__t)+'"\n    data-product-id="'+(null==(__t=productId)?"":__t)+'">\n\n    <form id="commentf" name="commentf" enctype="multipart/form-data" \n        action="'+(null==(__t=contentUrl)?"":__t)+'" method="post" \n        class="add-upc-reply collapsed wall-interaction '+(null==(__t=formClass)?"":__t)+'">\n  \n        <h3 class="secondary-form-header">\n            <bc:message key="label.comment.cta" param1="${userDisplayName}" param2="${contentType}"/>\n            '+(null==(__t=$.t("label.community.wall.comment.on",userDisplayName,contentType))?"":__t)+'\n        </h3>\n        <div class="textarea-wrapper">\n            <div class="inner">\n                <textarea id="upc-content" class="cta"></textarea>\n            </div>\n        </div>\n  \n        <div class="button-row">\n            <a class="btn primary submit-upc-reply js-create-submit submit-comment-btn">'+(null==(__t=$.t("label.community.wall.post.comment"))?"":__t)+"</a>\n        </div>\n    </form>\n</article>";return __p}},344:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.each(children,function(e){if(__p+='\n  <article class="upc-child user-content-child '+(null==(__t=e.contentType)?"":__t)+" ",e.isFlagged&&(__p+=" flagged-"+(null==(__t=e.contentType)?"":__t)+" flagged-child"),__p+='"\n    data-'+(null==(__t=e.contentType)?"":__t)+'_id="'+(null==(__t=e.contentId)?"":__t)+'"\n    data-body="'+(null==(__t=e.description)?"":__t)+'"\n    data-description="'+(null==(__t=e.description)?"":__t)+'"\n    data-flagged="',e.isFlagged&&(__p+=null==(__t=e.isFlagged)?"":__t),__p+='"\n    data-show_flagged="',__p+=e.isFlagged?" false ":" true ",__p+='"\n    data-user-display_name="'+(null==(__t=e.user.displayName)?"":__t)+'"\n    data-user-id="'+(null==(__t=e.user.userId)?"":__t)+'"\n    data-user-url="'+(null==(__t=e.user.profileUrl)?"":__t)+'"\n    data-user-employee="'+(null==(__t=e.user.employeeStatus)?"":__t)+'">\n\n    ',e.isFlagged)__p+='\n      <section class="user-content-child '+(null==(__t=e.contentType)?"":__t)+' flagged" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n        <h3 class="flagged-messaging">\n          <a href="#'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n            '+(null==(__t=$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason))?"":__t)+"\n          </a>\n        </h3>\n      </section>\n    ";else{__p+='\n      <section class="user-content-child '+(null==(__t=e.contentType)?"":__t)+" js-"+(null==(__t=e.contentType)?"":__t)+'" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'"\n        itemprop="'+(null==(__t=e.contentType)?"":__t)+'" itemscope itemtype="http://schema.org/UserComments">\n        <section class="upc-content">\n          <span class="upc-type"></span>\n          ',isMobile||(__p+="\n            ",e.bestAnswer&&(__p+='\n              <span class="user-content__best-answer user-content__status" data-answer_id="'+(null==(__t=e.contentId)?"":__t)+'">'+(null==(__t=$.t("label.community.wall.best.answer"))?"":__t)+"</span>\n            "),__p+="\n          "),__p+="\n\n          ","competitivecyclist"===siteCode?__p+='\n            <section class="upc-head">\n              '+(null==(__t=e.userVCard)?"":__t)+'\n              <span class="user-content__byline mouse" itemprop="datePublished">\n                '+(null==(__t=$.t("label.community.wall.posted.on"))?"":__t)+' <time datetime="'+(null==(__t=e.created)?"":__t)+'">'+(null==(__t=e.created)?"":__t)+"</time>\n              </span>\n            </section>\n          ":(__p+='\n            <span class="user-content__byline mouse" itemprop="datePublished">\n              <span class="user-content__type-label">\n                '+(null==(__t=e.contentType)?"":__t)+"\n              </span> \n\n              ","steepcheap"!==siteCode&&(__p+='\n              by <a href="{user.profileUrl}" class="user-content__byline-name qa-review-user-name" itemprop="url">'+(null==(__t=e.user.displayName)?"":__t)+"</a>\n              "),__p+='\n               on \n              <time datetime="'+(null==(__t=e.created)?"":__t)+'">\n                '+(null==(__t=e.created)?"":__t)+"\n              </time>\n            </span>\n          "),__p+="\n\n          ";var t=e.descriptionFormatted||e.description;__p+='\n          <p class="user-content__body description" itemprop="'+(null==(__t=e.contentType)?"":__t)+'Text">'+(null==(__t=t)?"":__t)+"</p>\n          ",e.imageUrl&&(__p+='\n            <a class="js-highslide" id="photo-'+(null==(__t=e.contentId)?"":__t)+'" href="'+(null==(__t=e.imageUrl)?"":__t)+'">\n              <img data-src="'+(null==(__t=e.imageUrl)?"":__t)+'" class="js-community-lazyload cpi upc-reply-cpi" alt="'+(null==(__t=e.description)?"":__t)+'"/>\n            </a>\n          '),__p+="\n\n          ",showCommunityTools&&"competitivecyclist"===siteCode&&(__p+="\n            "+(null==(__t=e.upcTools)?"":__t)+"\n          "),__p+="\n\n        </section>\n\n        ","competitivecyclist"!==siteCode&&(__p+="\n          "+(null==(__t=e.userVCard)?"":__t)+"\n        "),__p+='\n\n        <section class="user-content__footer">\n          ',showCommunityTools&&"competitivecyclist"!==siteCode&&(__p+='\n            <article class="js-child-solicit user-content-child-solicit">\n              <span class="user-content__show-form-btn">\n                ',__p+=isMobile?"\n                  "+(null==(__t=$.t("community.answer.form.button.mobile"))?"":__t)+"\n                ":"\n                  "+(null==(__t=$.t("community.answer.form.button"))?"":__t)+"\n                ",__p+="\n              </span>\n            </article>\n            "+(null==(__t=e.upcTools)?"":__t)+"\n          "),__p+="\n        </section>\n      </section>\n    "}__p+="\n  </article>\n"}),__p+="\n";return __p}},345:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.each(wallData,function(e){if(e.imageUrl){var t=lazyLoad?" js-community-lazyload":"",i=lazyLoad?"data-":"";e.upcImage='<a class="js-highslide" id="photo-'+e.contentId+'" href="'+e.imageUrl+'"><img '+i+'src="'+e.imageUrl+'" class="cpi upc-cpi'+t+' user-content__image" alt="'+e.title+'"/></a>'}if(__p+="\n\n  ","productImage"===e.contentType&&(e.contentType="photo"),__p+="\n\n  ",e.videoId&&e.videoType&&(e.upcVideo=e.upcVideo||"",e.upcVideo+='<div class="user-content__video-wrapper">',"youtube"===e.videoType?e.upcVideo+='<iframe itemprop="video" class="video-youtube" src="//www.youtube.com/embed/'+e.videoId+'?rel=0&amp;wmode=opaque" frameborder="0"  allowfullscreen></iframe>':"vimeo"===e.videoType&&(e.upcVideo+='<iframe itemprop="video" class="video-vimeo" src="//player.vimeo.com/video/'+e.videoId+'" frameborder="0"></iframe>'),e.upcVideo+="</div>"),__p+='\n\n  <article class="js-pdp-wall-masonry-item user-content-thread upc '+(null==(__t=e.contentType)?"":__t)+"\n    ",e.isFlagged&&(__p+=" flagged-"+(null==(__t=e.contentType)?"":__t)+" flagged-parent"),__p+="\n    ","question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+='"\n    data-'+(null==(__t=e.contentType)?"":__t)+'_id="'+(null==(__t=e.contentId)?"":__t)+'"\n    ',"photo"===e.contentType&&(__p+='data-cpi_id="'+(null==(__t=e.contentId)?"":__t)+'"'),__p+='\n    data-title="',e.title&&(__p+=null==(__t=e.title)?"":__t),__p+='"\n    data-gender="',e.gender&&(__p+=null==(__t=e.gender)?"":__t),__p+='"\n    data-familiarity="',e.familiarity&&(__p+=null==(__t=e.familiarity)?"":__t),__p+='"\n    data-size_fit="',e.sizeFit&&(__p+=null==(__t=e.sizeFit)?"":__t),__p+='"\n    data-description="',e.description&&(__p+=null==(__t=e.description)?"":__t),__p+='"\n    data-fit-height-ft="',e.fitData&&e.fitData.heightFeet&&(__p+=null==(__t=e.fitData.heightFeet)?"":__t),__p+='"\n    data-fit-height-in="',e.fitData&&e.fitData.heightInches&&(__p+=null==(__t=e.fitData.heightInches)?"":__t),__p+='"\n    data-fit-size-purchased="',e.fitData&&e.fitData.sizePurchased&&(__p+=null==(__t=e.fitData.sizePurchased)?"":__t),__p+='"\n    data-fit-weight="',e.fitData&&e.fitData.weightLbs&&(__p+=null==(__t=e.fitData.weightLbs)?"":__t),__p+='"\n    data-flagged="',e.isFlagged&&(__p+=null==(__t=e.isFlagged)?"":__t),__p+='"\n    data-has_image="',e.hasImage&&(__p+=null==(__t=e.hasImage)?"":__t),__p+='"\n    data-image_url_small="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n    data-image_url_medium="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n    data-image_url_large="',e.imageUrl&&(__p+=null==(__t=e.imageUrl)?"":__t),__p+='"\n    data-is_gearhead="',e.user&&e.user.isGearhead&&(__p+=null==(__t=e.user.isGearhead)?"":__t),__p+='"\n    data-video_id="',e.videoId&&(__p+=null==(__t=e.videoId)?"":__t),__p+='"\n    data-video_type="',e.videoType&&(__p+=null==(__t=e.videoType)?"":__t),__p+='"\n    data-rank="',e.starRating&&(__p+=null==(__t=e.starRating)?"":__t),__p+='"\n    data-user-display_name="',e.user.displayName&&(__p+=null==(__t=e.user.displayName)?"":__t),__p+='"\n    data-user-id="',e.user.userId&&(__p+=null==(__t=e.user.userId)?"":__t),__p+='"\n    data-user-url="',e.user.profileUrl&&(__p+=null==(__t=e.user.profileUrl)?"":__t),__p+='"\n    data-user-employee="',e.user.employeeStatus&&(__p+=null==(__t=e.user.employeeStatus)?"":__t),__p+='"\n    data-votes="',e.votes&&(__p+=null==(__t=e.votes)?"":__t),__p+='"\n    itemprop="',e.contentType&&(__p+=null==(__t=e.contentType)?"":__t),__p+='"\n    itemscope itemtype="http://schema.org/Review">\n\n  ',e.isFlagged)__p+='\n    <section class="upc-single '+(null==(__t=e.contentType)?"":__t)+' flagged" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n      <h3 class="flagged-messaging">\n        <a class="flagged-messaging-link" href="#'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n          '+(null==(__t=$.t("label.community.wall.flagged.message",e.contentType,e.flaggedReason))?"":__t)+"\n        </a>\n      </h3>\n    </section>\n  ";else{__p+='\n    <section class="upc-single user-content-'+(null==(__t=e.contentType)?"":__t)+" "+(null==(__t=e.contentType)?"":__t)+" ","question"===e.contentType&&0===e.totalChildren&&(__p+=" unanswered-question"),__p+='" id="'+(null==(__t=e.contentType)?"":__t)+"-"+(null==(__t=e.contentId)?"":__t)+'">\n      <section class="upc-content user-content js-user-content">\n\n        ',"question"===e.contentType&&0===e.totalChildren&&(__p+='\n          <span class="upc-status unanswered user-content__status">'+(null==(__t=$.t("label.community.wall.unanswered.question"))?"":__t)+"</span>\n        "),__p+='\n\n        <section class="upc-head">\n          ',"competitivecyclist"===siteCode?__p+="\n            "+(null==(__t=e.userVCard)?"":__t)+'\n            <span class="user-content__byline mouse" itemprop="datePublished">\n              '+(null==(__t=$.t("label.community.wall.posted.on"))?"":__t)+' <time datetime="'+(null==(__t=e.created)?"":__t)+'">'+(null==(__t=e.created)?"":__t)+"</time>\n            </span>\n          ":(__p+='\n            <span class="user-content__byline mouse" itemprop="datePublished">\n              <span class="user-content__type-label">\n                '+(null==(__t=e.contentType)?"":__t)+"\n              </span>\n\n              ","steepcheap"!==siteCode&&(__p+='\n              by <a href="'+(null==(__t=e.user.profileUrl)?"":__t)+'" class="user-content__byline-name qa-review-user-name" itemprop="url">'+(null==(__t=e.user.displayName)?"":__t)+"</a>\n              "),__p+='\n               on\n              <time datetime="'+(null==(__t=e.created)?"":__t)+'">'+(null==(__t=e.created)?"":__t)+"</time>\n            </span>\n          "),__p+="\n\n          ","competitivecyclist"!==siteCode&&(__p+="\n            ","review"===e.contentType&&(__p+='\n              <div class="user-content__rating">\n                <span class="rating-value-'+(null==(__t=e.starRating)?"":__t)+' user-content__rating-stars" itemprop="ratingValue"></span>\n              </div>\n            '),__p+="\n\n            ",e.title&&(__p+='\n              <h3 class="user-content__title upc-title" itemprop="name">'+(null==(__t=e.title)?"":__t)+"</h3>\n            "),__p+="\n\n            ","review"===e.contentType&&(__p+='\n              <ul class="product-review-details">\n                ',e.familiarity&&(__p+='\n                  <li class="product-review-details__item">\n                    <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.familiarity"))?"":__t)+'</span>\n                    <span class="product-review-details__item-description">'+(null==(__t=e.familiarity)?"":__t)+"</span>\n                  </li>\n                "),__p+="\n                ",e.sizeFit&&(__p+='\n                  <li class="product-review-details__item">\n                    <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.size.fit"))?"":__t)+'</span>\n                    <span class="product-review-details__item-description">'+(null==(__t=e.sizeFit)?"":__t)+"</span>\n                  </li>\n                "),__p+="\n                ",e.fitData&&e.fitData.sizePurchased&&(__p+='\n                  <li class="product-review-details__item">\n                    <span class="product-review-details__item-title">'+(null==(__t=$.t("community.product.info.size.purchased"))?"":__t)+' </span>\n                    <span class="product-review-details__item-description">'+(null==(__t=e.fitData.sizePurchased)?"":__t)+"</span>\n                  </li>\n                "),__p+="\n              </ul>\n            "),__p+="\n          "),__p+="\n        </section>\n\n        ",has("showstravaonproductwall")&&e.user.avgTimeRide&&(__p+='\n          <div class="review-list-item-strava">\n              <img src="/images/competitivecyclist/strava/strava-echelon.png" height="35px" width="35px"/>\n              <span class="review-list-strava-title">\n                  '+(null==(__t=$.t("community.strava.average.time.label"))?"":__t)+'\n              </span>\n              <span class="js-strava-dialog-link strava-dialog-link" data-content-id="'+(null==(__t=e.contentId)?"":__t)+'"> '+(null==(__t=e.user.avgTimeRide)?"":__t)+"\n                  "+(null==(__t=$.t("community.strava.average.time.range"))?"":__t)+'\n              </span>\n          </div>\n          <div class="strava-modal" id="strava-modal-'+(null==(__t=e.contentId)?"":__t)+'">\n              <div class="js-strava-close strava-modal-close" data-content-id="'+(null==(__t=e.contentId)?"":__t)+'">\n              </div>\n            <div class="strava-modal-content">\n                <ul>\n                    <li>\n                      <span>'+(null==(__t=$.t("community.strava.average.description"))?"":__t)+'</span>\n                    </li>\n                    <li>\n                        <a href="/strava" target="_blank">\n                          <img src="//content.backcountry.com/promo_upload/cc/promos/2015/strava/connect-with-strava.png"/>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n          </div>\n        '),__p+="\n\n        ","competitivecyclist"===siteCode&&(__p+="\n          ","review"===e.contentType&&(__p+='\n            <div class="user-content__rating">\n              <span class="rating-value-'+(null==(__t=e.starRating)?"":__t)+' user-content__rating-stars" itemprop="ratingValue"></span>\n            </div>\n          '),__p+="\n\n          ",e.title&&(__p+='\n            <h3 class="user-content__title upc-title" itemprop="name">'+(null==(__t=e.title)?"":__t)+"</h3>\n          "),__p+="\n\n          ","review"===e.contentType&&(__p+='\n            <ul class="product-review-details">\n              ',e.familiarity&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.familiarity"))?"":__t)+'</span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.familiarity)?"":__t)+"</span>\n                </li>\n              "),__p+="\n              ",e.sizeFit&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("label.community.wall.size.fit"))?"":__t)+'</span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.sizeFit)?"":__t)+"</span>\n                </li>\n              "),__p+="\n              ",e.fitData&&e.fitData.sizePurchased&&(__p+='\n                <li class="product-review-details__item">\n                  <span class="product-review-details__item-title">'+(null==(__t=$.t("community.product.info.size.purchased"))?"":__t)+' </span>\n                  <span class="product-review-details__item-description">'+(null==(__t=e.fitData.sizePurchased)?"":__t)+"</span>\n                </li>\n              "),__p+="\n            </ul>\n          "),__p+="\n        "),__p+="\n\n        ";var n=e.descriptionFormatted||e.description||"";__p+='\n        <p class="user-content__body description" itemprop="'+(null==(__t=e.contentType)?"":__t)+'Body">'+(null==(__t=n)?"":__t)+"</p>\n\n        ","video"!==e.contentType&&"photo"!==e.contentType&&(__p+="\n          ",e.videoId?__p+="\n            "+(null==(__t=e.upcVideo)?"":__t)+"\n          ":e.imageUrl&&(__p+="\n            "+(null==(__t=e.upcImage)?"":__t)+"\n          "),__p+="\n        "),__p+="\n      </section>\n\n      ","video"===e.contentType?__p+="\n        "+(null==(__t=e.upcVideo)?"":__t)+"\n      ":"photo"===e.contentType&&(__p+="\n        "+(null==(__t=e.upcImage)?"":__t)+"\n      "),__p+="\n\n      ","competitivecyclist"===siteCode?__p+="\n        "+(null==(__t=e.upcTools)?"":__t)+"\n      ":(__p+="\n        "+(null==(__t=e.userVCard)?"":__t)+'\n        <section class="user-content__footer js-user-content__footer">\n          ',e.solicitForm&&!isNewContent?__p+="\n            "+(null==(__t=e.solicitForm)?"":__t)+"\n          ":isNewContent&&(__p+='\n            <div class="content-solicit-placeholder"></div>\n          '),__p+="\n          "+(null==(__t=e.upcTools)?"":__t)+"\n        </section>\n      "),__p+="\n    </section>\n\n    ","competitivecyclist"===siteCode&&(__p+='\n      <section class="user-content__footer js-user-content__footer">\n        ',e.solicitForm&&!isNewContent?__p+="\n          "+(null==(__t=e.solicitForm)?"":__t)+"\n        ":isNewContent&&(__p+='\n          <div class="content-solicit-placeholder"></div>\n        '),__p+="\n      </section>\n    "),__p+='\n\n    <section class="upc-replies">\n      ',e.childrenHtml&&(__p+="\n        "+(null==(__t=e.childrenHtml)?"":__t)+"\n      "),__p+="\n    </section>\n\n  "}__p+="\n  </article>\n"}),__p+="\n";return __p}},346:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){if(showCommunityTools){if(__p+="\n  ",isMobile){if(__p+='\n    <ul class="upc-tools js-upc-tool-list">\n      ',isNewContent)__p+='\n        <li class="edit"><a>'+(null==(__t=$.t("label.edit"))?"":__t)+'</a></li>\n        <li class="delete"><a>'+(null==(__t=$.t("community.delete.wall.content"))?"":__t)+"</a></li>\n      ";else{__p+='\n        <li class="vote js-vote-wrap">\n          <a class="helpful-vote js-helpful-vote-link js-helpful-vote-link-mbl">\n            <span class="mbl-likes">'+(null==(__t=$.t("community.upc.tools.upvote.label.mobile"))?"":__t)+'</span>\n          </a>\n          <span class="js-mbl-capsule mbl-capsule">'+(null==(__t=content.votes)?"":__t)+"</span>\n        </li>\n        ";var flagType=content.isFlagged||content.unFlagBtn?"unflag":"flag";__p+='\n        <li class="'+(null==(__t=flagType)?"":__t)+' js-upc-mbl-flag js-flag-wrap">\n          <a class="js-flag-link flag-label">\n            <span>\n              ',__p+=content.unFlagBtn?" \n                "+(null==(__t=$.t("label.community.wall.unflag"))?"":__t)+"\n              ":"\n                "+(null==(__t=$.t("community.upc.tools.flag.label.mobile"))?"":__t)+"\n              ",__p+="\n            </span>\n          </a>\n        </li>\n      "}__p+="\n    </ul>\n  "}else __p+='\n    <div class="upc-tools">\n      <ul class="js-upc-tool-list">\n        ',isNewContent?__p+='\n          <li class="edit"><a>'+(null==(__t=$.t("label.edit"))?"":__t)+'</a></li>\n          <li class="delete"><a>'+(null==(__t=$.t("community.delete.wall.content"))?"":__t)+"</a></li>\n        ":(__p+='\n          <li class="vote js-vote-wrap">\n            <a class="helpful-vote pre_yes js-helpful-vote-link">\n              <span class="helpful-vote-label">'+(null==(__t=$.t("community.upc.tools.upvote.label"))?"":__t)+'</span>\n            </a>\n            <span class="js-num-votes num-votes">'+(null==(__t=content.votes)?"":__t)+"</span>\n          </li>\n          ",__p+=content.isFlagged||content.unFlagBtn?'\n            <li class="unflag js-flag-wrap"><a class="js-flag-link">'+(null==(__t=$.t("label.community.wall.unflag"))?"":__t)+"</a></li>\n          ":'\n            <li class="flag js-flag-wrap">\n              <a class="js-flag-link">\n                <span class="flag-label">\n                  '+(null==(__t=$.t("community.upc.tools.flag.label"))?"":__t)+"\n                </span>\n              </a>\n            </li>\n          ",__p+="\n        "),__p+="\n      </ul>\n    </div>\n  ";__p+="\n"}else __p+='\n  <div class="upc-tools empty"></div>\n';__p+="\n"}return __p}},347:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<section class="js-user-card user-card" itemprop="author" itemscope itemtype="http://schema.org/Person">\n  <span class="user-card__photo-wrapper">\n    <img ',lazyLoad&&(__p+="data-"),__p+='src="'+(null==(__t=content.user.imageUrl)?"":__t)+'" alt="'+(null==(__t=content.user.displayName)?"":__t)+'" data-username="'+(null==(__t=content.user.displayName)?"":__t)+'" data-userid="'+(null==(__t=content.user.userId)?"":__t)+'" class="user-card__photo js-community-lazyload" itemprop="image"/>\n  </span>\n\n  <span class="user-card__info">\n    ',showUserDetails?(__p+='\n      <a href="'+(null==(__t=content.user.profileUrl)?"":__t)+'" class="user-card__name" itemprop="url">'+(null==(__t=content.user.displayName)?"":__t)+'</a>\n      <span class="user-card__title">\n        ',"NOT_EMPLOYEE"!==content.user.employeeStatus?content.user.isGearhead?__p+='\n             <span class="js-gearhead-badge">'+(null==(__t=$.t("label.user.badge.gearhead"))?"":__t)+"</span>\n          ":content.user.isSponsored?__p+="\n             "+(null==(__t=$.t("label.user.badge.sponsored.athlete"))?"":__t)+"\n          ":content.user.isAthlete?__p+="\n             "+(null==(__t=$.t("label.user.badge.pro.athlete"))?"":__t)+"\n          ":"VENDOR_REP"===content.user.employeeStatus?__p+="\n             "+(null==(__t=$.t("label.user.badge.vendor.rep"))?"":__t)+"\n          ":"ALUMNI"===content.user.employeeStatus?__p+="\n             "+(null==(__t=$.t("label.user.badge.alumni"))?"":__t)+"\n          ":"EMPLOYEE"===content.user.employeeStatus&&(__p+="\n             "+(null==(__t=$.t("label.user.badge.employee"))?"":__t)+"\n          "):"NOT_EMPLOYEE"===content.user.employeeStatus&&(content.user.isSponsored?__p+="\n             "+(null==(__t=$.t("label.user.badge.sponsored.athlete"))?"":__t)+"\n          ":content.user.isAthlete&&(__p+="\n             "+(null==(__t=$.t("label.user.badge.pro.athlete"))?"":__t)+"\n          ")),__p+="\n      </span>\n    "):__p+='\n      <span class="user-card__name" itemprop="url">'+(null==(__t=content.user.displayName)?"":__t)+"</span>\n    ",__p+='\n  </span>\n\n  <span class="user-card__height">\n    ',content.fitData&&content.fitData.heightFeet&&(__p+='\n      <span class="user-card__height-title">'+(null==(__t=$.t("community.user.info.height.label"))?"":__t)+'</span>\n      <span class="user-card__height-value">'+(null==(__t=content.fitData.heightFeet)?"":__t)+"' ",content.fitData.heightInches&&(__p+=(null==(__t=content.fitData.heightInches)?"":__t)+'"'),__p+="</span>\n    "),__p+='\n  </span>\n  <span class="user-card__weight">\n    ',content.fitData&&content.fitData.weightLbs&&(__p+='\n      <span class="user-card__weight-title">'+(null==(__t=$.t("community.user.info.weight.label"))?"":__t)+'</span>\n      <span class="user-card__weight-value">'+(null==(__t=content.fitData.weightLbs)?"":__t)+(null==(__t=$.t("community.user.info.weight.units"))?"":__t)+"</span>\n    "),__p+="\n  </span>\n</section>\n";return __p}},348:function(e,t,i){var n;n=function(e){var t=i(22),n=i(371),o=i(370),a=i(369),l=i(372),s=i(220),r=i(285),c=i(387),d=i(384),p=i(381),u=i(390),m=i(228),h=i(265),f=i(289),g=i(288),v=i(287),y=i(290),w=i(139),b=i(237),C=i(221);i(126),i(76),i(395),i(397),i(27),i(311),i(239),i(230),i(231),i(240),i(299),i(300);var T=t.extend({_selectors:{authModal:"#auth",childSolicitForms:".js-child-solicit",egxEmailBtn:"#wall-content .js-expert-gearhead-email",egxPhoneBtn:"#wall-content .js-expert-gearhead-phone",profile_body:".js-profile-body",termsAndConditionsDialog:"#terms-and-conditions",topOfTheWall:"#wall-content .wall-prelude",videoSelector:".js-video-frame",wall:"#the-wall",wallContent:"#wall-content",wallContent_v3:".js-pdp-wall-items-wrap",wallNavigation:"#the-wall-navigation",wallSolicits:"#wall-solicitations",wishlist_body:".js-wishlist-body"},initialize:function(){var e=this;e._reviewCollection=new n,e._questionCollection=new o,e._photoCollection=new a,e._videoCollection=new l,e._commentCollection=new s,e._answerCollection=new r,e._isFirstOmnitureCall=!0,e._doFilterAjaxCall=!0,$(".js-highslide").highslide({dialogClass:"ui-highslide ui-comm-wall-highslide"}),$.subscribe("load.navigation",e._initNavigation,e),e._dynamicallyAddNewContent()},_pdpInitialize:function(){var e={solicitationForm:"#solicitation-form-section",solicitVideo:"#solicit-video"},t={filterWallContent:!1};$(e.solicitationForm).communityform({filterWallContent:t.filterWallContent});var i=function(){var e=!0,t=null;try{t=$("<input>",{type:"file"}).css({display:"none"}),$("body").append(t),t.is(":disabled")&&(e=!1)}catch(i){e=!1}finally{t&&t.remove()}return e}();i||$(e.solicitVideo).hide()},ready:function(){var e,t,i,n,o,a=this,l={"#the-wall-navigation a.all":"article.upc","#the-wall-navigation a.photo":"article.photo","#the-wall-navigation a.question":"article.question","#the-wall-navigation a.review":"article.review","#the-wall-navigation a.video":"article.video"};a.pdpMasonryLoaded=$(a._elements.wallContent_v3).hasClass("masonry"),BC.page&&(a._isProfilePage="profile"===BC.page.id,a._isApiWall=has("communityapiproductwall")&&"pdp"===BC.page.id||has("apiprofilepage")&&a._isProfilePage),
a.profileName=$("#profile").data("display-name"),a.$allContributionsWrap=a._isApiWall?$(".js-load-more-btn-wrap"):$(".js-view-all-contributions-wrap"),a._bindEvents(),a._initLazyLoad(),a._elements.authModal.authModal(),a._initLoadMoreBtn(!0),a._pdpInitialize(),a._isApiWall||1!==a.totalPages||a.$allContributionsWrap.remove(),a._isApiWall||"bcs"!==BC.site.code||(l["#the-wall-navigation a.unanswered"]="article.unanswered-question",l["#the-wall-navigation a.unanswered"]="article.unanswered-question",l["#the-wall-navigation a.fit-runs-small"]='article[data-size_fit="1"]',l["#the-wall-navigation a.fit-true-to-size"]='article[data-size_fit="2"]',l["#the-wall-navigation a.fit-runs-large"]='article[data-size_fit="3"]'),a._isApiWall||a._elements.wallContent.tabnavigate({buttonMap:l}),a._isApiWall&&!has("communityfitdata")&&"competitivecyclist"===BC.site.code&&a._bindSummaryBoxEvents(),i=a._elements.wallSolicits.find(".solicit-question"),n=a._elements.wallSolicits.find(".solicit-review"),t=a._elements.wallSolicits.find(".solicit-photo"),o=a._elements.wallSolicits.find(".solicit-video"),a.createQuestionView=new d({el:i,model:new g(i.data())}),a.createReviewView=new c({el:n,model:new f(n.data())}),a.createPhotoView=new p({el:t,model:new v(t.data())}),a.createVideoView=new u({el:o,model:new y(o.data())}),a._elements.childSolicitForms.each(a._initChildSolicit),a._elements.termsAndConditionsDialog.dialog({showCloseButton:!1,open:function(){$(this).parent().promise().done(function(){$(this).scrollTop(0)})}}),BC.data&&BC.data.newItemId&&(e=$("#"+BC.data.newItemId),e.length&&$("html, body").animate({scrollTop:$("#"+BC.data.newItemId).offset().top-10},1e3)),$.subscribe("load.summarybox",function(){a._bindSummaryBoxEvents(),a._setSummaryBoxInactiveLinks(),a.specificContent={},a._handleSpecificContentParam()},a),$.publish("wall-section-loaded"),"undefined"!=typeof performance&&_.isFunction(performance.mark)&&performance.mark("header-loaded")},_bindEvents:function(){var e=this,t=e._elements.topOfTheWall;t.length||(t=e._elements.wallContent),$.subscribe("sync-no-reload-start",_.bind(e._initLoadingIndicator,e,t)),$.subscribe("sync-no-reload-complete",_.bind(e._clearLoadingIndicator,e,t)),e._bindStravaModalEvents(),e._isProfilePage||e._bindEgxButtonsTracking()},_bindEgxButtonsTracking:function(){var e=$(document),t=BC&&BC.product&&BC.product.id;e.on("click",this._selectors.egxEmailBtn,function(){$.publish("ScGHPDPContactInformationEmailClick.sitecatalystutil",{action:"EGH email button click",prodId:t})}),e.on("click",this._selectors.egxPhoneBtn,function(){$.publish("ScGHPDPContactInformationCallClick.sitecatalystutil",{action:"EGH phone button click",prodId:t})})},_bindStravaModalEvents:function(){$(".js-strava-dialog-link").each(function(){$(this).click(function(){var e=$(this).attr("data-content-id");$("#strava-modal-"+e).slideToggle("fast")})}),$(".js-strava-close").each(function(){$(this).click(function(){var e=$(this).attr("data-content-id");$("#strava-modal-"+e).slideUp("fast")})})},_bindProfileFilterEvents:function(){var e=this;$(".js-profile-nav a").click(function(t){var i=".upc",n=$(".js-profile-wall-masonry-container"),o=$(this).attr("data-type"),a=$("#wall-content");t.preventDefault(),has("profilewishlist")&&"wishlist"!==o&&(e._elements.profile_body.show(),e._elements.wishlist_body.hide()),e._isApiWall?(e._resetFilterParams(),"review"===o?(e.contentType=o,e.totalPages=e.allPageCounts.reviews):"photo"===o?(e.mediaType="image",e.totalPages=e.allPageCounts.imageItems):"video"===o?(e.mediaType=o,e.totalPages=e.allPageCounts.videoItems):"all-content"===o&&(e.totalPages=e.allPageCounts.everything),e._handleApiFilterContentTpl()):(a.find(i).removeClass("masonry-brick js-masonry-item js-profile-post-hidden").hide(),o&&"all-content"!==o&&(i+="."+o),i+=", .js-view-all-contributions-wrap",a.find(i).addClass("masonry-brick js-masonry-item js-profile-post-hidden").show(),n.masonry("reload"),$(".js-profile-wall-masonry-container").trigger("masonryLoaded"))})},_bindSelectMenuFilterEvents:function(){var e=this,t=$("#the-wall"),i=$(".summary-box"),n=$(".js-summary-chart"),o=i.find("a"),a=t.find("#sort_select"),l=$(".js-gh-recommend");a.selectmenu({change:function(){var t=$(this).val(),i=0;switch(o.removeClass("active"),e._sendOmnitureDropDownSummaryBoxAlert(),l.hide(),t){case"all-content":$(".community-filter-header").html($.t("label.community.summary.wall.intro")),e._isFirstOmnitureCall=!0,e._isApiWall&&(e._resetFilterParams(),e.contentType=has("communityproductwall32")?"review,productImage,video":e.contentType,e._handleApiFilterContentTpl()),l.show();break;case"only-reviews":e._isFirstOmnitureCall=!0,e._isApiWall?(e._doFilterAjaxCall&&(e._resetFilterParams(),e.contentType="review",e._handleApiFilterContentTpl()),n.find(".js-number a").each(function(){i+=$(this).data("quantity")}),e._setFilterTitle(i+" "+$.t("label.pdp.wall.filer.reviews"))):e._setFilterTitle($("article.upc.review").length+" "+$.t("label.pdp.wall.filer.reviews"));break;case"only-questions":$(".js-allquestions").trigger("click");break;case"only-unanswered":$(".js-unanswered").trigger("click");break;case"only-photos":$(".js-photos").trigger("click"),$(".js-community-lazyload").each(function(e,t){var i=$(t);i.attr("src",i.attr("data-src"))});break;case"only-videos":$(".js-videos").trigger("click");break;case"only-fit-runs-small":$(".js-fitsmall").trigger("click");break;case"only-fit-true-to-size":$(".js-fittruetosize").trigger("click");break;case"only-fit-runs-large":$(".js-fitlarge").trigger("click");break;case"only-fit-all":$(".js-fitall").trigger("click")}}})},_bindSummaryBoxEvents:function(){var e,t=this,i=$(".summary-box"),n=$("#content-types"),o=i.find("a"),a=n.find("#solicit-all"),l=i.find(".js-allquestions"),s=i.find(".js-fitall"),r=i.find(".js-fitlarge"),c=i.find(".js-fitsmall"),d=i.find(".js-fittruetosize"),p=($(".js-gh-recommend"),i.find(".js-photos")),u=n.find("#solicit-review"),_=i.find(".js-unanswered"),m=i.find(".js-videos"),h=$(".js-reviews-tab"),f=$(".js-questions-tab"),g=$("#show-all-link"),v=$(".js-summary-chart"),y=$("#the-wall"),w=($("#the-wall-navigation"),y.find("#sort_select"),""),b=0;e=function(e){var i="",n=-150;e.preventDefault(),t._sendOmnitureLinkSummaryBoxAlert(),t._resetFilterParams(),has("communityproductwall32")&&e.data.action&&t._resetFilterMenuStates(e.data.action),t.contentType=e.data.contentType||null,t.mediaType=e.data.mediaType||null,t.rankNumber=e.data.rankNumber||null,t.sizeFit=e.data.sizeFit||null,t._filterClickEvents(e.data.upcFilter,e.data.selectMenuValue),b=parseInt($(e.currentTarget).attr("data-quantity"),10),w=b>1?"s":"",i=t.rankNumber?$.t(e.data.msgKey,w,t.rankNumber):$.t(e.data.msgKey,w),t._setFilterTitle(b+" "+i),"bcs"===BC.site.code&&e.data.scroll&&"object"==typeof e.originalEvent&&$.scrollTo($(t._selectors.wallContent),500,{axis:"y",offset:{top:n}}),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","PDP Summary Box",e.data.tracking])},"competitivecyclist"===BC.site.code&&(l=n.find("#solicit-question"),p=n.find("#solicit-photo"),m=n.find("#solicit-video"),a.on("click",{msgKey:"label.community.summary.wall.intro",selectMenuValue:"",tracking:"All content",upcFilter:""},e),u.on("click",{contentType:"review",msgKey:"label.pdp.wall.filer.reviews",selectMenuValue:"",tracking:"All reviews",upcFilter:""},e)),l.on("click",{contentType:"question",msgKey:"label.community.summary.questions",scroll:!0,selectMenuValue:"only-questions",tracking:"All questions",upcFilter:".question"},e),r.on("click",{msgKey:"label.community.summary.reviewers.large",scroll:!0,selectMenuValue:"only-fit-runs-large",sizeFit:3,tracking:"Fit large",upcFilter:'[data-size_fit="3"]'},e),c.on("click",{msgKey:"label.community.summary.reviewers.small",scroll:!0,selectMenuValue:"only-fit-runs-small",sizeFit:1,tracking:"Fit small",upcFilter:'[data-size_fit="1"]'},e),d.on("click",{msgKey:"label.community.summary.reviewers.true.size",scroll:!0,selectMenuValue:"only-fit-true-to-size",sizeFit:2,tracking:"Fit true to size",upcFilter:'[data-size_fit="2"]'},e),s.on("click",{msgKey:"label.community.summary.review.all.fit",selectMenuValue:"only-fit-all",sizeFit:"1,2,3",tracking:"Fit all",upcFilter:""},e),p.on("click",{mediaType:"image",msgKey:"label.community.summary.photos",scroll:!0,selectMenuValue:"only-photos",tracking:"Photos",upcFilter:'.photo, .review[data-has_image="true"]'},e),_.on("click",{contentType:"unanswer",msgKey:"label.community.summary.unanswered.questions",scroll:!0,selectMenuValue:"only-unanswered",tracking:"Unanswered questions",upcFilter:".unanswered-question"},e),m.on("click",{mediaType:"video",msgKey:"label.community.summary.videos",scroll:!0,selectMenuValue:"only-videos",tracking:"Videos",upcFilter:'.video, .review[data-video_type="youtube"], .review[data-video_type="vimeo"]'},e),f.on("click",{contentType:"question",msgKey:"label.community.summary.questions",selectMenuValue:"only-questions",tracking:"All questions",upcFilter:".question",action:"q&aTab"},e),h.on("click",{contentType:"review,productImage,video",msgKey:"label.pdp.wall.filer.reviews",selectMenuValue:"all-content",tracking:"All content",upcFilter:"",action:"reviewTab"},e),v.find(".js-number a").on("click",function(i){var n=$(this).data("rank")||0;t._doFilterAjaxCall=!1,i.data={msgKey:"label.community.summary.reviewers.star.rating",rankNumber:n,selectMenuValue:"only-reviews",tracking:"Star rank "+n,upcFilter:'[data-rank="'+n+'"]'},e(i),t._doFilterAjaxCall=!0}),g.on("click",function(){$("#sort_select").selectmenu("value","all-content"),$(".community-filter-header").html($.t("label.community.summary.wall.intro")),$("#the-wall article.upc").removeClass("hidden")}),o.on("click",function(){o.removeClass("active"),$(this).addClass("active")}),t._bindSelectMenuFilterEvents(),$(".community-filter-header").on("click",".clear-filter",function(){$("#sort_select").selectmenu("value","all-content"),$(".community-filter-header").html($.t("label.community.summary.wall.intro")),$("#the-wall article.upc").removeClass("hidden")})},_clearLoadingIndicator:function(e){if(this.loadingIndicator){var t=e.data("bc-ajaxloader");clearTimeout(this.loadingIndicator),this._elements.wallContent.find(".ui-ajaxloader").remove(),t&&e.ajaxloader("destroy")}},_dynamicallyAddNewContent:function(){var e=this;$.subscribe("new-dynamically-added-content",function(t){var i="_"+t.contentType+"Collection",n=$(t.contentIdSelector).closest(t.contentClass);e[i].processElements(n)})},_filterClickEvents:function(e,t){var i=this,n=$("#the-wall article.upc"),o=$("#sort_select");"bcs"===BC.site.code?o.selectmenu("value",t):i._isFirstOmnitureCall=!1,!i._isApiWall||i._isFirstOmnitureCall&&!i.rankNumber?i._isApiWall||(n.addClass("hidden"),n.filter(e).removeClass("hidden")):i._handleApiFilterContentTpl(),i._isFirstOmnitureCall=!0},_getWallHtml:function(e){var t=this,i="";t._elements.wallContent.communitywall({isProfile:t._isProfilePage,lazyLoad:!1,wallData:e}),i=t._elements.wallContent.communitywall("returnHtml"),t._isProfilePage?($(".js-profile-empty-wrap").remove(),t._processWallContent(i),t.$showMoreLink.off("click"),t._initLoadMoreBtn(!1)):t._processWallContent(i,e.contents.length),t._elements.wallContent.communitywall("destroy")},_getWallJson:function(e){var t=this,i=t._isProfilePage?"/community/users/":"/community/product/",n="json",o={contentType:t.contentType?"&contentType="+t.contentType:"",mediaType:t.mediaType?"&mediaType="+t.mediaType:"",sizeFit:t.sizeFit?"&sizeFit="+t.sizeFit:"",starRating:t.rankNumber?"&starRating="+t.rankNumber:""},a=has("mobile")?"5":"20",l="8"===BC.site.id?"1":BC.site.id;i+=C.expand("{apiId}/wall?siteId={siteId}&pageSize={pageSize}&pageNumber={page}",{apiId:t._isProfilePage?t.profileId:t.productId,page:""+t.page,pageSize:a,siteId:l}),_(o).each(function(e){e&&(i+=e)}),$.ajax({dataType:n,timeout:5e3,url:i}).always(function(){t._clearLoadingIndicator(t._elements.wallContent)}).done(function(e){t._getWallHtml(e)}).fail(function(e,i,n){t.$showMoreLink.text($.t("wall.loading.err")),$.error("Error calling Community API in _getWallJson: "+n,"/common/controllers/wall.js")})},_handleApiFilterContentTpl:function(){var e=this;e.page=0,has("communityproductwall32")&&!e._isProfilePage?e._elements.wallContent.find(".upc, .error, .profile-empty-wrap").remove():e._elements.wallContent.find(".upc, .js-load-more-btn-wrap, .error, .profile-empty-wrap").remove(),e._initLoadingIndicator(e._elements.wallContent),e._getWallJson()},_handleLoadMoreContentJsp:function(e){var t=this,i={},n="/Store/community/include/productWallContent.jsp?"+(new Date).getTime();t._isProfilePage?"/community/include/profile/wallv1/wall":"",t._isProfilePage?"wallv1":"wall",e.preventDefault(),t.page++,i={page:t.page,productId:t.productId,profileId:t.profileId,showRemaining:!0,siteId:BC.site.id},t._isApiWall&&(n="/Store/community/include/apiProductWallContent.jsp",i.communityUserDisplayName=t.profileName,i.communityUserId=BC.profilePageId,i.communityUserImageUrl=BC.profilePageInfo.imageUrl,i.contentType=t.contentType,i.isLoadMore=!0,i.mediaType=t.mediaType,i.pageNumber=t.page,delete i.page),$.ajax({data:i,dataType:"text",url:n,beforeSend:function(){t.$showMoreLink.text($.t("wall.loading")).attr("disabled",!0)}}).done(function(e){t._processWallContent(e)}).fail(function(e,i,n){t.$showMoreLink.text($.t("wall.loading.err")),$.error("Error calling wall Load More service "+n,"/common/controllers/wall.js")}),t._isProfilePage&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CommunityTracking","Profile Page","Load More"])},_handleLoadMoreContentTpl:function(e){e.preventDefault(),has("communityproductwall32")&&!this._isProfilePage&&"competitivecyclist"!==BC.site.code&&(this.contentType=$(".js-reviews-tab").hasClass("active")?"review,productImage,video":"question"),this.page++,this._getWallJson()},_handleSpecificContentParam:function(){var e=location.search.match(/contentIdSocial=(([a-zA-Z]+)-atg\d+)/);e&&(this.specificContent.id="#"+e[1],this.specificContent.type=e[2]),"question"!==this.specificContent.type&&"answer"!==this.specificContent.type||$(".js-questions-tab").trigger("click")},_initChildSolicit:function(){var e,t=$(this);t.closest("article.upc").hasClass("question")?e=new h({el:t,model:new b(t.data())}):new m({el:t,model:new w(t.data())})},_initLazyLoad:function(e){var t=this;$(".wall-content").data("bc-lazyloader")?$(".wall-content").lazyloader("enqueue",$(".wall-content")):$(".wall-content").lazyloader({auto:!0,error:function(e,t){$(t.original).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABJJREFUeF4FwIEIAAAAAKD9qY8AAgABdDtSRwAAAABJRU5ErkJggg==").addClass("media-404")},proximity:200}),e?$(t._selectors.videoSelector).each(function(){var e=$(this),t=e.data("src");e.attr("src",t)}):$(t._selectors.wall).videoLazyloader({auto:!0,proximity:100,videoSelector:t._selectors.videoSelector})},_initLoadingIndicator:function(e){var t=this;t.loadingIndicator=setTimeout(function(){e.ajaxloader({inject:"appendTo",position:"static",size:"large",style:"dark"}).ajaxloader("show")},100)},_initLoadMoreBtn:function(e){var t=this,i=t._isApiWall?t._handleLoadMoreContentTpl:t._handleLoadMoreContentJsp;e&&(t.page=0,t.productId=BC.product&&BC.product.id,t.profileId=null,t.contentType="",t._isProfilePage?(t.totalPages=Math.ceil(BC.communityContentCount/20)-1,t.profileId=BC.profilePageId,t._bindProfileFilterEvents(),t._isApiWall&&$.subscribe("load.contentcounts",function(e){var n=e[0];t.allPageCounts={},_(n).each(function(e,i){t.allPageCounts[i]=Math.ceil(e/20)-1}),t.totalPages=t.allPageCounts.everything,t.totalPages?(t.$allContributionsWrap.show(),i=t._handleLoadMoreContentTpl):t.$allContributionsWrap.remove()})):t.totalPages=1),t.$showMoreLink=t._isApiWall?$(".js-load-more-btn"):$("#show-all-link"),t.$showMoreLink.on("click",function(e){i.call(t,e)})},_initNavigation:function(){$("#the-wall-navigation").makeselectmenu({selectMenuOptions:{positionOptions:{at:"left top",my:"left top"},width:has("mobile")?"250px":"158px"}})},_processWallContent:function(e,t){var i=this,n=$(e),o=has("mobile"),a=$(".js-profile-wall-masonry-container");has("communityproductwall32")&&!i._isProfilePage?(n.css("opacity",0),i._elements.wallContent_v3.append(n),i.pdpMasonryLoaded&&i._elements.wallContent_v3.masonry("reload"),n.animate({opacity:1},500),i.specificContent&&i.specificContent.id&&$("body").scrollTo(i.specificContent.id,{axis:"y",duration:"slow",offset:-100}),$.publish("wall-section-reloaded")):i._elements.wallContent.append(n),i._initLazyLoad(!0),$(window).triggerHandler("scroll"),i._reviewCollection.processElements(n.filter(i._reviewCollection.SELECTOR)),i._photoCollection.processElements(n.filter(i._photoCollection.SELECTOR)),i._questionCollection.processElements(n.filter(i._questionCollection.SELECTOR)),i._videoCollection.processElements(n.filter(i._videoCollection.SELECTOR)),i._commentCollection.processElements(n.find(i._commentCollection.SELECTOR)),i._answerCollection.processElements(n.find(i._answerCollection.SELECTOR)),n.find(i._selectors.childSolicitForms).each(i._initChildSolicit),i._isProfilePage&&i._isApiWall?($(".js-profile-empty-wrap").length&&(i.page=i.totalPages),i.page==i.totalPages?i.$allContributionsWrap.remove():(i.$allContributionsWrap.appendTo(i._elements.wallContent),i._isProfilePage&&!o&&i.$allContributionsWrap.addClass("js-profile-post-hidden profile-post-hidden")),i._isProfilePage&&(o?$(".js-profile-post-hidden").removeClass("js-profile-post-hidden profile-post-hidden"):a.masonry("reload").imagesLoaded(function(){a.masonry(),$(".js-profile-wall-masonry-container").trigger("masonryLoaded")})),i.$showMoreLink.text($.t("label.community.loadmore")).attr("disabled",!1)):has("communityproductwall32")?20!==t&&!o||5!==t&&o?i.$showMoreLink.hide():i.$showMoreLink.show():i._isApiWall?(i.$showMoreLink.remove(),i._initLoadMoreBtn(!1),o||$(".js-tooltip").tooltip({hover:!0}),$.publish("new-wall-content-loaded"),i._bindStravaModalEvents()):(i.page==i.totalPages?i.$showMoreLink.remove():i.$showMoreLink.parent().appendTo(i._elements.wallContent),i.$showMoreLink.text($.t("label.community.loadmore")).attr("disabled",!1))},_resetFilterMenuStates:function(e){var t=BC.fitdata,i=$("#the-wall-navigation");i.empty(),"q&aTab"===e?i.append('<a name="only-questions" href="#only-questions" class="question">'+$.t("label.wall.navigation.questions")+"</a>",'<a name="only-unanswered" href="#only-unanswered" class="unanswered">'+$.t("label.community.uaquestions.questions")+"</a>"):i.append('<a name="all-content" href="#all-content" class="all selected" data-type="all-content">'+$.t("label.wall.navigation.show.alls")+"</a>",'<a name="only-reviews" href="#only-reviews" class="review" data-type="review">'+$.t("label.wall.navigation.reviews")+"</a>",'<a name="only-photos" href="#only-photos" class="photo" data-type="photo">'+$.t("label.wall.navigation.photos")+"</a>",'<a name="only-videos" href="#only-videos" class="video" data-type="video">'+$.t("label.wall.navigation.videos")+"</a>",'<a name="only-fit-runs-small" href="#only-fit-runs-small" class="fit-runs-small">'+$.t("label.wall.navigation.runs.small")+"</a>",'<a name="only-fit-true-to-size" href="#only-fit-true-to-size" class="fit-true-to-size">'+$.t("label.wall.navigation.true.size")+"</a>",'<a name="only-fit-runs-large" href="#only-fit-runs-large" class="fit-runs-large">'+$.t("label.wall.navigation.runs.large")+"</a>",'<a name="only-fit-all" href="#only-fit-all" class="fit-all">'+$.t("label.community.summary.review.all.fit")+"</a>");var n={".fit-runs-large":t.fitLarge,".fit-runs-small":t.fitSmall,".fit-true-to-size":t.fitTrueToSize,".photo":t.imageItems,".question":t.allQuestions,".review":t.totalReviews,".unanswered":t.unansweredQuestions,".video":t.videoItems};_(n).each(function(e,t){e||i.find(t).remove()}),i.data("bc-makeselectmenu")&&i.makeselectmenu("destroy"),$("#the-wall-navigation").makeselectmenu({selectMenuOptions:{positionOptions:{my:"left top",at:"left top"},width:"158px"}}),this._bindSelectMenuFilterEvents()},_resetFilterParams:function(){this.contentType=null,this.mediaType=null,this.rankNumber=null,this.sizeFit=null},_sendOmnitureDropDownSummaryBoxAlert:function(){this._isFirstOmnitureCall&&BC.product&&$.publish("ScWallInteractions.sitecatalystutil",{events:"event371",evarValue:"filter-"+BC.product.id,action:"filter view interaction",prodId:BC.product.id}),this._isFirstOmnitureCall=!1},_sendOmnitureLinkSummaryBoxAlert:function(){this._isFirstOmnitureCall&&!has("pdpv3")&&$.publish("ScSummaryBoxClick.sitecatalystutil",{action:"Product Review Navigation"}),this._isFirstOmnitureCall=!1},_setFilterTitle:function(e){var t=$(".community-filter-header");e+=' <a class="clear-filter">'+$.t("label.community.summary.clear.filter")+"</a>",t.html(e)},_setSummaryBoxInactiveLinks:function(){var e=$("#summary-box"),t=[".js-one-star-rank",".js-two-star-rank",".js-three-star-rank",".js-four-star-rank",".js-five-star-rank",".js-allquestions",".js-unanswered",".js-photos",".js-videos"];_.each(t,function(t,i,n){var o=e.find(t);("0"===o.text()||o.text().indexOf("(0)")>0)&&(o.addClass("inactive"),o.off())})}});return T}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},352:function(e,t,i){var n,o;n=[i(5)],o=function(){$.widget("bc.charsLeft",{options:{maxChars:void 0,restrictInput:!0,showText:!1},_create:function(){var e=this;void 0===e.options.maxChars&&(e.options.maxChars=e.element.attr("maxlength"));var t=$.l("number",e.options.maxChars);e.options.showText&&(t=$.t("charsleft.max.chars",e.options.maxChars));var i=$("<span></span>").addClass("remaining-chars").html(t);e.element.after(i),e.options._charsLeftElement=i,e._on(e.element,{keyup:e._handleKeyUp})},_handleKeyUp:function(e){var t=this,i=t.element.val();t.options.restrictInput&&i.length>t.options.maxChars&&t.element.val(i.substring(0,t.options.maxChars));var n=t.options.maxChars-t.element.val().length;t.options.showText?t.options._charsLeftElement.html($.t("charsleft.remaining",$.l("number",n))):t.options._charsLeftElement.html($.l("number",n)),n>0?t.options._charsLeftElement.removeClass("highlighted"):t.options._charsLeftElement.hasClass("highlighted")||t.options._charsLeftElement.addClass("highlighted")}})}.apply(t,n),!(void 0!==o&&(e.exports=o))},369:function(e,t,i){var n,o;n=[i(120),i(287),i(383)],o=function(e,t,i){var n=e.extend({SELECTOR:".upc.photo",model:t,_valid:function(e){return null!=e.cpi_id},_modifyData:function(e){return e.contentId=e.cpi_id,delete e.cpi_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var n=new i({model:e,el:t});return n}});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},370:function(e,t,i){var n,o;n=[i(120),i(288),i(386)],o=function(e,t,i){var n=e.extend({SELECTOR:".upc.question",model:t,_valid:function(e){return!!e.question_id},_modifyData:function(e){return e.contentId=e.question_id,delete e.question_id,e},_buildModel:function(e){return new t(e)},_buildView:function(e,t){return new i({model:e,el:t})}});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},371:function(e,t,i){var n,o;n=[i(120),i(289),i(389)],o=function(e,t,i){var n=e.extend({SELECTOR:".upc.review",model:t,_valid:function(e){return null!=e.review_id},_modifyData:function(e){return e.contentId=e.review_id,delete e.review_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var n=new i({model:e,el:t});return n}});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},372:function(e,t,i){var n,o;n=[i(120),i(290),i(392)],o=function(e,t,i){var n=e.extend({SELECTOR:".upc.video",model:t,_valid:function(e){return null!=e.video_id},_modifyData:function(e){return e.contentId=e.video_id,delete e.video_id,e},_buildModel:function(e){var i=new t(e);return i},_buildView:function(e,t){var n=new i({model:e,el:t});return n}});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},379:function(e,t,i){var n,o;n=[i(122)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},380:function(e,t,i){var n,o;n=[i(123),i(379)],o=function(e,t){var i=e.extend({_CONTRIBUTION_TYPE:"answer",className:"answer",_editView:t,_TEMPLATE_CONTENT_EDIT:"#template-answer-edit",events:{"click .upc-child > .upc-tools .edit a":"editClick","click .upc-child > .upc-tools .delete a":"destroyClick","click .upc-child > .upc-tools .flag a":"flagClick","click .upc-child > .upc-tools .unflag a":"unflagClick","click .upc-child.flagged h3 a":"showFlagClick","click .upc-child + .upc-replies > .flag-upc .submit-upc-reply":"saveFlagClick","click .upc-child > .upc-mbl-tools .edit a":"editClick","click .upc-child > .upc-mbl-tools .delete a":"destroyClick"},constructor:function(){var t=this;t.events=$.extend({},e.prototype.events,t.events),e.prototype.constructor.apply(t,arguments)}});return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},381:function(e,t,i){var n,o;n=[i(88)],o=function(e){var t=e.extend({_inputElements:{title:"photo-title",description:"upc-content",photo:"upload-photo"},initialize:function(){var t=this;this._super(e,"initialize"),t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))})},_bindEvents:function(){var t=this;$.subscribe("photo-image-uploaded",function(e){t.newImageUpload=e.newImageUpload}),$.subscribe("photo-saved-success-create",function(i){t._buildSinglePhoto(i),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),$.subscribe("photo-save-error-create",function(i){var n='<p class="alert-block error js-photo-error-msg hidden">'+$.t("label.content.save.error","photo")+"</p>";t.$el.find(".js-photo-error-msg").remove(),$(n).prependTo(t.$el).slideDown(),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),t._super(e,"_bindEvents")},_buildSinglePhoto:function(t){var i,n,o=this,a=$("#wall-content"),l=a.find(".wall-prelude"),s=t.descriptionFormatted||t.description,r=a.find(".js-gh-recommend"),c={contents:[]};c.contents.push({contentId:t.id,contentType:"photo",created:$.formatDateTime("MM dd, yy",new Date),description:t.description,descriptionFormatted:s,hasImage:!(!t.imageUrl&&!o.newImageUpload),imageUrl:t.imageUrl||o.newImageUpload||null,isFlagged:!1,title:t.title,totalChildren:0,uploadedPhoto:t.uploadedPhoto,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},votes:0}),o.$el.communitywall({lazyLoad:!1,isNewContent:!0,wallData:c}),n=$(o.$el.communitywall("returnHtml")).hide(),has("communityproductwall32")?o._super(e,"addNewContentToWall",n):l.length?r.length?n.insertAfter(r).slideDown():n.insertAfter(l).slideDown():n.prependTo(a).slideDown(),i={contentClass:"article.upc.photo",contentId:t.id,contentIdSelector:"#photo-"+t.id,contentType:"photo"},$.publish("new-dynamically-added-content",i),$.publish("content.create.view.clearCommunityForm",{currentForm:"solicit-photo"}),o.newImageUpload="",o.$el.communitywall("destroy")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({title:t.$("#photo-title").val(),description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),userId:BC.profile.id},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},382:function(e,t,i){var n,o;n=[i(122)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",title:"photo-title"},_bindEvents:function(){var t=this;$.subscribe("photo-saved-success-update",function(e){$.unsubscribe("photo-saved-success-update"),t._handleEdit(e)}),t._super(e,"_bindEvents")},_handleEdit:function(t){var i,n="profile"===BC.page.id,o=this.$el.closest(".upc.photo"),a=o.find(".edit.photo-edit"),l=n?o.find(".js-profile-post-body"):o.find(".upc-single.photo"),s=n?".profile-post-text p":".description",r=t.descriptionFormatted||t.description,c=n?".profile-post-text-title a":".upc-title";a.remove(),l.find(c).text(t.title),l.find(s).html(r),l.show(),has("communityproductwall32")&&has("small")&&!n&&(this._super(e,"_updatePdpWallMasonry"),$("html, body").animate({scrollTop:this.offset().top-60})),n&&(i=$(".js-profile-wall-masonry-container"),i.masonry("reload").imagesLoaded(function(){i.masonry(),i.trigger("masonryLoaded")})),this.trigger("photo-in-place-edit",t)},handleFormSubmit:function(){var e=this;return e.model.save({description:e.$("#upc-content").val(),title:e.$("#photo-title").val()}),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},383:function(e,t,i){var n,o;n=[i(123),i(220),i(382)],o=function(e,t,i){var n=e.extend({_CONTRIBUTION_TYPE:"productImage",_CHILD_COLLECTION:t,_editView:i,className:"photo",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-productImage-edit"});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},384:function(e,t,i){var n,o;n=[i(88)],o=function(e){var t=e.extend({_inputElements:{description:"question-title",photo:"upload-photo",title:"question-title"},initialize:function(){var t=this;this._super(e,"initialize"),t.$(".js-photo-upload").change(function(){var e=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validatePhoto({files:t.$(".js-photo-upload")})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-photo").removeClass("active"))}),t.$(".js-video-upload").change(function(){var e=t.$(".js-video-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validateVideo({files:t.$(".js-video-upload")})?(t.$("#filetype-error").hide(),t.$("#input-video").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-video").removeClass("active"))})},_bindEvents:function(){var t=this;$.subscribe("question-saved-success-create",function(i){t._buildSingleQuestion(i),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),$.subscribe("question-save-error-create",function(i){var n='<p class="alert-block error js-question-error-msg hidden">'+$.t("label.content.save.error","question")+"</p>";t.$el.find(".js-question-error-msg").remove(),$(n).prependTo(t.$el).slideDown(),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),$.subscribe("question-image-uploaded",function(e){t.newImageUpload=e.newImageUpload}),t._super(e,"_bindEvents")},_buildSingleQuestion:function(t){var i,n,o=this,a=$("#wall-content"),l=a.find(".wall-prelude"),s=t.descriptionFormatted||t.description,r=a.find(".js-gh-recommend"),c={contents:[]};c.contents.push({contentId:t.id,contentType:"question",created:$.formatDateTime("MM dd, yy",new Date),description:t.description,descriptionFormatted:s,hasImage:!(!t.imageUrl&&!o.newImageUpload),imageUrl:t.imageUrl||o.newImageUpload||null,isFlagged:!1,totalChildren:0,uploadedPhoto:t.uploadedPhoto,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},videoId:t.videoId,videoType:t.videoType,votes:0}),o.$el.communitywall({isNewContent:!0,lazyLoad:!1,wallData:c}),i=$(o.$el.communitywall("returnHtml")).hide(),has("communityproductwall32")?o._super(e,"addNewContentToWall",i):l.length?r.length?i.insertAfter(r).slideDown():i.insertAfter(l).slideDown():i.prependTo(a).slideDown(),n={contentClass:"article.upc.question",contentId:t.id,contentIdSelector:"#question-"+t.id,contentType:"question"},$.publish("new-dynamically-added-content",n),$.publish("content.create.view.clearCommunityForm",{
currentForm:"solicit-question"}),o.newImageUpload="",o.$el.communitywall("destroy")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-video-upload").val()&&(e=t.$(".js-video-upload")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload")),t.model.save({description:t.$("#question-title").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),remoteVideoUrl:t.$("#hotlink-video").val(),title:t.$("#question-title").val(),userId:BC.profile.id},e),!1},_handleUploadMediaComplete:function(e){var t=this,i=e?e:$.t("video.uploading.err");t._formSubmitted=!1,this._addMediaHtml&&this.$(".add-media .faux-col").html(this._addMediaHtml),this.$("form").errorHandler("showErrors",JSON.stringify({summaryError:i}))}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},385:function(e,t,i){var n,o;n=[i(122)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",photo:"upload-photo"},_bindEvents:function(){var t=this;$.subscribe("question-saved-success-update",function(e){$.unsubscribe("question-saved-success-update"),t._handleEdit(e)}),$.subscribe("question-image-uploaded",function(e){t.newImageUpload=e.newImageUpload}),t._super(e,"_bindEvents")},_buildEditedQuestion:function(e,t,i,n){var o,a,l=this,s=e.descriptionFormatted||e.description,r=t?".js-profile-post-body":".upc-single",c={contents:[]};return o=e.imageUrl||l.newImageUpload||l.model.get("image_url_large")||null,o=i&&!o?null:o,c.contents.push({brandName:l.model.get("brand_name"),contentId:e.id,contentType:"question",created:$.formatDateTime("MM dd, yy",new Date),description:e.description,descriptionFormatted:s,hasImage:!!o,imageUrl:o,isFlagged:!1,referenceImage:l.model.get("product_image"),referenceTitle:l.model.get("product_title"),referenceUrl:l.model.get("product_url"),totalChildren:n||0,uploadedPhoto:e.uploadedPhoto,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},videoId:l.model.get("video_id"),videoType:l.model.get("video_type"),votes:l.model.get("votes")}),l.$el.communitywall({isNewContent:!0,isProfile:t,lazyLoad:!1,wallData:c}),a=$(l.$el.communitywall("returnHtml")).find(r).html(),l.$el.communitywall("destroy"),a},_handleEdit:function(e){var t,i,n,o,a="profile"===BC.page.id,l=this.$el.closest(".upc.question"),s=l.find(".edit.question"),r=a?l.find(".js-profile-post-body"):l.find(".upc-single.question"),c=this.model.get("deleteMediaFlag");s.remove(),o=this._buildEditedQuestion(e,a,c,n),o=this._buildEditedQuestion(e,a,c,n),has("communityproductwall32")&&!a?(n=this.$el.parents(".js-pdp-wall-masonry-item").find(".js-answer").length,i=$(o).filter(".js-user-content"),r.find(".js-user-content").html(i).end().show()):r.html(o).show(),a&&(t=$(".js-profile-wall-masonry-container"),t.masonry("reload").imagesLoaded(function(){t.masonry(),t.trigger("masonryLoaded")})),c&&(e.image_url_large="",e.image_url_medium="",e.image_url_small=""),this.trigger("question-in-place-edit",e)},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({description:t.$("#upc-content").val(),remoteMediaUrl:t.$("#hotlink-photo").val()},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},386:function(e,t,i){var n,o;n=[i(123),i(285),i(385)],o=function(e,t,i){var n=e.extend({_CONTRIBUTION_TYPE:"question",_CHILD_COLLECTION:t,_editView:i,className:"question",childClassName:"answer",_TEMPLATE_CONTENT_EDIT:"#template-question-edit"});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},387:function(e,t,i){var n,o;n=[i(88),i(240),i(251)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",gender:"review-gender",photo:"upload-photo",video:"upload-video",ranking:"star-rating",title:"review-title"},_selectors:{fitDataContainer:".js-fit-data-container",inputHeightFeet:"#input-height-ft",inputHeightInches:"#input-height",inputSizePurchased:"#input-size-purchased",inputWeight:"#input-weight",saveToProfileCheck:".js-save-to-profile-check"},initialize:function(){var t=this,i=t.$(".ratings");i.stars({inputType:"select",cancelShow:!1,captionEl:has("mobile")?null:$(".ratings-caption")}),i.stars("selectID",parseInt(this.model.get("rank"),10)-1),t._super(e,"initialize"),t.$("#review-gender").val(t.model.get("gender")),t.$("select.familiarity-select option").filter(":selected").val(),"steepandcheap"!=BC.site.code&&t.$("select.size-fit-select option").filter(":selected").val(),t.$(".js-photo-upload").change(function(e){var i=t.$(".js-photo-upload").val().replace("C:\\fakepath\\","");t.model.photoExtensionValid=t.model.photoSizeValid=!0,t.$("#file-upload-filename").text(i),t.model.validatePhoto({files:t.$(".js-photo-upload")})?t.model.validatePhotoSize({files:e.target.files})?(t.$("#filetype-error").hide(),t.$("#input-photo").addClass("active")):(t.model.photoSizeValid=!1,t.$("#filetype-error").text($.t("label.review.photo.file.size")).show(),t.$("#input-photo").removeClass("active")):(t.model.photoExtensionValid=!1,t.$("#filetype-error").text($.t("label.review.photo.file.type")).show(),t.$("#input-photo").removeClass("active"))}),t.$(".js-video-upload").change(function(){var e=t.$(".js-video-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validateVideo({files:t.$(".js-video-upload")})?(t.$("#filetype-error").hide(),t.$("#input-video").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-video").removeClass("active"))})},_bindEvents:function(){var t=this;"bcs"===BC.site.code&&$.subscribe("reviewStarClicked",function(){t._populateFitData()}),$.subscribe("review-saved-success-create",function(i){t._buildSingleReview(i),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),$.subscribe("review-save-error-create",function(i){var n='<p class="alert-block error js-review-error-msg hidden">'+$.t("label.content.save.error","review")+"</p>";t.$el.find(".js-review-error-msg").remove(),$(n).prependTo(t.$el).slideDown(),t._super(e,"_resetFormSubmitted"),t._super(e,"_enableSubmitBtn")}),$.subscribe("review-image-uploaded",function(e){t.newImageUpload=e.newImageUpload}),t._super(e,"_bindEvents")},_buildSingleReview:function(t){var i,n,o=this,a=$("#wall-content"),l=a.find(".wall-prelude"),s=t.descriptionFormatted||t.description,r=a.find(".js-gh-recommend"),c={contents:[]};c.contents.push({contentId:t.id,contentType:"review",created:$.formatDateTime("MM dd, yy",new Date),description:t.description,descriptionFormatted:s,familiarity:t.familiarity,fitData:t.fitData,hasImage:!(!t.imageUrl&&!o.newImageUpload),imageUrl:t.imageUrl||o.newImageUpload||null,isFlagged:!1,sizeFit:t.sizeFit,starRating:t.ranking,title:t.title,totalChildren:0,uploadedPhoto:t.uploadedPhoto,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},videoId:t.videoId,videoType:t.videoType,votes:0}),o.$el.communitywall({lazyLoad:!1,isNewContent:!0,wallData:c}),i=$(o.$el.communitywall("returnHtml")).hide(),has("communityproductwall32")?o._super(e,"addNewContentToWall",i):l.length?r.length?i.insertAfter(r).slideDown():i.insertAfter(l).slideDown():i.prependTo(a).slideDown(),n={contentClass:"article.upc.review",contentId:t.id,contentIdSelector:"#review-"+t.id,contentType:"review"},$.publish("new-dynamically-added-content",n),$.publish("content.create.view.clearCommunityForm",{currentForm:"solicit-review"}),o.newImageUpload="",o.$el.communitywall("destroy")},handleFormSubmit:function(){var e,t=this,i=0,n="",o="",a=0;return t.$("input:file").val()&&(e=t.$("input:file")),t.$(".js-video-upload").val()&&(e=t.$(".js-video-upload")),t.$(".js-photo-upload").val()&&(e=t.$(".js-photo-upload")),o=t.$("#review-gender").val(),i=t.$("select.familiarity-select option").filter(":selected").val()||i,"steepandcheap"!=BC.site.code&&(a=t.$("select.size-fit-select option").filter(":selected").val()||a),n=t._getFitData(),$.publish("ScSubmitReview.sitecatalystutil"),t.model.save({description:t.$("#upc-content").val(),familiarity:i,fitData:n,gender:o,ranking:t.$("#star-rating input:disabled").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),remoteVideoUrl:t.$("#hotlink-video").val(),sizeFit:a,title:t.$("#review-title").val(),userId:BC.profile.id},e),!1},_getFitData:function(){var e=!1;return fitData={},fitData.$fitDataContainer=this.$(this._selectors.fitDataContainer),fitData.units=fitData.$fitDataContainer.attr("data-current-units"),"english"===fitData.units&&(fitData.userHeightFt=fitData.$fitDataContainer.find(this._selectors.inputHeightFeet).val()),fitData.userHeight=fitData.$fitDataContainer.find(this._selectors.inputHeightInches).val(),fitData.userWeight=fitData.$fitDataContainer.find(this._selectors.inputWeight).val(),fitData.sizePurchased=fitData.$fitDataContainer.find(this._selectors.inputSizePurchased).val(),_(fitData).each(function(t,i){"units"!==i&&"$fitDataContainer"!==i&&t&&(e=!0)}),e&&(fitData.saveToProfile=fitData.$fitDataContainer.find(this._selectors.saveToProfileCheck).prop("checked")),this.model.buildFitData(fitData)},_fetchFitDataFromApi:function(e){$.ajax({dataType:"json",timeout:1e4,type:"GET",url:"/fitapi/fits/"+BC.profile.id}).done(function(t){e(t)}).fail(function(e,t,i){var n="Fit data AJAX request failed in _fetchFitDataFromApi";has("dev")?console.log(n+" in common/views/review/create.js"):$.error(n,"common/views/review/create.js")})},_populateFitData:function(){var e=this;e._fetchFitDataFromApi(function(t){t&&t.height&&t.weight&&(t.userHeight=t.height,t.userWeight=t.weight,t=e.model.convertFitDataToEnglish(t),e.$(e._selectors.inputHeightFeet).val(t.userHeightFt),e.$(e._selectors.inputHeightInches).val(t.userHeight),e.$(e._selectors.inputWeight).val(t.userWeight))})},_handleUploadMediaComplete:function(e){var t=this,i=e?e:$.t("video.uploading.err");t._formSubmitted=!1,this._addMediaHtml&&this.$(".add-media .faux-col").html(this._addMediaHtml),this.$("form").errorHandler("showErrors",JSON.stringify({summaryError:i}))}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},388:function(e,t,i){var n,o;n=[i(122),i(251)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",fitHeight:"input-height",fitHeightFeet:"input-height-ft",fitWeight:"input-weight",gender:"review-gender",photo:"upload-photo",ranking:"star-rating",title:"review-title"},_selectors:{fitDataContainer:".js-fit-data-edit-container",inputHeightFeet:"#input-height-ft",inputHeightInches:"#input-height",inputSizePurchased:"#input-size-purchased",inputWeight:"#input-weight"},initialize:function(){var t=this,i=t.$(".ratings");i.stars({cancelShow:!1,captionEl:t.$(".ratings-caption"),inputType:"select"}),i.stars("selectID",parseInt(t.model.get("rank"),10)-1),t._super(e,"initialize"),t._initSelectMenus(),t._initFitData()},_bindEvents:function(){var t=this;$.subscribe("review-saved-success-update",function(e){$.unsubscribe("review-saved-success-update"),t._handleEdit(e)}),$.subscribe("review-image-uploaded",function(e){t.newImageUpload=e.newImageUpload}),t._super(e,"_bindEvents")},_buildEditedReview:function(e,t){var i,n,o=this,a=e.descriptionFormatted||e.description,l=o.model.get("deleteMediaFlag"),s=t?".js-profile-post-body":".upc-single",r={contents:[]};return i=e.remoteMediaUrl||o.newImageUpload||o.model.get("image_url_large")||null,i=l&&!i?null:i,r.contents.push({brandName:o.model.get("brand_name"),contentId:e.id,contentType:"review",created:$.formatDateTime("MM dd, yy",new Date),description:e.description,descriptionFormatted:a,familiarity:e.familiarity,fitData:e.fitData,gender:e.gender,hasImage:!!i,imageUrl:i,isFlagged:!1,referenceImage:o.model.get("product_image"),referenceTitle:o.model.get("product_title"),referenceUrl:o.model.get("product_url"),sizeFit:e.sizeFit,starRating:e.rank,title:e.title,totalChildren:0,uploadedPhoto:e.uploadedPhoto,user:{displayName:BC.profile.displayName,employeeStatus:"NOT_EMPLOYEE",imageUrl:BC.profile.imagePath,profileUrl:"/Store/community/userProfile.jsp?profileId="+BC.profile.id,userId:BC.profile.id},videoId:o.model.get("video_id"),videoType:o.model.get("video_type"),votes:o.model.get("votes")}),o.$el.communitywall({isNewContent:!0,isProfile:t,lazyLoad:!1,wallData:r}),n=$(o.$el.communitywall("returnHtml")).find(s).html(),o.$el.communitywall("destroy"),n},_getFitData:function(){var e={};return e.$fitDataContainer=this.$(this._selectors.fitDataContainer),e.units="english",e.userHeightFt=e.$fitDataContainer.find(this._selectors.inputHeightFeet).val(),e.userHeight=e.$fitDataContainer.find(this._selectors.inputHeightInches).val(),e.userWeight=e.$fitDataContainer.find(this._selectors.inputWeight).val(),e.sizePurchased=e.$fitDataContainer.find(this._selectors.inputSizePurchased).val(),this.model.buildFitData(e)},_handleEdit:function(t){var i,n,o,a,l="profile"===BC.page.id;n=l?this.$el.closest(".profile-post-wrap").find(".js-profile-post-body"):this.$el.closest(".upc.review").find("section.upc-single"),a=this._buildEditedReview(t,l),this.$el.remove(),has("communityproductwall32")&&!l?(o=$(a).filter(".js-user-content").html(),n.find(".js-user-content").html(o),n.show(),this._super(e,"_updatePdpWallMasonry"),$("html, body").animate({scrollTop:n.parent().offset().top-60})):n.html(a).show(),l&&(i=$(".js-profile-wall-masonry-container"),i.masonry("reload").imagesLoaded(function(){i.masonry(),i.trigger("masonryLoaded")})),this.model.get("deleteMediaFlag")&&(t.image_url_large="",t.image_url_medium="",t.image_url_small=""),this.trigger("review-in-place-edit",t)},_initFitData:function(){this.$(this._selectors.inputHeightFeet).val(this.model.get("fitHeightFt")),this.$(this._selectors.inputHeightInches).val(this.model.get("fitHeightIn")),this.$(this._selectors.inputWeight).val(this.model.get("fitWeight")),this.$(this._selectors.inputSizePurchased).val(this.model.get("fitSizePurchased"))},_initSelectMenus:function(){var e,t,i=this;e=has("communityproductwall32")?{positionOptions:{at:"left bottom",my:"left top",offset:"0 -26px"},width:has("mobile")?"80%":"70%"}:{positionOptions:{at:"left bottom",my:"left top",offset:"0 -26px"},width:has("mobile")?"90%":280},t=function(t,n,o){$selectMenu=i.$(t),selectedOption=i.model.get(n),$selectMenu.find("option["+o+'="'+selectedOption+'"]').prop("selected",!0),$selectMenu.selectmenu(e)},t("#review-gender","gender","value"),t(".js-familiarity-edit-select","familiarity","data-familiarity-text"),"bcs"===BC.site.code&&t(".js-size-fit-edit-select","size_fit","data-fit-text")},handleFormSubmit:function(){var e,t=this,i=0,n="",o="",a=0;return t.$("input:file").val()&&(e=t.$("input:file")),o=t.$("#review-gender").val(),i=t.$(".js-familiarity-edit-select").val()||i,"bcs"===BC.site.code&&(a=t.$(".js-size-fit-edit-select").val()||a),n=t._getFitData(),t.model.save({description:t.$("#upc-content").val(),familiarity:i,fitData:n,gender:o,ranking:t.$("#star-rating input:disabled").val(),remoteMediaUrl:t.$("#hotlink-photo").val(),sizeFit:a,title:t.$("#review-title").val()},e),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},389:function(e,t,i){var n,o;n=[i(123),i(220),i(388)],o=function(e,t,i){var n=e.extend({_CONTRIBUTION_TYPE:"review",_CHILD_COLLECTION:t,_editView:i,className:"review",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-review-edit"});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},390:function(e,t,i){var n,o;n=[i(88)],o=function(e){var t=e.extend({_inputElements:{title:"video-title",description:"upc-content",video:"upload-video"},initialize:function(){var t=this;this._super(e,"initialize"),t.$(".js-video-upload").change(function(){var e=t.$(".js-video-upload").val().replace("C:\\fakepath\\","");t.$("#file-upload-filename").text(e),t.model.validateVideo({files:t.$(".js-video-upload")})?(t.$("#filetype-error").hide(),t.$("#input-video").addClass("active")):(t.$("#filetype-error").show(),t.$("#input-video").removeClass("active"))})},_bindEvents:function(){var t=this;t.model.bind("uploadingError",function(e){t._handleUploadingError(e)}),t._super(e,"_bindEvents")},handleFormSubmit:function(){var e,t=this;return t.$("input:file").val()&&(e=t.$("input:file")),t.model.save({title:t.$("#video-title").val(),description:t.$("#upc-content").val(),remoteVideoUrl:t.$("#hotlink-video").val(),userId:BC.profile.id},e),!1},_handleUploadingError:function(e){var t=this,i=e?e:$.t("video.uploading.err");t._formSubmitted=!1,this._addMediaHtml&&this.$(".add-media .faux-col").html(this._addMediaHtml),this.$("form").errorHandler("showErrors",JSON.stringify({summaryError:i}))}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},391:function(e,t,i){var n,o;n=[i(122)],o=function(e){var t=e.extend({_inputElements:{description:"upc-content",title:"video-title"},handleFormSubmit:function(){var e=this;return e.model.save({description:e.$("#upc-content").val(),title:e.$("#video-title").val()}),!1}});return t}.apply(t,n),!(void 0!==o&&(e.exports=o))},392:function(e,t,i){var n,o;n=[i(123),i(220),i(391)],o=function(e,t,i){var n=e.extend({_CONTRIBUTION_TYPE:"video",_CHILD_COLLECTION:t,_editView:i,className:"video",childClassName:"comment",_TEMPLATE_CONTENT_EDIT:"#template-video-edit"});return n}.apply(t,n),!(void 0!==o&&(e.exports=o))},395:function(e,t,i){var n,o;n=[i(5),i(352),i(295),i(251)],o=function(){$.widget("bc.communityform",{options:{currentForm:"solicit-review",currentMediaType:"#input-photo",currentMediaName:"photo",filterWallContent:!1,inputPhoto:"#input-photo",inputVideo:"#input-video",maxDescLength:4e3,maxTitleLength:40,newMediaType:"#input-video",newMediaName:"video",placeholders:{},errorMessages:{},externalMediaText:{},localMediaText:{},uploadButtonText:{}},_selectors:{btnSizeFit:".js-size-fit-btn",fitDataContainer:".js-fit-data-container",fitSubHeadingHeight:".js-sub-heading-units-height",fitSubHeadingWeight:".js-sub-heading-units-weight",inputHeightFeet:"#input-height-ft",inputHeight:"#input-height",inputSizePurchased:"#input-size-purchased",inputWeight:"#input-weight",ratingStars:".ui-stars-star",saveToProfileCheck:".js-save-to-profile-check",selectMenuFamiliarity:".js-familiarity-select",selectMenuSizeFit:".js-size-fit-select",solicitationInput:".solicitation-input",starRating:".ratings"},events:{"blur .solicitation-title":"_onBlurSolicitation","blur .solicitation-description":"_onBlurSolicitation","click #attach-external-media":"_attachExternalMedia","click #attach-local-media":"_attachLocalMedia","click #button-clear":"_clearFormInput","click .input-icon":"_switchMediaType","click .js-create-cancel":"_cancelForm","click .js-fit-units-toggle":"_toggleFitUnits","click .js-open-solicitation-form-btn":"_validateLoggedIn","click .js-product-wall-tabs li":"_productWallTabsHandler","click .js-star-rating-solicit":"_validateLoggedIn","click .js-solicitation-title":"_validateLoggedIn","click .solicitation-type":"_switchSolicitationType","focus .solicitation-description":"_onFocusSolicitationDesc"},_attachExternalMedia:function(){var e=this;$("."+e.options.currentForm+" .local-media").hide(),$("."+e.options.currentForm+" .external-media").show(),$("body").hasClass("ie90")&&$("."+e.options.currentForm+" .external-media-text").focus().blur(),$("."+e.options.currentForm+" .external-media-text").focus(),e._resetInternalInputs()},_attachLocalMedia:function(){var e=this;$("."+e.options.currentForm+" .external-media").hide(),$("."+e.options.currentForm+" .local-media").show(),e._resetExternalInputs()},_bindExternalEvents:function(){var e=this;$.subscribe("content.create.view.clearCommunityForm",function(t){var i=t.currentForm;e._clearCommunityForm(i)})},_cancelForm:function(){this._closeActiveForm(),this._clearReviewStars(),$.publish("sync-no-reload-complete")},_clearAllInputs:function(){$(this._selectors.solicitationInput).val("")},_clearCommunityForm:function(e){this.currentForm=e,this._resetInternalInputs(),this._resetExternalInputs(),this._clearAllInputs(),this._closeActiveForm(),"solicit-review"===e&&(this.isDupeReview=!0,this._clearReviewStars())},_clearFormInput:function(e){$(e.target).siblings(".inner").find("textarea").val("")},_clearReviewStars:function(){var e=$(this._selectors.starRating);e.data("uiStars")&&e.stars("select",0)},_closeActiveForm:function(){if($("#solicitation-form-section.active").removeClass("expanded"),this.wall32){var e=$(".js-solicitation-tabs");$(".js-solicitation-form-section").hide().addClass("hidden").removeClass("active expanded").hide(),$(".js-open-solicitation-form-btn").show(),e.hide().find("a").removeClass("active").find(".review-title").addClass("active")}},_convertFitUnits:function(e){var t,i,n;"centimeters"===e?(n=12*this.fitUnitData.userHeightFeet+this.fitUnitData.userHeight,this.fitUnitData.userHeight=Math.round(2.54*n)||"",this.fitUnitData.userWeight=Math.round(.45359*this.fitUnitData.userWeight)||""):(n=.393701*this.fitUnitData.userHeight,t=Math.floor(n/12),i=Math.round(n%12),this.fitUnitData.userHeightFeet=t||"",this.fitUnitData.userHeight=i||"",this.fitUnitData.userWeight=Math.round(2.20462*this.fitUnitData.userWeight)||"")},_create:function(){var e=this;$("#upload-photo").clone(!0),$("#file-upload-filename").clone(!0),e.wall32=has("communityproductwall32")&&"competitivecyclist"!==BC.site.code,e.formContent={},"pdp"===BC.page.id&&e._setProfileImage(),e._initSelectMenus(),e._on(document,e.events),e.wall32&&($(document).off("click",".js-solicitation-title"),$(document).off("click",".js-star-rating-solicit")),e._initCharsLeft(),e._bindExternalEvents(),"competitivecyclist"===BC.site.code&&e._initSizeButtons()},_expandMediaInputs:function(e){var t,i,n,o=this.formContent[e];o&&o.expandMedia&&(n=$("."+e),t=o.expandMedia,i=o["hotlink-"+t],n.find("#input-"+t).trigger("click"),n.find("#hotlink-"+t).val(i).trigger("keyup"))},_expandSolicit:function(e){var t=this,i=e.data("solicit-type"),n=$(".js-solicitation-tabs");t.wall32?(t.options.currentForm=i,$(".js-open-solicitation-form-btn").hide(),n.find("a").removeClass("active"),"solicit-review"===i?($(".js-solicitation-form-section").hide().addClass("hidden").removeClass("active expanded").hide(),$(".js-solicitation-form-section.solicit-review").addClass("expanded active").removeClass("hidden").show(),n.show(),n.find("a").hide(),n.find(".review-title, .photo-title, .video-title").show(),n.find(".review-title").addClass("active"),$.publish("reviewStarClicked"),$.publish("ScWallInteractions.sitecatalystutil",{events:"event376,event5",action:"write review click",prodId:BC.product.id})):"solicit-question"===i&&($(".js-solicitation-form-section").hide().addClass("hidden").removeClass("active expanded").hide(),$(".js-solicitation-form-section.solicit-question").addClass("expanded active").removeClass("hidden").show(),n.show(),n.find("a").hide(),$.publish("ScWallInteractions.sitecatalystutil",{events:"event377",action:"ask question click",prodId:BC.product.id}))):($("#solicitation-form-section.active").addClass("expanded"),e.parents(".textarea-wrapper").addClass("focus")),"video-title"===e.attr("id")&&($("."+t.options.currentForm+" .local-media").hide(),$("."+t.options.currentForm+" .external-media").show(),$("."+t.options.currentForm+" .attach-local-media").hide())},_handleSolicitExpand:function(e){var t=this,i=t.$solicitExpandTrigger,n=i.attr("id");has("onereviewperuser")&&"star-rating"===n?"undefined"!=typeof t.isDupeReview?t._showDupeReviewError():BC.user.isLoggedIn||BC.user.isRegistered||t.authModalSuccess?$(document).duplicatereviewajax({callback:_.bind(t._showDupeReviewError,t),profileId:BC.profile.id,productId:BC.product.id}):(t.isDupeReview=!1,t._showDupeReviewError()):t._expandSolicit(i),"star-rating"===t.$solicitExpandTrigger[0].id&&$.publish("reviewStarClicked")},_initCharsLeft:function(){var e=this;$(".solicitation-description").each(function(){$(this).charsLeft({maxChars:e.options.maxDescLength})}),$("#review-title").charsLeft({maxChars:e.options.maxTitleLength}),$("#question-title").charsLeft({maxChars:e.options.maxDescLength}),$("#photo-title").charsLeft({maxChars:e.options.maxTitleLength}),$("#video-title").charsLeft({maxChars:e.options.maxTitleLength})},_initSelectMenus:function(){var e=this,t={my:"left top",at:"left bottom",offset:"0 -26px"},i=e.element.find(e._selectors.selectMenuFamiliarity),n=e.element.find(e._selectors.selectMenuSizeFit);i.selectmenu(t),n.selectmenu(t),i.on("selectmenuchange",function(t,i){var n="5"===i.value;n?e._toggleSaveFitToProfile(!1):e._toggleSaveFitToProfile(!0)})},_initSizeButtons:function(){var e,t=this,i=$(t._selectors.btnSizeFit),n=t.element.find(t._selectors.selectMenuSizeFit);i.on("click",function(){e=$(this),e&&(n.selectmenu("value",e.attr("data-fit")),i.removeClass("active"),e.addClass("active"))})},_onBlurSolicitation:function(e){$(e.currentTarget).parents(".textarea-wrapper").removeClass("focus")},_onFocusSolicitationDesc:function(e){$(e.currentTarget).parents(".textarea-wrapper").addClass("focus")},_productWallTabsHandler:function(e){var t=$(e.currentTarget);this._showFormSection(t)},_resetFormContent:function(e){var t=$("."+e),i=this.formContent[e];i?(i.expandMedia=null,_(i).each(function(e,n){!e||"hotlink-photo"!==n&&"hotlink-video"!==n||(i.expandMedia=n.replace("hotlink-","")),"expandMedia"!==n&&t.find("#"+n).val(e).trigger("keyup")}),$("."+this.options.currentForm).find(".solicitation-input").val("").trigger("keyup")):$(".solicitation-input").val("").trigger("keyup")},_resetInternalInputs:function(){var e=this;$("."+e.options.currentForm+" .js-video-upload").val(""),$("."+e.options.currentForm+" .js-photo-upload").val(""),$("."+e.options.currentForm+" #file-upload-filename").text($.t("label.media.upload.no.file")),$("."+e.options.currentForm+" #input-photo").removeClass("active"),$("."+e.options.currentForm+" #input-video").removeClass("active")},_resetExternalInputs:function(){var e=this;$("."+e.options.currentForm+" #hotlink-video").val(""),$("."+e.options.currentForm+" #hotlink-photo").val("")},_resetMediaIcons:function(e){var t=this,i="normal dim";t.wall32&&(i="normal"),"solicit-video"!==t.options.currentForm&&"solicit-photo"!==t.options.currentForm&&$("."+t.options.currentForm+" "+t.options.inputPhoto+", ."+t.options.currentForm+" "+t.options.inputVideo).addClass(i),t.options.currentMediaType=e,t.options.currentMediaName=t.options.currentMediaType.replace("#input-",""),t.options.newMediaType=t.options.inputVideo,t.options.newMediaName=t.options.newMediaType.replace("#input-","")},_saveFormContent:function(){var e=this,t=e.options.currentForm,i=$("."+t).find(".solicitation-input, .external-media-text");e.formContent=e.formContent||{},e.formContent[t]={},i.each(function(){var i=$(this);e.formContent[t][i.attr("id")]=i.val()})},_setProfileImage:function(){var e;e="7"===BC.site.id?BC.profile.imagePath||"//iris.backcountry.com/image/view/6957/150/150":BC.profile.imagePath||"/images/bcs/pages/community/blog/profile-default-big.png",$(".solicitation-form-section").each(function(t,i){$(i).find(".user-photo-wrapper img").attr("src",e).attr("alt",BC.profile.displayName)})},_showDupeReviewError:function(e){var t=this,i=t.$solicitExpandTrigger;return t.isDupeReview="undefined"!=typeof e?e:t.isDupeReview,t.isDupeReview?($errorMsg=$("<p>",{"class":"ui-dupe-review-error js-review-dupe",text:$.t("label.community.pdp.single.review")}),i.closest(".solicitation-form").find(".textarea-wrapper").remove().end().prepend($errorMsg).end().remove(),void(t.isDupeReview=!0)):void t._expandSolicit(i)},_showFormSection:function(e){$(".js-product-wall-tabs li").removeClass("active"),e.addClass("active"),$(".js-solicitation-form-section").hide().addClass("hidden").removeClass("active expanded").hide(),$(".js-open-solicitation-form-btn").show(),$(".js-solicitation-tabs").hide();var t="";BC.product&&(t=BC.product.id),e.hasClass("js-reviews-tab")?($(".questions-tab-section").hide(),$(".reviews-tab-section").show(),$.publish("ScWallInteractions.sitecatalystutil",{events:"event372",evarValue:"reviewTab-"+t,action:"review tab click",prodId:t})):e.hasClass("js-questions-tab")&&($(".reviews-tab-section").hide(),$(".questions-tab-section").show(),$.publish("ScWallInteractions.sitecatalystutil",{events:"event373",evarValue:"q&aTab-"+t,action:"q&a tab click",prodId:t}))},_switchMediaType:function(e){var t=this;"input-photo"===e.currentTarget.id?($("."+t.options.currentForm+" .external-media").hide(),$("."+t.options.currentForm+" .local-media").show(),$("."+t.options.currentForm+" .attach-local-media").show()):($("."+t.options.currentForm+" .local-media").hide(),$("."+t.options.currentForm+" .external-media").show(),$("."+t.options.currentForm+" .attach-local-media").hide()),t.options.currentMediaType!=="#"+e.currentTarget.id?(t.options.newMediaType="#"+e.currentTarget.id,t.options.newMediaName=t.options.newMediaType.replace("#input-",""),$("#solicitation-form-section.active").addClass("add-media"),t.wall32||t._toggleMediaIcons(),t._toggleMediaLabels(t.options.newMediaName,t.options.currentForm),t.options.currentMediaType=t.options.newMediaType,t.options.currentMediaName=t.options.newMediaType.replace("#input-",""),"#input-photo"===t.options.currentMediaType?($("."+t.options.currentForm+" #hotlink-photo").removeClass("hidden"),$("."+t.options.currentForm+" #hotlink-video").addClass("hidden"),$("."+t.options.currentForm+" #video-upload-btn").hide(),$("."+t.options.currentForm+" #photo-upload-btn").show()):($("."+t.options.currentForm+" #hotlink-photo").addClass("hidden"),$("."+t.options.currentForm+" #hotlink-video").removeClass("hidden"),$("."+t.options.currentForm+" #video-upload-btn").show(),$("."+t.options.currentForm+" #photo-upload-btn").hide())):($("#solicitation-form-section.active").toggleClass("add-media"),$(e.currentTarget).removeClass("dim"),t._toggleMediaLabels(t.options.currentMediaName,t.options.currentForm),$("#solicitation-form-section.active").hasClass("add-media")||t._resetMediaIcons(t.options.inputPhoto),$("."+t.options.currentForm+" #hotlink-photo").removeClass("hidden"),"solicit-video"!==t.options.currentForm&&($("."+t.options.currentForm+" #hotlink-video").addClass("hidden"),$("."+t.options.currentForm+" #photo-upload-btn").show(),$("."+t.options.currentForm+" #video-upload-btn").hide())),t._resetInternalInputs(),t._resetExternalInputs()},_switchSolicitationType:function(e){var t=this,i=$(e.currentTarget).attr("id"),n=$(".upc");if(i!==t.options.currentForm){var o=i.replace("solicit-","");t._toggleMediaLabels(o,i),t.wall32?($("#solicitation-form-section."+t.options.currentForm).removeClass("expanded").hide(),$("#solicitation-form-section."+i).addClass("expanded").show()):($("#solicitation-form-section."+t.options.currentForm).removeClass("active").removeClass("add-media").addClass("hidden"),$("#solicitation-form-section."+i).removeClass("hidden").addClass("active")),$("#content-types #"+t.options.currentForm).removeClass("active"),$("#content-types #"+i).addClass("active"),$(".solicitation-indicator").removeClass(t.options.currentForm+"-indicator").addClass(i+"-indicator"),$(".solicitation-global-title").html($.t("label.wall.solicitation."+o)),t.options.filterWallContent&&(n.removeClass("hidden"),"all"!=o&&n.filter(":not(."+o+")").addClass("hidden")),$("body").hasClass("ie90")&&$("."+i+" textarea").focus().blur(),t._saveFormContent(),t._resetFormContent(i),t._resetInternalInputs(),t._resetExternalInputs(),"solicit-video"===i?t._resetMediaIcons(t.options.inputVideo):t._resetMediaIcons(t.options.inputPhoto)}t.options.currentForm=i,t._expandMediaInputs(i)},_toggleFitUnits:function(e){var t,i=this,n=i._selectors,o=$(n.fitDataContainer),a=o.find(e.currentTarget),l=a.data("units");i.fitUnitData={userHeight:parseInt(o.find(n.inputHeight).val(),10)||0,userHeightFeet:parseInt(o.find(n.inputHeightFeet).val(),10)||0,userWeight:parseInt(o.find(n.inputWeight).val(),10)||0},i._convertFitUnits(l),o.find(".js-fit-units.active").addClass("js-fit-units-toggle").removeClass("active"),a.addClass("active").removeClass("js-fit-units-toggle"),t=function(e,t,a){
"metric"===a?o.find(n.inputHeightFeet).val("").hide():o.find(n.inputHeightFeet).val(i.fitUnitData.userHeightFeet).attr("placeholder",e.lengthUnitFt).show(),o.find(n.inputHeight).val(i.fitUnitData.userHeight).attr("placeholder",e.lengthUnit),o.find(n.inputWeight).val(i.fitUnitData.userWeight).attr("placeholder",e.weightUnit),o.find(n.fitSubHeadingHeight).text(t.lengthSub),o.find(n.fitSubHeadingWeight).text(t.weightSub),o.attr("data-current-units",a)},"centimeters"===l?t({lengthUnit:"cm",weightUnit:"kg"},{lengthSub:" (cm)",weightSub:" (kg)"},"metric"):t({lengthUnit:"in",lengthUnitFt:"ft",weightUnit:"lbs"},{lengthSub:" (ft, in)",weightSub:" (lbs)"},"english")},_toggleMediaIcons:function(){var e=this;$("."+e.options.currentForm+" "+e.options.newMediaType).removeClass("dim").addClass("normal"),$("."+e.options.currentForm+" "+e.options.currentMediaType).addClass("dim")},_toggleMediaLabels:function(e,t){this.wall32?$("."+t+" #attach-external-media").html($.t("label.media.upload.external.url."+e)):$("."+t+" #attach-external-media").html($.t("label.media.upload.external."+e)),$("."+t+" #attach-local-media").html($.t("label.media.upload.local."+e))},_toggleSaveFitToProfile:function(e){this.element.find(this._selectors.saveToProfileCheck).attr("checked",e)},_validateLoggedIn:function(e){var t=this;t.$auth=$("#auth"),t.$solicitExpandTrigger=$(e.currentTarget),BC.user.isExplicitOrAutoLoggedIn||BC.user.isLoggedIn||BC.user.isRegistered?t._handleSolicitExpand(e):($(e.srcElement).blur(),t.$auth.authModal("authenticate",function(){t.authModalSuccess=!0,t.wall32||$(e.srcElement).focus(),t._handleSolicitExpand(e)},$.t("community.base.auth.reason")))}})}.apply(t,n),!(void 0!==o&&(e.exports=o))},397:function(e,t,i){var n,o;n=[i(408),i(411),i(423),i(5)],o=function(e){$.delegate("bc.highslide",$.ui.dialog,{options:{autoOpen:!1,buffer:10,dialogClass:"ui-highslide",height:"auto",hide:{duration:500,easing:"easeInOutCubic"},modal:!0,resizable:!1,show:{duration:500,easing:"easeInOutCubic"},width:"auto"},_create:function(){var e=this,t=e.options,i={};e.element=$("<div />"),e._cache={},i["click "+e._selector]="_click",e._on(document,i),$.isPlainObject(t.hide)||(t.hide={}),$.extend(t.hide,{complete:$.proxy(e,"_hideComplete"),effect:"zoom"}),$.isPlainObject(t.show)||(t.show={}),$.extend(t.show,{complete:$.proxy(e,"_showComplete"),effect:"zoom"}),e._on(document,{"click .ui-widget-overlay":"close"}),e._height=t.height,e._width=t.width},close:function(e){var t=this,i=t.options;return null==t.uiDialog||(t._isOpen&&!1!==t._trigger("beforeClose",e)?(t._isOpen=!1,t.uiDialog.find("."+i.dialogClass+"-full-expand").fadeOut(0),t.uiDialog.hide(i.hide),t):void 0)},open:function(){var e=this,t=e.options,i=e.uiDialog;if(!e._isOpen&&e._fullsize)return e._createOverlay(),e._size(),e._position(t.position),i.show(t.show),e.moveToTop(!0),e._isOpen=!0,e._trigger("open"),e},widget:function(){return this.element},_cancel:function(){var e=this;e._isCancelled=!0,e.uiAjaxLoader.hide(),e._$img&&e._$img.remove()},_click:function(t){var i,n=this,o=n.options,a=$(t.currentTarget),l=a.find("img").length?a.find("img"):a,s=a.attr("href")||l.attr("src"),r=l.offset(),c=l.height(),d=l.width(),p=t.pageX||r.left+d/2,u=t.pageY||r.top+c/2;return n.element.html(e({src:s})),n._isCancelled=!1,o.height=n._height,o.width=n._width,n._adjusted=!1,o.show.from=o.hide.to={height:c,left:r.left,top:r.top,width:d},(i=n._cache[s])?(n._fullsize=i,n._open()):(n.uiAjaxLoader||(n.uiAjaxLoader=$("<div />").addClass("ui-ajax-loader").text($.t("highslide.loading")).hide().appendTo("body"),n._on(n.uiAjaxLoader,{click:"_cancel"})),n.uiAjaxLoader.css({left:p,top:u}).show(),n._preload(s)),!1},_createOverlay:function(){this._super()},_destroy:function(){var e=this;e.uiAjaxLoader&&e.uiAjaxLoader.remove(),e.uiDialog&&(e._super(),e.element.remove())},_expand:function(){var e=this,t=e.options;return e.uiDialog.canExpand&&(e._size(!0),e._position(),e.uiDialog.find("."+t.dialogClass+"-full-expand").fadeOut(0)),!1},_hideComplete:function(){var e=this;$.ui.dialog.prototype._destroy.call(e),e._trigger("afterClose")},_hover:function(e){var t=this,i=t.options,n="mouseenter"==e.type?"fadeIn":"fadeOut";t._isOpen&&t.uiDialog.canExpand&&t.uiDialog.find("."+i.dialogClass+"-full-expand")[n]()},_load:function(){var e=this,t=e.options,i=e._$img.attr("src"),n=e._$img.prop("height"),o=e._$img.prop("width"),a="auto"==t.height?"auto"==t.width?n:n*t.width/o:t.height,l="auto"==t.width?"auto"==t.height?o:o*t.height/n:t.width;e._$img.remove(),delete e._$img,e._fullsize=e._cache[i]={height:a,width:l},e.uiAjaxLoader.hide(),e._trigger("afterLoad"),e._open()},_makeDraggable:function(){var e=this;e._super(),e.uiDialog.draggable("option",{cancel:".ui-dialog-titlebar-close",handle:".ui-dialog-content"})},_open:function(){var e=this;e._isCancelled||(e._trigger("beforeOpen"),$.ui.dialog.prototype._create.call(e),e.open(),e._on(e.uiDialog,{click:"close",keypress:function(t){102==t.keyCode&&e._expand()},mouseenter:"_hover",mouseleave:"_hover"}),e._on(e.uiDialog.find("."+e.options.dialogClass+"-full-expand"),{click:"_expand"}))},_position:function(){var e=this,t=e.options;e.uiDialog.css(t.show.to),e._super(t.position),e._adjusted||(e._adjusted=!0,t.show.from.left-=e._chrome.left,t.show.from.top-=e._chrome.top);var i=!e.uiDialog.is(":visible");i&&e.uiDialog.show();var n=e.uiDialog.offset();i&&e.uiDialog.hide(),$.extend(t.show.to,n)},_preload:function(e){var t=this;t._trigger("beforeLoad"),t._$img=$("<img />"),t._on(t._$img,{error:"_cancel",load:"_load"}),t._$img.attr("src",e).css({position:"absolute",visibility:"hidden"}).appendTo(document.body)},_showComplete:function(){var e=this;e._isOpen=!0,e._trigger("afterOpen")},_size:function(e){var t=this,i=t.options,n=t._fullsize,o=$(window).height(),a=!e&&n.height>o?o/n.height:1,l=2*i.buffer;if(t.uiDialog.canExpand=1!==a,!t._chrome){var s=!t.uiDialog.is(":visible");s&&t.uiDialog.show();var r=t.element.offset(),c=t.uiDialog.offset();s&&t.uiDialog.hide(),t._chrome={left:r.left-c.left,top:r.top-c.top}}i.height=Math.floor(n.height*a)-2*t._chrome.left-l,i.width=Math.floor(n.width*a)-2*t._chrome.top-l,i.show.to={height:i.height,width:i.width},i.hide.from=$.extend({},i.show.to)}}),$.effects.zoom=function(e){return this.queue(function(){var t=$(this),i={},n={};$(["height","left","top","width"]).each(function(){var t=this+"";i[t]=e.options.from[t],n[t]=e.options.to[t]});var o=function(){"hide"==e.options.mode&&$(this).hide(),e.callback&&e.callback.call(this),$(this).dequeue()};e.duration?t.css(i).show().animate(n,{complete:o,duration:e.duration,easing:e.options.easing,queue:!1}):(t.css(n).show(),o.call(this))})}}.apply(t,n),!(void 0!==o&&(e.exports=o))},408:function(module,exports,__webpack_require__){var _=__webpack_require__(4);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div>\n\t<img class="ui-highslide-image" src="'+(null==(__t=src)?"":__t)+'" title="'+(null==(__t=$.t("highslide.close"))?"":__t)+'">\n\t\n\t<a class="ui-highslide-full-expand" title="'+(null==(__t=$.t("highslide.expand"))?"":__t)+'"></a>\n</div>';return __p}},411:function(e,t){/*!
	 * jQuery UI Draggable 1.10.3
	 * http://jqueryui.com
	 *
	 * Copyright 2013 jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/draggable/
	 *
	 * Depends:
	 *	jquery.ui.core.js
	 *	jquery.ui.mouse.js
	 *	jquery.ui.widget.js
	 */
!function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),0)))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0])||("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),1))},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,o,a,l=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),l.grid&&(o=l.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-l.grid[1]:o+l.grid[1]:o,a=l.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX,r=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-l.grid[0]:a+l.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),o=n.options,a=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var n=e(this).data("ui-draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("ui-draggable"),o=this;e.each(n.sortables,function(){var a=!1,l=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==l&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(l.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,o,a,l,s,r,c,d,p,u,_=e(this).data("ui-draggable"),m=_.options,h=m.snapTolerance,f=i.offset.left,g=f+_.helperProportions.width,v=i.offset.top,y=v+_.helperProportions.height;for(p=_.snapElements.length-1;p>=0;p--)s=_.snapElements[p].left,r=s+_.snapElements[p].width,c=_.snapElements[p].top,d=c+_.snapElements[p].height,g<s-h||f>r+h||y<c-h||v>d+h||!e.contains(_.snapElements[p].item.ownerDocument,_.snapElements[p].item)?(_.snapElements[p].snapping&&_.options.snap.release&&_.options.snap.release.call(_.element,t,e.extend(_._uiHash(),{snapItem:_.snapElements[p].item})),_.snapElements[p].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(c-y)<=h,o=Math.abs(d-v)<=h,a=Math.abs(s-g)<=h,l=Math.abs(r-f)<=h,n&&(i.position.top=_._convertPositionTo("relative",{top:c-_.helperProportions.height,left:0}).top-_.margins.top),o&&(i.position.top=_._convertPositionTo("relative",{top:d,left:0}).top-_.margins.top),a&&(i.position.left=_._convertPositionTo("relative",{top:0,left:s-_.helperProportions.width}).left-_.margins.left),l&&(i.position.left=_._convertPositionTo("relative",{top:0,left:r}).left-_.margins.left)),u=n||o||a||l,"outer"!==m.snapMode&&(n=Math.abs(c-v)<=h,o=Math.abs(d-y)<=h,a=Math.abs(s-f)<=h,l=Math.abs(r-g)<=h,n&&(i.position.top=_._convertPositionTo("relative",{top:c,left:0}).top-_.margins.top),o&&(i.position.top=_._convertPositionTo("relative",{top:d-_.helperProportions.height,left:0}).top-_.margins.top),a&&(i.position.left=_._convertPositionTo("relative",{top:0,left:s}).left-_.margins.left),l&&(i.position.left=_._convertPositionTo("relative",{top:0,left:r-_.helperProportions.width}).left-_.margins.left)),!_.snapElements[p].snapping&&(n||o||a||l||u)&&_.options.snap.snap&&_.options.snap.snap.call(_.element,t,e.extend(_._uiHash(),{snapItem:_.snapElements[p].item})),_.snapElements[p].snapping=n||o||a||l||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery)}});
//# sourceMappingURL=ondemand-community.wall.9634612196d20f996a97.js.map