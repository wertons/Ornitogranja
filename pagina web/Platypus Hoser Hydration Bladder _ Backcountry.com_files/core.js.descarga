(function(){window.extole=window.extole||{};var n;n="https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443".replace(/^https?:/,"");void 0===extole.DEBUG_MODE&&(extole.DEBUG_MODE=!0);void 0===extole.DEBUG_MODE&&(extole.DEBUG_MODE=!1);void 0===extole.suppressLog&&(extole.suppressLog=!1===extole.DEBUG_MODE&&"pr"==extole.env);var q="";location&&"file:"==location.protocol&&(q="http:");extole.MEDIA_SERVER=q+n;extole.CORE_ROOT="https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443";
extole.VERSION="v4-1.100.0.3327-20180119";extole.MAJOR_VERSION="v4";extole.MINOR_VERSION="1.100.0.3327-20180119";extole.createZone=function(e,h){extole.require(["create-zone"],function(f){f(e,h)})};(function(e,h,f,k,d){e[h]=e[h]||{};for(e[h].q=e[h].q||[];d<k.length;)f(k[d++],e[h])})(window,"extole",function(e,h){h[e]=h[e]||function(){h.q.push([e,arguments])}},["log"],0);extole.define||function(){function e(){}function h(){var a="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),b=document.createElement("script");
this.useInteractive=b.attachEvent&&!(b.attachEvent.toString&&0>b.attachEvent.toString().indexOf("[native code"))&&!a}var f=[],k=function(a){var g;b(f,function(b){if(b.url==a)return g=b,!1});return g},d=function(a){extole.log("debug","[REQUIRE] "+a)},c=function(a){extole.log("error","[REQUIRE] "+a)},b=function(a,b){if(a.length)for(var g=0;g<a.length;g++)b(a[g],g);else for(g in a)a.hasOwnProperty(g)&&b(a[g],g)},a=function(a,g){var l=[];b(a,function(a,b){l[b]=g(a,b)});return l},g=function(a){var g=a.split("/").slice(-1)[0],
l=g.length;b(g.toLowerCase(),function(a){l+=" abcdefghijklmnopqrstuvwxyz1234567890-_.".indexOf(a)});return a.replace("origin","origin-"+l%8)},m=function(a){var b=!!a.match(/^extole-creatives:/),l=!!a.match(/^extole-media:/),c=!!a.match(/^core-root:\/\//),d=!!a.match(/^extole-assets:/),e=!!a.match(/origin\./),u=!!a.match(/^http:/),f=!!a.match(/^https:/);return b?(a=a.slice(17),m("extole-assets:/core-modules/"+a)):d?(a=a.slice(14),a="extole-media:/assets/"+a,m(a)):l?(a=a.slice(13),a=extole.CORE_ROOT+
a,m(a)):c?(a=a.slice(12),a=extole.CORE_ROOT+a,m(a)):e?(a=g(a),a+="?site="+window.location.hostname,m(a)):u?(a=a.slice(5),m(a)):f?(a=a.slice(6),m(a)):a};e.prototype={getUnresolvedDependencies:function(){var a=[];b(this.dependencies,function(b){"$config"!=b&&(b=k(b),(!b||b&&!b._defined)&&a.push(b))});return a},getDependencies:function(){var a=this,g=[];b(a.dependencies,function(b){b="$config"==b?a.config||null:k(b).definition||null;g.push(b)});return g},define:function(){var a=this;a.defineStartTime=
a.defineStartTime||(new Date).getTime();if(!a._defining&&!a._defined&&a.dependencies)if(a._defining=!0,0<a.getUnresolvedDependencies().length)a._defining=!1;else{var b=function(b){a.definedCallback=void 0;a.definition=b;a.end=(new Date).getTime();a.timeToDefine=a.end-a.start;a.timeToFetch&&d("Fetched "+a.url+" in "+a.timeToFetch+"ms");a.isAsync&&d("Defined async "+a.url+" in "+a.timeToDefine+"ms");a._defining=!1;a._defined=!0;setTimeout(u,1)},g=a.getDependencies(),l={isAsync:!1,async:function(){l.isAsync=
a.isAsync=!0;return function(a){b(a)}}};(function(){if(a.definedCallback){var c=a.definedCallback,c=c&&c.apply(l,g);l.isAsync||b(c)}else b(!0)})()}},fetch:function(){var a=this;a._fetching||a._fetched||(a.url?(a._fetching=!0,a.startFetchTime=(new Date).getTime(),l.loadModule(a.url,function(){a._fetching=!1;a.endFetchTime=(new Date).getTime();a.timeToFetch=a.endFetchTime-a.startFetchTime;a._fetched=!0;a.define()})):c("Tried to fetch a module without a url - dependencies: "+a.dependencies+" definedCallback: "+
(a.definedCallback?"exists":"null")+" config: "+a.config))}};h.prototype={defineQueue:[],interactiveScript:null,currentlyAddingScript:null,getInteractiveScript:function(){if(l.interactiveScript&&"interactive"==l.interactiveScript.readyState)return l.interactiveScript;for(var a=document.getElementsByTagName("head")[0].getElementsByTagName("script"),b,g=a.length-1;0<=g;g--){var c=this.getScriptDataUrl(a[g]);a[g]&&"interactive"==a[g].readyState&&c&&(b=a[g],d("...interactive script "+b.src))}return b},
scriptUrlAttributeName:"data-extole-require-url",getScriptDataUrl:function(a){return a.getAttribute(this.scriptUrlAttributeName)},setScriptDataUrl:function(a,b){a.setAttribute(this.scriptUrlAttributeName,b)},attachOnLoad:function(a,b){b=b||function(){};var g=this.useInteractive,l="PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,c=function(m){var e=a.readyState;if(g&&"interactive"==e)interactiveScript=a;else if("load"===m.type||e.match(l))g?a.detachEvent("onreadystatechange",
c):a.removeEventListener("load",c,!1),d(a.src+" finished loading"),b(m)};g?a.attachEvent("onreadystatechange",c):a.addEventListener("load",c,!1)},defineTimeout:null,addDefine:function(b){if(b.url)b.url=m(b.url);else{d("defining anonymous module...");var g=this.currentlyAddingScript||this.getInteractiveScript();this.useInteractive&&g?(g=this.getScriptDataUrl(g),d("..scriptToCompare has data url "+g),b.url=g,this.interactiveScript=null):this.useInteractive&&d("..found no scriptToCompare")}b.dependencies=
a(b.dependencies,m);this.useInteractive&&!b.url&&c("defines should not be missing a url in ie.");this.defineQueue.push(b);this.defineTimeout&&clearTimeout(this.defineTimeout);var l=this;this.defineTimeout=setTimeout(function(){d("intakeDefines from addDefine timeout");l.intakeDefines()},1)},intakeTimeout:null,intakeDefines:function(){for(var a={},g=function(b,g){a[b]=a[b]?a[b]+","+g:g},l=[],c;c=this.defineQueue.shift();){var m=[];b(c.dependencies,function(a){a&&m.push(a)});var e=c.url&&k(c.url);c.url?
e?g(c.url,"updated"):g(c.url,"created"):l.push("deps "+c.dependencies);b(m,function(a){g(a,"dependency");v(a)});v(c.url,m,c.definedCallback,c.config,c.isRequire)}var f="intakeDefines -- ";b(a,function(a,b){f+="\n - "+b+" "+a});f+="\n -- "+l.length+" anonymous modules created";b(l,function(a){f+="\n - "+a});d(f);this.intakeTimeout&&clearTimeout(this.intakeTimeout);this.intakeTimeout=setTimeout(u,1)},loadModule:function(a,b){var g=document.createElement("script");g.async=!0;g.crossOrigin="anonymous";
this.setScriptDataUrl(g,a);var l=this;d("loading module "+a);this.attachOnLoad(g,function(){if(!l.useInteractive){for(var g,m=l.defineQueue.length-1;0<=m;m--)l.defineQueue[m].url||(g&&c("Multiple anonymous modules loaded in one script - "+a),g=l.defineQueue[m]);g?(d("assigned "+a+" to anonymous module"),g.url=a):d("module url didn't define a module - "+a)}d("intake defines from loadModule");l.intakeDefines();b&&b(null)});g.src=a;this.currentlyAddingScript=g;document.getElementsByTagName("head")[0].appendChild(g);
this.currentlyAddingScript=void 0}};var l=new h,u=function(){b(f,function(a){a._fetched?a._defined||a.define():a.fetch()})},v=function(a,b,g,l,c){if("$config"!=a){var d=k(a),m=d||new e;d||f.push(m);a&&b&&(m._fetched=!0);m.start=m.start||(new Date).getTime();m.url=m.url||a;m.dependencies=m.dependencies||b;m.config=m.config||l;m.definedCallback=m.definedCallback||g;m.isRequire=m.isRequire||c}},w=function(a,b,g,c){a instanceof Array&&(c=g,g=b,b=a,a=void 0);l.addDefine({url:a,dependencies:b,definedCallback:g,
config:c})};w.getModule=function(a){return k(a)};var p=0,t=function(){p++;return"anonymous_"+p};extole.define=w;extole.require=function(a,b){l.addDefine({url:t(),dependencies:a,definedCallback:b,isRequire:!0})};extole.define("extole-require",[],function(){return{resolveUrl:m}});setTimeout(function(){var a=!1,g=[];b(f,function(b){b._defined||(a=!0);g.push({defineStartTime:b.defineStartTime,dependencies:b.dependencies,end:b.end,start:b.start,isRequire:b.isRequire,timeToDefine:b.timeToDefine,url:b.url,
_defined:b._defined,_defining:b._defining,_fetched:b._fetched})});a&&extole.DUMP_REQUIRE_MODULES_ON_ERROR&&extole.log("error","After 7000ms there are unresolved extole-require modules.  ###"+JSON.stringify(g)+"###")},7E3)}();extole.define("ajax",["utils"],function(e){var h=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],f=function(d){if(d=
d.match(/^([a-zA-Z]*:?\/\/)?([^/]+)/))return d[2]},k=function(d,c){var b=Array.prototype.slice.call(arguments),a=c.headers||{},g=c.xhrFields||{},m=c.url||"",l=c.data||"",u=(c.type||"get").toUpperCase(),h=c.complete||function(){},k=c.error||function(){e.log("Error with url "+m+"=",b.join(","))},p=f(m),t=f(location.toString());(p="undefined"!=typeof XDomainRequest&&!(p&&t&&p==t))&&(d=new XDomainRequest);e.isPlainObject(l)&&("GET"==u?(m+=e.location.serialize(l),l=null):l=JSON.stringify(l));p?(d.open(u,
m),d.onprogress=function(){},d.ontimeout=k,d.timeout=0):d.open(u,m,!0);e.extend(d,g);p||e.each(a,function(a,b){try{d.setRequestHeader(b,a)}catch(g){e.log("AJAX ERROR: Couldn't set request header",b,"to",a)}});var r=!1;d.onerror=function(a){r||(r=!0,k.call(d,d.statusText,d.status))};a=function(){void 0!==d.readyState&&4!==d.readyState||r||(r=!0,String(d.status||200).match(/^[23]/)?"function"===typeof h?h.call(d,d.responseText):e.log("`complete` callback must be a function."):k.call(d,d.statusText,
d.status))};d.onload=a;d.onreadystatechange=a;d.send(l)};return function(d){d=d||{};var c;c=!1;for(var b=0;b<h.length;b++){try{c=h[b]()}catch(a){continue}break}k(c,d);return c}});extole.define("campaigns",["utils","campaigns/api","campaigns/campaign"],function(e,h,f){return e.extend(h,{campaign:f})});extole.define("campaigns/api","utils configuration campaigns/campaign request-zone creative-javascript-api/render/JsZone https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js".split(" "),
function(e,h,f,k,d,c){var b={},a=function(a){var g=a.id;g||e.throwError("campaigns","No id passed for campaign.",a);b[g]=a},g=function(a){return f(b[a])},m=function(a){var c;e.each(b,function(b,d){var m=g(d);if(m.wantsZone(a))return c=m.id,e.each.BREAK});if(c)return g(c);e.log("No campaign wanted zone "+a.getName()+", render cancelled")};h=h.get("CLIENT_CONFIG");e.each(h.campaigns,function(b,g){a(e.extend(b,{id:g}))});return{add:a,get:g,getByZone:m,renderZone:function(a,b){function g(a,c){var l=a.getName(),
m=a.getParameters();a.campaign&&(m.campaign_id=a.campaign.id);k(l,m,function(g){g?b(g):b(null,new d({name:l,parameters:m,element:a.element}))})}b=b||function(){};var e=m(a);e?e.renderZone(a,function(m,d){d&&d.isLegacyCreative?c.warn("V6_UPGRADE_BLOCKER - rendering legacy javascript creative for zone "+a.getName()):(m&&a.removeCampaignReferences(),g(a,b))}):(a.removeCampaignReferences(),g(a,b))}}});extole.define("campaigns/campaign",["utils","configuration","creatives","creative-javascript-api/render/JsCreativeContext"],
function(e,h,f,k){var d={getConfig:function(){return h.get("CLIENT_CONFIG").campaigns[this.id]},wantsZone:function(c){var b=h.get("CLIENT_CONFIG"),a=c.getName(),g=e.location.deserialize(location.search);return c.type&&"microsite"==c.type&&g.campaignId==this.id||c.data.campaign&&c.data.campaign==this.id||c.data.parameters&&c.data.parameters.campaign_id==this.id?!0:c.data.campaign?!1:(b=b.zone_defaults[a])&&b.campaign==this.id||c.fromUri&&this.getConfig()[c.getType()+"_creative"]?!0:!1},selectCreativeId:function(c){var b=
h.get("CLIENT_CONFIG"),a=this.getConfig(),g=c.getType(),m,l=c.getData();c=b.zone_defaults[c.getName()]||{};b=b.cta_name_to_id||{};l.cta&&(m=b[l.cta.toLowerCase()]||l.cta);m||(m=l.creative);m||(m=a[g+"_creative"]);m||(m=c.creative);return m},selectCreative:function(c,b){var a=this.selectCreativeId(c);a?f.get(a,function(g,c){var l;!g&&c&&(l=e.extend({id:a},c));b(g,l)}):b(Error("No creative id for zone "+c.getName()+" and campaign "+this.id))},renderZone:function(c,b){b=b||function(){};var a=this;c.elementReady(function(g,
d){g?b(g):(c.campaign=a,a.selectCreative(c,function(a,g){if(a)b(a);else{if(g.isLegacyCreative)g.render(c);else{var d=new k(c);g.render(d)}b(null,g)}}))})},getName:function(){return this.name?this.name:this.name=h.get("CLIENT_CONFIG").campaign_id_to_name[this.id]}};return function(c){var b=c;b.__created||(b=e.createObject(d),e.extend(b,c),b.__created=!0);return b}});extole.require("utils configuration campaigns zones params events page-scanner sites user services https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js".split(" "),
function(e,h,f,k,d,c,b,a,g,m,l){f=h.get("CLIENT_CONFIG");h.set("PUBLISHED_DATE",f.published_date||"now");extole.user=g;extole.services=m;extole.events=c;extole.config=f;extole.site=a.getDefault();var u=function(){b.whenYouFind('script[type="extole/conversion"]').thenCall(function(a){extole.LOG_TAG_CONTENTS&&l.warn(["LEGACY_CONVERSION_TAG START_INNER_TEXT",a.innerText,"END_INNER_TEXT"].join(" "));if(!a.hasBeenUsed){a.hasBeenUsed=!0;a:{var b={};try{b=JSON.parse(a.innerHTML)}catch(g){e.log.error("Could not fire conversion. "+
g);break a}a=b.type||b.event_type;b=e.extend(!0,{},h.utils.getSharedVars(),b);extole.services.zoneConvert({type:a,parameters:b.params})}}}).andRemove();b.findAllTheThings()},v=function(){var a;"function"===typeof window.onerror&&(a=window.onerror);window.onerror=function(b,g,c,l,d){if(a)try{a(b,g,c,l,d)}catch(m){}g=g||window.location.href||"no_source_or_location.href";d=d&&d.stack?d.stack:"no_error.stack";var e=[],f=JSON.stringify({MESSAGE:b,SOURCE:g,LINE_NUMBER:c,COLUMN_NUMBER:l,STACK_TRACE:d},function(a,
b){if(null!==b&&"object"==typeof b){if(0<=e.indexOf(b))return;e.push(b)}return b});((d+b).match(/extole/i)||g.match(extole.site.program_domain))&&extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],function(a){a.error("Unhandled exception",JSON.parse(f))})}};a=function(){v();k.requester.start();u();if("undefined"!==typeof window.extoleEvents)c.on(window.extoleEvents);extole._bootstrapped=!0};extole.bootstrap=a;extole.loadCoreAsLibrary||
extole._bootstrapped||a();if("undefined"!==typeof window.extoleAsyncInit)try{extoleAsyncInit()}catch(w){extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],function(a){a.error("Error executing extended core javascript. Message : "+w.message+" Stack: "+w.stack)})}});extole.SYSTEM_DOWN=!1;extole.CLIENT_ID="732469989";extole.CLIENT_CONFIG={client:{client_id:"732469989",disabled:!1,sites:[{id:"6182601174915659812",name:"Backcountry Referral Program",
program_domain:"refer.backcountry.com",lazy_load:!1,is_secure:!1,cloudsponge_keys:{"www.pqa.backcountry.com":"Y8VFEVCSVXMTEQS4U67U","preview.backcountry.com":"E4LKQZ58FLUUJEHBB6HT","www.backcountry.com":"H2AAEYDXUTMBKFDM6WG8","backcountry.extole.com":"8HTF463TW28RRVVN3TMC","refer.backcountry.com":"3JB4DZJ7VTVRJZ8E8DXB","backcountry.com":"LD4CY2LK5UP7QT64RHYF","apps2.extole.com":"5TSQ28DBWF5TQ55Q5WC8","integration.competitivecyclist.com":"5VRM3SCKRQ3H3WMAR4FW"},share_url:"http://refer.backcountry.com/s",
privacy_policy_url:"http://www.backcountry.com/sc/privacy-policy",allowed_domains:"*.backcountry.com\\.?$ *.pqa.competitivecyclist.com\\.?$ api.extole.com www.backcountry.com backcountry.com preview.backcountry.com pqa.competitivecyclist.com *.backcountry.com *.apps2.extole.com\\.?$ *.bcinfra.net *.www.pqa.backcountry.com\\.?$ apps2.extole.com *.bcinfra.net\\.?$ *.extole.com www.pqa.backcountry.com *.integration.competitivecyclist.com\\.?$ integration.competitivecyclist.com refer.backcountry.com *.extole.io *.preview.backcountry.com\\.?$ *.www.backcountry.com\\.?$ *.refer.backcountry.com\\.?$".split(" ")}]},
cta_creative_name_to_id:{},campaign_name_to_id:{},zones:{campaign_image:{id:null,name:"campaign_image",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},conversion:{id:null,name:"conversion",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},registration:{id:null,name:"registration",disabled:!1,default_type:"none",default_types:{size:{},
none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},terms:{id:null,name:"terms",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},optout:{id:null,name:"optout",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},share_destination_facebook:{id:null,name:"share_destination_facebook",disabled:!1,
default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},friend_landing_experience:{id:null,name:"friend_landing_experience",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},friend_cta_facebook:{id:null,name:"friend_cta_facebook",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,
resources:{}},friend_cta_email:{id:null,name:"friend_cta_email",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},share_destination:{id:null,name:"share_destination",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},godaddy_verification:{id:null,name:"godaddy_verification",disabled:!1,default_type:"none",default_types:{size:{},
none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},advocate_earned_reward_email:{id:null,name:"advocate_earned_reward_email",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},footer_2:{id:null,name:"footer_2",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},my_account_2:{id:null,name:"my_account_2",
disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},footer:{id:null,name:"footer",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},order_history:{id:null,name:"order_history",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},confirmation_1:{id:null,
name:"confirmation_1",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},my_account:{id:null,name:"my_account",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},confirmation:{id:null,name:"confirmation",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,
resources:{}},home_hero_1:{id:null,name:"home_hero_1",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},my_account_1:{id:null,name:"my_account_1",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},home_hero_2:{id:null,name:"home_hero_2",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",
blacklist:"",reference_element:null,resources:{}},footer_1:{id:null,name:"footer_1",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},home_hero:{id:null,name:"home_hero",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},confirmation_2:{id:null,name:"confirmation_2",disabled:!1,default_type:"none",default_types:{size:{},
none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},advocate_dashboard_email:{id:null,name:"advocate_dashboard_email",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},social_share_window:{id:null,name:"social_share_window",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},embedded_widget:{id:null,
name:"embedded_widget",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},promote_destination:{id:null,name:"promote_destination",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}},advocate_welcome_email:{id:null,name:"advocate_welcome_email",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",
blacklist:"",reference_element:null,resources:{}},share_experience:{id:null,name:"share_experience",disabled:!1,default_type:"none",default_types:{size:{},none:"none",html:""},whitelist:".*",blacklist:"",reference_element:null,resources:{}}},zone_defaults:{campaign_image:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501612555399099650:version=8:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},conversion:{creative:null,campaign:"6480946886652829112"},
registration:{creative:null,campaign:"6480946886652829112"},terms:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893935694756:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},optout:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893987062271:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},share_destination_facebook:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501638122781643049:version=4:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},friend_landing_experience:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890911905615:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},friend_cta_facebook:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893080746937:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},friend_cta_email:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891139300493:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},share_destination:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501637844094677903:version=5:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},godaddy_verification:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946888948113870:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},advocate_earned_reward_email:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890912992674:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},footer_2:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892789397010:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},my_account_2:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891104482602:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},footer:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890950687877:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},order_history:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892171747680:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},confirmation_1:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892518947150:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},my_account:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892299994327:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},confirmation:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893955398118:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},home_hero_1:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890563036774:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},my_account_1:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891980436127:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},home_hero_2:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893670668172:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},footer_1:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893046511390:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},home_hero:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890621324265:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},confirmation_2:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892457044128:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},advocate_dashboard_email:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891073897410:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},social_share_window:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501243873357967324:version=17:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},embedded_widget:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946894379792648:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},promote_destination:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892666274441:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"},advocate_welcome_email:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892760600387:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
campaign:"6480946886652829112"},share_experience:{creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501637012013879332:version=6:coreAssetsVersion=1509024379443/render-javascript.js",campaign:"6480946886652829112"}},campaigns:{"55cd033563616e2853000018":{id:"55cd033563616e2853000018",name:"unknown",campaign_image_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6429514779766818810:version=2:coreAssetsVersion=1509024379443/render-javascript.js"},"6395283099894685208":{id:"6395283099894685208",
name:"unknown",conversion_creative:null,registration_creative:null,terms_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395283097789072528:version=78:coreAssetsVersion=1509024379443/render-javascript.js",optout_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480592129463622406:version=17:coreAssetsVersion=1509024379443/render-javascript.js",share_destination_facebook_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395283100717037450:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
friend_landing_experience_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395283101598078509:version=78:coreAssetsVersion=1509024379443/render-javascript.js",friend_cta_facebook_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395302769474728238:version=61:coreAssetsVersion=1509024379443/render-javascript.js",friend_cta_email_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395283100140729535:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
share_destination_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6395961791537804314:version=54:coreAssetsVersion=1509024379443/render-javascript.js",campaign_image_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6429514870303309848:version=32:coreAssetsVersion=1509024379443/render-javascript.js",godaddy_verification_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6448935786308712449:version=21:coreAssetsVersion=1509024379443/render-javascript.js"},
"6480946886652829112":{id:"6480946886652829112",name:"unknown",terms_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893935694756:version=78:coreAssetsVersion=1509024379443/render-javascript.js",optout_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893987062271:version=78:coreAssetsVersion=1509024379443/render-javascript.js",friend_cta_email_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891139300493:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
friend_cta_facebook_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893080746937:version=78:coreAssetsVersion=1509024379443/render-javascript.js",share_destination_facebook_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501638122781643049:version=4:coreAssetsVersion=1509024379443/render-javascript.js",friend_landing_experience_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890911905615:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
registration_creative:null,advocate_earned_reward_email_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890912992674:version=78:coreAssetsVersion=1509024379443/render-javascript.js",footer_2_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892789397010:version=78:coreAssetsVersion=1509024379443/render-javascript.js",my_account_2_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891104482602:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
footer_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890950687877:version=78:coreAssetsVersion=1509024379443/render-javascript.js",order_history_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892171747680:version=78:coreAssetsVersion=1509024379443/render-javascript.js",confirmation_1_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892518947150:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
my_account_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892299994327:version=78:coreAssetsVersion=1509024379443/render-javascript.js",confirmation_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893955398118:version=78:coreAssetsVersion=1509024379443/render-javascript.js",home_hero_1_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890563036774:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
my_account_1_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891980436127:version=78:coreAssetsVersion=1509024379443/render-javascript.js",home_hero_2_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893670668172:version=78:coreAssetsVersion=1509024379443/render-javascript.js",footer_1_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946893046511390:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
home_hero_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946890621324265:version=78:coreAssetsVersion=1509024379443/render-javascript.js",confirmation_2_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892457044128:version=78:coreAssetsVersion=1509024379443/render-javascript.js",conversion_creative:null,share_destination_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501637844094677903:version=5:coreAssetsVersion=1509024379443/render-javascript.js",
advocate_dashboard_email_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946891073897410:version=78:coreAssetsVersion=1509024379443/render-javascript.js",social_share_window_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501243873357967324:version=17:coreAssetsVersion=1509024379443/render-javascript.js",embedded_widget_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946894379792648:version=78:coreAssetsVersion=1509024379443/render-javascript.js",
promote_destination_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892666274441:version=78:coreAssetsVersion=1509024379443/render-javascript.js",advocate_welcome_email_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946892760600387:version=78:coreAssetsVersion=1509024379443/render-javascript.js",campaign_image_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501612555399099650:version=8:coreAssetsVersion=1509024379443/render-javascript.js",
godaddy_verification_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6480946888948113870:version=78:coreAssetsVersion=1509024379443/render-javascript.js",share_experience_creative:"https://origin.extole.io/type=creativeArchive:creativeArchiveId=6501637012013879332:version=6:coreAssetsVersion=1509024379443/render-javascript.js"}},js_source:"",published_date:"20181311223"};extole.define("configuration","utils configuration/get-client-config configuration/api configuration/processors configuration/utils configuration/zones".split(" "),
function(e,h,f,k,d,c){var b=this.async();h(function(a,g){if(a)throw Error("Error getting client config - "+a.message);var m=extole.SYSTEM_DOWN;f.set("CLIENT_CONFIG",k.clientConfig(g));f.set("SYSTEM_DOWN",m);f.set("CLIENT_DOWN",!!g.client.disabled);f.set("SITE_DOMAIN",extole.SITE_DOMAIN||location.hostname);e.extend(f,{processors:k,utils:d,zones:c});b(f)})});extole.define("configuration/api",[],function(){var e={};return{set:function(h,f){e[h]=f},get:function(h){return e[h]}}});extole.define("configuration/get-client-config",
["JSON","ajax"],function(e,h){var f=function(d){setTimeout(function(){var c=extole.CLIENT_ID;c?d(null,c):d(Error("Could not find client id"))},1)},k=function(d){f(function(c,b){c&&d?d(Error("Error fetching client id - "+c.message)):h({url:extole.MEDIA_SERVER+"/config/clients/"+b+"/client.json",complete:function(a){d&&d(null,e.parse(a))},error:function(a){d&&d(Error("Problem fetching client config - "+a.message))}})})};return function(d){if(extole.CLIENT_CONFIG){var c=extole.CLIENT_CONFIG;setTimeout(function(){d&&
d(null,c)},1)}else k(d)}});extole.define("configuration/processors",["utils"],function(e){var h={},f=function(e,d){for(var c in e)if(e.hasOwnProperty(c)){var b=d(c);c!==b&&(e[b]=e[c],delete e[c])}};h.clientConfig=function(h){if(h._processed)return h;var d=function(c){return c.toLowerCase()};f(h.zones,d);e.each(h.zones,function(c,b){c.name=b});f(h.zone_defaults,d);f(h.cta_creative_name_to_id,d);f(h.campaign_name_to_id,d);h.campaign_id_to_name={};e.each(h.campaign_name_to_id,function(c,b){h.campaign_id_to_name[c]=
b});h.cta_creative_id_to_name={};e.each(h.cta_creative_id_to_name,function(c,b){h.cta_creative_id_to_name[c]=b});h._processed=!0;return h};return h});extole.define("configuration/utils",["configuration/api","utils","cookie","JSON"],function(e,h,f,k){return{getSharedVars:function(){for(var d=document.getElementsByTagName("script"),c={},b,a=0;a<d.length;a++)if("extole/context"==d[a].type){b=void 0;try{b=k.parse(d[a].innerHTML)}catch(g){h.log.error("Bad JSON in context script tag.")}b&&h.extend(c,b)}return c}}});
extole.define("configuration/zones",["utils","configuration/api"],function(e,h){return{blacklisted:function(f){f=h.get("CLIENT_CONFIG").zones[f]||{};var k=!0,d=!1;f.whitelist&&(k=!!location.toString().match(new RegExp(f.whitelist)));f.blacklist&&(d=!!location.toString().match(new RegExp(f.blacklist)));return d?(e.log("Location is on black list"),!0):k?!1:(e.log("Not on white list uri"),!0)}}});extole.define("cookie",["utils","JSON"],function(e,h){function f(a){return a}function k(a){try{return decodeURIComponent(a.replace(c,
" "))}catch(b){return e.log("** utils.cookie.decoded ** Cookie error for: "+a,b.message,b),""}}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return b.json?h.parse(a):a}catch(g){}}var c=/\+/g,b=function(a,g,c){if(void 0!==g){c=e.extend({},b.defaults,c);if("number"===typeof c.expires){var l=c.expires,u=c.expires=new Date;u.setDate(u.getDate()+l)}g=b.json?h.stringify(g):String(g);return document.cookie=[b.raw?a:encodeURIComponent(a),"=",b.raw?g:encodeURIComponent(g),
c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}g=b.raw?f:k;c=document.cookie.split("; ");for(var l=a?void 0:{},u=0,v=c.length;u<v;u++){var w=c[u].split("="),p=g(w[0]);if(!a)l[p]=d(g(w[1]));else if(a===p)return d(g(w[1]))}return l};b.defaults={};return b});extole.define("create-zone",["zones","campaigns"],function(e,h){function f(d,c){if(!d)throw new k(c||"Assertion failed","assertion_failed");}function k(d,
c){var b=Error.call(this,d);this.name="ExtoleError";this.message=b.message;this.stack=b.stack;this.code=c}k.prototype=Error();k.prototype.constructor=k;return function(d,c){c=c||function(){};f(d,"createZone requires a map of parameters");f(d.name,'createZone expects the "name" parameter to be present');f(d.element,'createZone expects the "element" parameter to be present');var b=e.zone({name:d.name,type:d.name,element:d.element,data:{insert_position:"inside",parameters:d.parameters||d.data||{}}});
b.data.parameters.campaign_id&&(b.data.campaign=b.data.parameters.campaign_id);h.renderZone(b,c)}});extole.define("creative-javascript-api/render/JsCampaign",[],function(){return function(e){this.getId=function(){return e.id};this.getProgramLabel=function(){return e.id}}});extole.define("creative-javascript-api/render/JsCoreConfig",[],function(){return function(){this.backendTargetingEnabled=function(){return!1}}});extole.define("creative-javascript-api/render/JsCreativeContext",["creative-javascript-api/render/JsZone",
"creative-javascript-api/render/JsCampaign","creative-javascript-api/render/JsProgram","creative-javascript-api/render/JsCoreConfig","utils"],function(e,h,f,k,d){return function(c){this.getCampaign=function(){return new h({id:c.campaign.id})};this.getZone=function(){return new e({element:c.element,name:c.getName(),parameters:c.getParameters()})};this.getProgram=function(){return new f};this.getCoreConfig=function(){return new k}}});extole.define("creative-javascript-api/render/JsProgram",[],function(){return function(){var e=
extole.site;this.getName=function(){return e.name};this.getProgramDomain=function(){return e.program_domain};this.getSitePatterns=function(){return e.allowed_domains}}});extole.define("creative-javascript-api/render/JsZone",[],function(){return function(e){this.getElement=function(){return e.element};this.getName=function(){return e.name};this.getParameters=function(){return e.parameters||{}};this.getData=function(){return e.parameters||{}}}});extole.define("creatives",["utils","configuration"],function(e,
h){var f=function(e,d){var c=h.get("CLIENT_CONFIG"),b;b=e.match(/^(https?|file):\/\//)?!0:e.match(/^\/\//)?!0:!1;return b?e:"extole-media:/config/clients/"+c.client.client_id+"/creative_"+e+"."+h.get("PUBLISHED_DATE")+".js"};return{get:function(e,d){var c=f(e);extole.require([c],function(b){var a={},g="[object Object]"===Object.prototype.toString.call(b),c="function"===typeof b.render;g&&c?(a.render=b.render,a.isLegacyCreative=!0):a.render=b;d(null,a)})}}});extole.define("dom","utils dom/api dom/events dom/window dom/attributes dom/query dom/ready".split(" "),
function(e,h,f,k,d,c,b){return e.extend(h,{events:f,window:k,attributes:d,query:c,ready:b})});extole.define("dom/api",["utils","dom/events"],function(e,h){var f={x:0,y:0};h.add(document,"mousemove",function(c){f.x=c.pageX;f.y=c.pageY});var k=function(c){var b=document.createDocumentFragment(),a=document.createElement("div");a.innerHTML=c;e.each(a.childNodes,function(a){1==a.nodeType&&b.appendChild(a)});return b},d=function(c){var b;e.each(c.childNodes,function(a){b||1!=a.nodeType||(b=a)});return b};
return{prepend:function(c,b){var a=d(c),g=b;"string"==typeof b&&(g=k(b));a?c.insertBefore(g,a):c.appendChild(ode)},append:function(c,b){var a=b;"string"==typeof b&&(a=k(b));c.appendChild(a)},mouse:f}});extole.define("dom/attributes",["utils"],function(e){var h=function(f){f=f.className;var d={};if(!f)return d;e.each(f.split(" "),function(c){d[c]=1});return d},f=function(f){var d="";e.each(f,function(c,b){d+=" "+b});return d.slice(1)};return{set:function(e,d,c){e.setAttribute(d,c);e[d]=c},get:function(e,
d){return e.getAttribute(d)},addClass:function(e,d){var c=h(e);c[d]||(c[d]=1,e.className=f(c))},removeClass:function(e,d){var c=h(e);delete c[d];e.className=f(c)},getClassNames:h}});extole.define("dom/events",["utils"],function(e){var h=[],f=function(d,c,b){for(var a=[],g=0;g<h.length;g++){var m=h[g];m.element==d&&m.eventType==c&&m.listener==b&&a.push({index:g,eventListener:m})}return a},k=function(d){this.originalEvent=d;this.type=d.type;this.keyCode=d.keyCode;this.target=d.srcElement?d.srcElement:
d.target};k.prototype={preventDefault:function(){var d=this.originalEvent;d.preventDefault?d.preventDefault():d.returnValue=!1},stopPropagation:function(){var d=this.originalEvent;d.stopPropagation&&d.stopPropagation();d.cancelBubble=!0}};return{add:function(d,c,b){if(0<f(d,c,b).length)e.log("events.add - Listener already exists for event "+c+" on element "+d);else{var a=!d.addEventListener,g=function(g){a&&(g=window.event);return b.call(d,new k(g))};h.push({element:d,eventType:c,listener:b,listenerWrapper:g});
d.addEventListener?d.addEventListener(c,g,!1):d.attachEvent("on"+c,g)}},trigger:function(d,c,b){var a=document.createEvent("Event");a.initEvent(c,!0,!1);e.extend(a,b);d.dispatchEvent(a)},remove:function(d,c,b){b=f(d,c,b);0>=b.length?e.log("events.remove - Couldn't find exiting event listener for type \""+c+'" listener on element '+d):e.each(b,function(a){var b=a.index;a=a.eventListener;d.removeEventListener?d.removeEventListener(c,a.listenerWrapper,!1):d.detachEvent("on"+c,a.listenerWrapper);h.splice(b,
1)})}}});extole.define("dom/query",[],function(){return function(e,h){return(h||document).querySelectorAll(e)}});extole.define("dom/ready",["utils"],function(e){var h=e.generalReady();(function(){var e;document.addEventListener?e=function(){document.removeEventListener("DOMContentLoaded",e,!1);h.set()}:document.attachEvent&&(e=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),h.set())});"complete"===document.readyState&&h.set();document.addEventListener?(document.addEventListener("DOMContentLoaded",
e,!1),window.addEventListener("load",h.set,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",e),window.attachEvent("onload",h.set))})();return h});extole.define("dom/window",[],function(){return{getSize:function(){var e=document.documentElement,h=document.getElementsByTagName("body")[0];return{width:window.innerWidth||e.clientWidth||h.clientWidth,height:window.innerHeight||e.clientHeight||h.clientHeight}}}});extole.define("entity-events",["utils"],function(e){function h(b,a,g,
c){c=c.split(/\s+/);e.each(c,function(c){var d=b[c];d||e.throwError("bindEntityEvents","Method '"+c+"' was configured as an event handler, but does not exist.");b.listenTo(a,g,d)})}function f(b,a,g,c){b.listenTo(a,g,c)}function k(b,a,g,c){c=c.split(/\s+/);e.each(c,function(c){b.stopListening(a,g,b[c])})}function d(b,a,g,c){b.stopListening(a,g,c)}function c(b,a,g,c,l){a&&g&&(e.isFunction(g)&&(g=g.call(b)),e.each(g,function(g,d){e.isFunction(g)?c(b,a,d,g):l(b,a,d,g)}))}return{bind:function(b,a,g){c(b,
a,g,f,h)},unbind:function(b,a,g){c(b,a,g,d,k)}}});extole.define("events",["utils","configuration"],function(e,h){var f={},k=function(d,c){"object"==typeof d?e.each(d,function(b,a){k(a,b)}):e.each(d.split(" "),function(b){f[b]||(f[b]={name:b,callbacks:[]});f[b].callbacks.push(c)})};return{on:k,off:function(d,c){e.each(d.split(" "),function(b){if(f[b])if(c){var a=-1;e.each(f[b].callbacks,function(b,d){if(b==c)return a=d,!1});0<a&&f[b].callbacks.splice(a,1)}else f[b].callbacks=[]})},trigger:function(d,
c){var b=h.get("CLIENT_CONFIG");c=c||{};var a=c.sharedVars||h.utils.getSharedVars(),g={};e.each(c,function(a,b){"sharedVars"!==b&&"zoneName"!==b&&"campaignId"!==b&&(g[b]=a)});for(var b=b.client,m=e.extend(!0,g,a,{eventName:d,zoneName:c.zoneName,campaignId:c.campaignId,siteId:extole.site.id,clientId:b.client_id,clientName:b.name}),a=d.split(":"),b=a.length;0<b;b--){var l=a.slice(0,b).join(":");if(f[l]){e.each(f[l].callbacks,function(a){a(e.extend({},m,{eventNameRemainder:l}))});break}}}}});extole.define("JSON",
[],function(){var e;"object"!==typeof e&&(e={});(function(){function h(a){return 10>a?"0"+a:a}function f(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function k(g,c){var d,e,p,t,r=b,n,x=c[g];x&&x instanceof Date&&(d=x,x=isFinite(d.valueOf())?d.getUTCFullYear()+"-"+h(d.getUTCMonth()+1)+"-"+h(d.getUTCDate())+"T"+h(d.getUTCHours())+":"+h(d.getUTCMinutes())+":"+h(d.getUTCSeconds())+
"Z":null);"function"===typeof m&&(x=m.call(c,g,x));switch(typeof x){case "string":return f(x);case "number":return isFinite(x)?String(x):"null";case "boolean":case "null":return String(x);case "object":if(!x)return"null";b+=a;n=[];if("[object Array]"===Object.prototype.toString.apply(x)){t=x.length;for(d=0;d<t;d+=1)n[d]=k(d,x)||"null";p=0===n.length?"[]":b?"[\n"+b+n.join(",\n"+b)+"\n"+r+"]":"["+n.join(",")+"]";b=r;return p}if(m&&"object"===typeof m)for(t=m.length,d=0;d<t;d+=1)"string"===typeof m[d]&&
(e=m[d],(p=k(e,x))&&n.push(f(e)+(b?": ":":")+p));else for(e in x)Object.prototype.hasOwnProperty.call(x,e)&&(p=k(e,x))&&n.push(f(e)+(b?": ":":")+p);p=0===n.length?"{}":b?"{\n"+b+n.join(",\n"+b)+"\n"+r+"}":"{"+n.join(",")+"}";b=r;return p}}var d,c,b,a,g,m;"function"!==typeof e.stringify&&(c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=
function(g,c,d){var e;a=b="";if("number"===typeof d)for(e=0;e<d;e+=1)a+=" ";else"string"===typeof d&&(a=d);if((m=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return k("",{"":g})});"function"!==typeof e.parse&&(d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e.parse=function(a,b){function g(a,c){var d,l,e=a[c];if(e&&"object"===typeof e)for(d in e)Object.prototype.hasOwnProperty.call(e,
d)&&(l=g(e,d),void 0!==l?e[d]=l:delete e[d]);return b.call(a,c,e)}var c;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof b?g({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return e});
extole.define("page-scanner",["utils","dom"],function(e,h){function f(){function b(){g||(l=!1,g=!0,setTimeout(function(){for(var f={},v=c.splice(0,c.length);0<v.length;){var k=v.shift(),p=f[k.selector];if(!p)try{p=h.query(k.selector)}catch(t){e.log.error("query error -"+k.selector)}p&&0<p.length&&k.withElements(p);k.shouldDelete()||c.push(k)}g=!1;l?b():d||(f=Math.ceil(50*(.3*Math.pow(1.017,a/50)+.7)),setTimeout(b,f),a=f)},1))}var a=0,g=!1,c=[],l=!1;this.queue=function(a){c.push(a);l=!0;g||b()};this.scan=
b}function k(b){var a=0,g=function(){return!0},c=function(){},d=!1;this.withElements=function(b){e.each(b,function(a){g(a)&&c(a)});a++};this.setFilter=this.andIts=function(a){g=a;return this};this.setCompleted=this.thenCall=function(a){c=a;return this};this.setDeleteAfterCall=this.andRemove=function(){d=!0};this.shouldDelete=function(){return 0<a&&!0===d?!0:!1};this.selector=b}var d=!1;h.ready(function(){d=!0});var c=new f;return{whenYouFind:function(b){var a=new k(b);setTimeout(function(){c.queue(a)},
1);return a},findAllTheThings:function(){c.scan()},reset:function(){c=new f}}});extole.define("params",["utils","validators"],function(e,h){var f={e:"email",f:"first_name",l:"last_name"},k="email first_name last_name source partner_conversion_id partner_user_id".split(" ");return{rekey:function(d){var c={};e.each(d,function(b,a){f[a]&&(a=f[a]);var g=/^tag:/.test(a),d=-1<e.inArray(a,k)?!0:!1;g||d||(a="tag:"+a);c[a]=b});return c},split:function(d,c){c=e.extend({validateEmail:!0},c||{});var b={init:{},
client:{}};if(!d)return b;e.each(d,function(a,g){var d=b.init;-1<g.indexOf("tag:")?(g=g.substring(4),d=b.client):"email"==g&&c.validateEmail&&!h.isEmail(a)&&(e.log("Initialized with invalid email address ("+a+") - (configUtils.getInitParams)"),a=void 0);d[g]=a});return b},removeTags:function(d){var c={};e.each(d,function(b,a){a=a.replace(/^tag:/,"");c[a]=b});return c}}});extole.define("request-zone","sites ajax utils utils/collections https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/client/program.js".split(" "),
function(e,h,f,k,d,c){function b(a){var b=a.code||"",c=a.description||"";this.stack=Error(c).stack;this.getCode=function(){return b};this.getDescription=function(){return c}}function a(a){function b(a,g){if("[object Object]"!==Object.prototype.toString.call(a)){var d=g.join(".");c[d]=a}else k.each(a,function(a,c){var d=g.slice();d.push(c);b(a,d)})}var c={};b(a,[]);return c}b.prototype=Error();b.prototype.constructor=b;return function(g,m,l){l=l||function(){};extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/shared/js/user-service.js"],
function(u){u.getUser(function(k,w){if(k)l(k);else{var p=e.getDefault(),t=w.getAccessToken(),r=c.getProtocol()+p.program_domain+"/zone/"+g,p=f.extend({},a(m),{access_token:t});h({type:"GET",url:r,dataType:"json",xhrFields:{withCredentials:!0},data:p,complete:function(a){var b;try{b=JSON.parse(a).access_token}catch(g){d.warn("Could not parse zone response as JSON for zone: "+r)}b||"function"!==typeof this.getResponseHeader||(b=this.getResponseHeader("X-Extole-Token"));b&&b!==w.getAccessToken()&&u.setAccessToken(b);
l(null)},error:function(a,c,d){f.log("zone request for zone: "+g+" failed");a=new b({description:"zone request failed: "+c,code:"zone_request_exception"});l(a)}})}})})}});extole.define("services","utils services/share services/convert services/zone-convert services/confirm services/send-dashboard services/preshare services/click services/impression services/rewards services/claim-reward".split(" "),function(e,h,f,k,d,c,b,a,g,m,l){return{click:a,impression:g,share:h,convert:f,zoneConvert:k,confirm:d,
sendDashboard:c,preshare:b,rewards:m,claimReward:l}});extole.define("services/claim-reward",["utils","services/request"],function(e,h){var f=h({method:"post",requiredParams:["rewardId","rewardOptionId"],getCommonData:function(){return{}},onBeforeSend:function(){this.validateRequiredParams();this.url="//"+this.getProgramDomain()+"/api/v2/rewards/"+this.rewardId+"/claim";this.xhrFields={withCredentials:!0};this.data={reward_option_id:this.rewardOptionId}}});return e.factory(f)});extole.define("services/click",
["utils","services/stream"],function(e,h){var f=h({eventType:"CTA_CLICK"});return e.factory(f)});extole.define("services/confirm",["utils","services/request"],function(e,h){var f=h({method:"post",eventType:void 0,requiredParams:["confirmationCode","actionId"],onBeforeSend:function(){this.validateRequiredParams();this.url="//"+this.getProgramDomain()+"/v2/confirm";this.data={confirmation_code:this.confirmationCode,action_id:this.actionId}}});return e.factory(f)});extole.define("services/convert",["utils",
"services/request","user","params"],function(e,h,f,k){h=h({method:"post",requiredParams:[],validate:function(){this.validateRequiredParams()},onBeforeSend:function(){this.validate();this.url="//"+this.getProgramDomain()+"/v2/convert";this.data={action_type:(this.type||"PURCHASE").toUpperCase(),site_id:null}}});return e.factory(h)});extole.define("services/impression",["utils","services/stream"],function(e,h){var f=h({eventType:"CTA_IMPRESSION"});return e.factory(f)});extole.define("services/preshare",
["utils","services/request"],function(e,h){var f=h({method:"get",eventType:void 0,requiredParams:["campaignId"],onBeforeSend:function(){this.validateRequiredParams();this.url="//"+this.getProgramDomain()+"/v2/preshare/"+this.campaignId;this.data={confirmation_code:this.confirmationCode,action_id:this.actionId};this.xhrFields={withCredentials:!0}}});return e.factory(f)});extole.define("services/request","utils JSON dom ajax sites xd-messager-iframe params".split(" "),function(e,h,f,k,d,c,b){h=e.extend({validateRequiredParams:function(){var a=
this,b=[],c=this.requiredParams||[];e.each(c,function(c){var d=a[c];d||"string"==typeof d||b.push(c)});b.length&&this.silentFail("Must pass "+c.join(", ")+". Of those, you're missing "+b.join(", "))},getProgramUrl:function(){e.log("DEPRECATED. Use getProgramDomain.");return this.getProgramDomain()},getProgramDomain:function(){return d.getDefault().program_domain},silentFail:function(a){this.error=a},getCommonData:function(a){a=a||{};var g={};if(this.params){var c=b.rekey(this.params);a=b.split(c,
a);e.extend(g,a.init,{client_params:a.client})}a=f.window.getSize();return e.extend(g,{mouse_xy:Math.round(f.mouse.x)+","+Math.round(f.mouse.y),window_wh:a.width+","+a.height,screen_wh:screen.width+","+screen.height,site_id:d.getDefault().id})},send:function(a){var b=function(){},c=function(){};e.isPlainObject(a)?(b=a.complete||b,c=a.error||c):e.isFunction(a)&&(b=a);var d=this;this.triggerMethod("before:send");this.data=e.extend(!0,{},this.getCommonData(a),this.data);if(this.error)e.log.error("Request Error - ",
this.error,this);else{this.headers=this.headers||{};void 0===this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/json");a={url:this.url,type:this.method,complete:function(){d.triggerMethod.apply(d,["send"].concat(arguments));b.apply(this,arguments)},error:function(){d.triggerMethod.apply(d,["send:error"].concat(arguments));c.apply(this,arguments)},data:this.data,xhrFields:e.extend(this.xhrFields,{withCredentials:!0}),headers:this.headers};var f=String(navigator.userAgent),h=f.match("Windows NT 10"),
f=f.match("rv:11");"undefined"!==typeof window.XDomainRequest||h&&f?this.sendViaIframe(a):k(a)}},sendViaIframe:function(a){var b=e.uniqueId("forwardAjaxCalls"),d=c.create(b);d.ready(function(){var b=d.socket;b.sendMessage("ajax",a);var c=function(g){b.off("ajaxComplete",c);a.complete.apply(g,arguments)},g=function(c){b.off("ajaxError",g);a.error.apply(c,arguments)};b.on("ajaxComplete",c);b.on("ajaxError",g)})}},e.events);return e.factory(h)});extole.define("services/rewards",["utils","services/request"],
function(e,h){var f=h({onBeforeSend:function(){this.validateRequiredParams();this.url="//"+this.getProgramDomain()+"/api/v2/rewards/unclaimed";this.xhrFields={withCredentials:!0}}});return e.factory(f)});extole.define("services/send-dashboard",["utils","services/request"],function(e,h){var f=h({method:"get",eventType:void 0,onBeforeSend:function(){this.url="//"+this.getProgramDomain()+"/v2/advdash/email/"}});return e.factory(f)});extole.define("services/share",["utils","services/request","user"],
function(e,h,f){h=h({method:"post",eventType:void 0,requiredParams:["channel","campaignId","siteId","zoneName"],validate:function(){this.validateRequiredParams();f.setFromShare(this);f.get("email")||this.silentFail("User must have email");"purl"==this.channel.toLowerCase()&&(this.actionId||this.silentFail("Purl share requires action id."),this.actionIdHash||this.silentFail("Purl share requires action id hash."))},onBeforeSend:function(){this.validate();this.url="//"+this.getProgramDomain()+"/v2/share";
this.data={channel:this.channel,campaign_id:this.campaignId,zone_name:this.zoneName,client_params:{cta_id:this.ctaCreativeId,zone_id:this.zoneId},email:f.get("email"),first_name:f.get("first_name"),last_name:f.get("last_name"),channel_email:this.email,channel_first_name:this.firstName,channel_last_name:this.lastName,channel_message:this.message,channel_access_token:this.accessToken,channel_access_token_secret:this.secret,source_url:window.location.toString(),resources:this.resources,recipients:this.recipients,
site_id:this.siteId};"purl"==this.channel.toLowerCase()&&(this.data.action_id=this.actionId,this.data.id_hash=this.actionIdHash)}});return e.factory(h)});extole.define("services/stream",["utils","services/request"],function(e,h){var f=h({method:"post",eventType:void 0,requiredParams:["campaignId","eventType"],onBeforeSend:function(){this.validateRequiredParams();this.url="//"+this.getProgramDomain()+"/v2/stream";this.data={campaign_id:this.campaignId,zone_name:this.zoneName,client_params:{cta_id:this.ctaCreativeId,
zone_id:this.zoneId},event_type:this.eventType}}});return e.factory(f)});extole.define("services/zone-convert",["request-zone","params"],function(e,h){function f(e){var d=e.code||"",c=e.description||"";this.stack=Error(c).stack;this.getCode=function(){return d};this.getDescription=function(){return c}}f.prototype=Error();f.prototype.constructor=f;return function(k,d){d=d||function(){};var c=function(a){var b;a=a.toLowerCase();if("purchase"===a)b="conversion";else if("register"===a||"registration"===
a)b="registration";return b||null}(k.type),b=function(a){a=h.rekey(a);return h.removeTags(a)}(k.parameters);if(!c){var a="Error: could not find zone based on type:"+k.type;extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],function(b){b.error(a)});c=new f({description:a,code:"error-no-type"});return d(c)}e(c,b,d)}});extole.define("sites",["utils","configuration","JSON","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],
function(e,h,f,k){function d(a){this.config=a;e.extend(this,this.config)}d.prototype={isAllowedForDomain:function(a){if(this.config.program_domain==a)return!0;var b=this.config.allowed_domains||[];b.push("*.extole.com");var c=!1;e.each(b,function(b){(new RegExp(b.replace(/\./g,"\\.").replace(/\*/g,".*"))).test(a)&&(c=!0)});return c},getProgramDomain:function(){return this.config.program_domain}};var c=function(){var a=[],b=h.get("CLIENT_CONFIG").client;e.each(b.sites,function(b){a.push(new d(b))});
return a},b=function(a){return e.map(c(),function(b){if(b.isAllowedForDomain(a))return b})};return{getDefault:function(){var a=h.get("SITE_DOMAIN"),c=b(a);if(1<c.length){var d=e.map(c,function(a){return a.getProgramDomain()});k.warn("Multiple programs matched domain: "+a+" programs: "+d)}(c=c[0])||k.error("No default site found for domain "+a);return c},filterByDomain:b}});extole.define("template",["utils"],function(e){var h=e.keys,f=e.invert,k=e.each,d=e.defaults,c={escape:{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}};c.unescape=f(c.escape);var b={escape:new RegExp("["+h(c.escape).join("")+"]","g"),unescape:new RegExp("("+h(c.unescape).join("|")+")","g")},a,g;(function(){var d=function(a){return function(g){return null==g?"":(""+g).replace(b[a],function(b){return c[a][b]})}};a=d("escape");g=d("unescape")})();var m={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},l=/(.)^/,u={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028",
"\u2029":"u2029"},v=/\\|'|\r|\n|\t|\u2028|\u2029/g;return function(b,c,e){var f={escape:a,unescape:g,each:k},h;e=d({},e,m);var x=new RegExp([(e.escape||l).source,(e.interpolate||l).source,(e.evaluate||l).source].join("|")+"|$","g"),n=0,y="__p+='";b.replace(x,function(a,c,g,d,e){y+=b.slice(n,e).replace(v,function(a){return"\\"+u[a]});c&&(y+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");g&&(y+="'+\n((__t=("+g+"))==null?'':__t)+\n'");d&&(y+="';\n"+d+"\n__p+='");n=e+a.length;return a});y+="';\n";
e.variable||(y="with(obj||{}){\n"+y+"}\n");y="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+y+"return __p;\n";try{h=new Function(e.variable||"obj","_",y)}catch(B){throw B.source=y,B;}if(c)return h(c,f);c=function(a){return h.call(this,a,f)};c.source="function("+(e.variable||"obj")+"){\n"+y+"}";return c}});extole.define("user",["utils","params","cookie","configuration","dom"],function(e,h,f,k,d){var c=!1,b=e.extend({attributes:{},has:function(a){return void 0!==
this.get(a)},get:function(a){return this.attributes[a]||this.cookieAttributes[a]},set:function(a,b){if(!e.inArray(a,["first_name","last_name","email"])||!this.attributes[a]){var c=this.attributes[a];if(b&&c!==b){this.attributes[a]=b;var d=this,h={};e.each(["first_name","last_name","email"],function(a){h[a]=d.get(a)});f("extole_fle",JSON.stringify(h),{path:"/"});this.trigger("change")}}},toJson:function(){return e.extend({isAutoReg:this.isAutoReg()},this.cookieAttributes,this.attributes)},isAutoReg:function(){return!0===
c},setFromShare:function(a){var b=this;e.each({first_name:"firstName",last_name:"lastName",email:"email"},function(c,d){b.set(d,a[c])})},setFromContext:function(a){if(a&&a.params){var b=this,d=this.attributes.email;a=h.rekey(a.params);a=h.split(a).init;e.each(a,function(a,c){b.set(c,a)});d!==this.attributes.email&&(c=!0)}},logout:function(){f("extole_fle",null,{path:"/"});this.attributes=this.cookieAttributes={};this.trigger("logout")},cookieAttributes:function(){var a;try{a=JSON.parse(f("extole_fle"))||
{}}catch(b){return{}}var c={};e.each(["first_name","last_name","email"],function(b){c[b]=a[b]});return c}()},e.events);d.ready(function(){b.setFromContext(k.utils.getSharedVars())});return b});extole.define("utils","utils/api utils/factory utils/string utils/events utils/location utils/insert-script".split(" "),function(e,h,f,k,d,c){return e.extend(e,{factory:h,string:f,events:k,location:d,insertScript:c})});extole.define("utils/api",["utils/collections","JSON","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],
function(e,h,f){var k=e.each;h=e.map;var d=e.mapObj,c=e.has,b=e.keys,a=e.values,g=e.invert,m=e.toArray,l=e.inArray,u=e.isArray,v=e.isPlainObject,w=0,p=function(a){return a&&"function"===typeof a&&a.call&&a.apply};"undefined"!=typeof window.console&&(extole.console=extole.console||console);var t;t=function(){var a,b,c,g,d,e=arguments[0]||{},l=1,m=arguments.length,f=!1;"boolean"===typeof e&&(f=e,e=arguments[1]||{},l=2);for("object"===typeof e||p(e)||(e={});l<m;l++)if(a=arguments[l],null!==a)for(b in a)c=
e[b],g=a[b],e!==g&&(f&&g&&(v(g)||(d=u(g)))?(d?(d=!1,c=c&&u(c)?c:[]):c=c&&v(c)?c:{},e[b]=t(f,c,g)):void 0!==g&&(e[b]=g));return e};var r=Array.prototype.slice,n=function(){f.debug.apply(null,arguments)};n.debug=f.debug;n.warn=f.warn;n.info=f.info;n.error=f.error;var x=extole.generalReady;extole.generalReady||(x=extole.generalReady=function(a){extole._generalReadyAnonKey||(extole._generalReadyAnonKey=0);var b=extole._generalReadyAnonKey++;a=t(a||{},{readyTest:void 0});x.readies[b]||(x.readies[b]={ready:!1,
funcs:[]});var c=function(a){a||x.readies[b].ready?x.readies[b].funcs.push(a):(x.readies[b].ready=!0,n.debug("** generalReady ** "+b+" - set ready"));if(x.readies[b].ready)for(;a=x.readies[b].funcs.pop();)setTimeout(a,0)};c.unset=function(){x.readies[b].ready=!1};c.set=function(){c()};c.isReady=function(){return x.readies[b].ready};return c},x.readies={});var A=function(a,b){b||(b=a,a="undefined");var c=Error("TYPE: "+a+"  MESSAGE: "+b);c.type=a;return c};return{uniqueId:function(a){var b=++w+"";
return a?a+b:b},each:k,map:h,mapObj:d,has:c,keys:b,values:a,invert:g,toArray:m,inArray:l,isEmpty:function(a){if(null===a)return!0;if(u(a)||"string"===typeof a)return 0===a.length;for(var b in a)if(c(a,b))return!1;return!0},isArray:u,isPlainObject:v,isFunction:p,proxy:function(a,b){var c;a.__proxiedContext===b?c=a:(c=function(){return a.apply(b,arguments)},c.__proxiedContext=b);return c},log:n,generalReady:x,extend:t,defaults:function(a){k(r.call(arguments,1),function(b){if(b)for(var c in b)void 0===
a[c]&&(a[c]=b[c])});return a},createObject:Object.create||function(a){var b=function(){};b.prototype=a;return new b},typedError:A,throwError:function(a,b){throw A(a,b);},handleError:function(a,b,c){c=c||function(){};try{b()}catch(g){if(g.type==a)return c(g),g;throw g;}}}});extole.define("utils/collections",[],function(){var e=Array.prototype.slice,h=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f=function(a){if(!d(a))return[];var b=[],c;for(c in a)h(a,c)&&b.push(c);return b},k=function(a){for(var b=
f(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},d=function(a){if("[object Object]"!==String(a)||a.nodeType||a.window&&a.window==a)return!1;try{if(a.constructor&&!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(b){return!1}return!0},c=function(a){return a instanceof Array},b=function(a,b){var c,d;if(a.length===+a.length)for(d=0;d<a.length;d++){if(c=b(a[d],d),!1===c)return!1}else for(d in a)if(a.hasOwnProperty(d)&&(c=b(a[d],d),!1===c))return!1};b.BREAK=!1;var a=
function(a,c){var d=[];b(a,function(a,b){var g=c(a,b);void 0!==g&&d.push(g)});return d};return{each:b,map:a,mapObj:function(a,c){var d={};b(a,function(a,b){var g=c(a,b);void 0!==g&&(g.key&&g.value?d[g.key]=g.value:d[b]=g)});return d},has:h,keys:f,values:k,invert:function(a){for(var b={},c=f(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},toArray:function(b){return b?c(b)?e.call(b):b.length===+b.length?a(b,function(a){return a}):k(b):[]},inArray:function(a,b,c){var d;if(b)for(d=b.length,c=c?0>
c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c;return-1},isArray:c,isPlainObject:d}});extole.define("utils/events",["utils/api"],function(e){var h=Array.prototype.slice,f={on:function(b,a,c){if(!d(this,"on",b,[a,c])||!a)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:a,context:c,ctx:c||this});return this},listenTo:function(b,a,c){var d=this._listeningTo||(this._listeningTo={}),l=b._listenId||(b._listenId=e.uniqueId("l"));d[l]=b;c||"object"!==
typeof a||(c=this);b.on(a,c,this);return this},stopListening:function(b,a,c){var d=this._listeningTo;if(!d)return this;var l=!a&&!c;c||"object"!==typeof a||(c=this);b&&((d={})[b._listenId]=b);for(var f in d)b=d[f],b.off(a,c,this),(l||e.isEmpty(b._events))&&delete this._listeningTo[f];return this},off:function(b,a,c){var f,l,h,k,w,p,t,r;if(!this._events||!d(this,"off",b,[a,c]))return this;if(!b&&!a&&!c)return this._events=void 0,this;k=b?[b]:e.keys(this._events);w=0;for(p=k.length;w<p;w++)if(b=k[w],
h=this._events[b]){this._events[b]=f=[];if(a||c)for(t=0,r=h.length;t<r;t++)l=h[t],(a&&a!==l.callback&&a!==l.callback._callback||c&&c!==l.context)&&f.push(l);f.length||delete this._events[b]}return this},trigger:function(b){if(!this._events)return this;var a=h.call(arguments,1);if(!d(this,"trigger",b,a))return this;var g=this._events[b],e=this._events.all;g&&c(g,a);e&&c(e,arguments);return this}},k=/\s+/,d=function(b,a,c,d){if(!c)return!0;if("object"===typeof c){for(var e in c)b[a].apply(b,[e,c[e]].concat(d));
return!1}if(k.test(c)){c=c.split(k);e=0;for(var f=c.length;e<f;e++)b[a].apply(b,[c[e]].concat(d));return!1}return!0},c=function(b,a){var c,d=-1,e=b.length,f=a[0],h=a[1],k=a[2];switch(a.length){case 0:for(;++d<e;)(c=b[d]).callback.call(c.ctx);break;case 1:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f,h);break;case 3:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f,h,k);break;default:for(;++d<e;)(c=b[d]).callback.apply(c.ctx,a)}};f.triggerMethod=function(){function b(a,
b,c){return c.toUpperCase()}var a=/(^|:)(\w)/gi;return function(c){var d=this["on"+c.replace(a,b)];e.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(e.isFunction(d))return d.apply(this,e.toArray(arguments).slice(1))}}();return f});extole.define("utils/factory",["utils/api"],function(e){var h={};return e.extend(function(f,k){k=k||function(){};var d=function(c,b){var a="boolean"==typeof d.deepExtend?d.deepExtend:!1,g;g=c||{};b||(b=f);if(!0!==g.__created){g=e.createObject(b);h[g]={parent:b};
var m=[g,c];a&&m.splice(0,0,!0);e.extend.apply(null,m);k.call(g,g);g.__created=!0}return g};return d},{getInfo:function(e){return h[e]},getProto:function(e){return(e=h[e])&&e.parent}})});extole.define("utils/insert-script",[],function(){var e="PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,h=function(f,h){h=h||function(){};var d=function(c){var b=f.readyState;if("load"===c.type||b.match(e))f.detachEvent?f.detachEvent("onreadystatechange",d):f.removeEventListener("load",d),
h(c)};f.attachEvent?f.attachEvent("onreadystatechange",d):f.addEventListener("load",d,!1)};return function(e,k){var d=document.createElement("script");d.async=!0;h(d,function(){k(null)});d.src=e;document.getElementsByTagName("head")[0].appendChild(d)}});extole.define("utils/location",["utils/api"],function(e){return{serialize:function(h){var f="";e.each(h,function(e,d){void 0!==d&&void 0!==e&&(f+="&"+encodeURIComponent(d)+"="+encodeURIComponent(String(e)))});0<f.length&&(f="?"+f.slice(1));return f},
deserialize:function(h){if(!h)return{};var f={};h=h.substring(1).split("&");for(var k=0;k<h.length;k++){var d=h[k],c=d.substring(0,d.indexOf("=")),d=d.substring(d.indexOf("=")+1);if(c&&d)try{f[c]=decodeURIComponent(d)}catch(b){e.log("Bad Query Param "+c+" : "+d)}}return f}}});extole.define("utils/string",[],function(){var e=function(e){return e.replace(/(_.)/g,function(e,h){return h.replace("_","").toUpperCase()})};return{toCamelCase:e,toPascalCase:function(h){h=e(h);return h=h.substring(0,1).toUpperCase()+
h.substring(1)},trim:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}}});extole.define("validators",[],function(){return{isEmail:function(e){e=String(e);e=e.replace(/^\s+/,"").replace(/\s+$/,"");return e.match(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)}}});
extole.define("xd-messager-iframe",["utils","xd-messager","configuration","sites","dom"],function(e,h,f,k,d){return{create:function(c){c||(c=e.uniqueId("socket-iframe"));var b=e.generalReady(),a=k.getDefault().program_domain,g=f.get("CLIENT_CONFIG");extole.MEDIA_SERVER.match(/^\/\/([a-zA-Z\.-]+)/);var g=g.client.client_id,m=document.createElement("iframe");m.src=location.protocol+"//"+a+"/xd-arbiter-origin/"+g+"?coreRoot="+encodeURIComponent(location.protocol+extole.MEDIA_SERVER)+"&socketId="+c;e.each({scrolling:"no",
frameborder:"0",allowTransparency:"true",seamless:"seamless"},function(a,b){d.attributes.set(m,b,a)});document.body.appendChild(m);var l=h.create(c);d.events.add(m,"load",function(){l.sendTo=m.contentWindow;var a,c=function(){l.off("ready",c);clearInterval(a);b()};l.on("ready",c);a=setInterval(function(){l.sendMessage("ready?")},250)});return{socket:l,iframe:m,ready:b}}}});extole.define("xd-messager",["utils","JSON"],function(e,h){var f=function(d){window.addEventListener?window.addEventListener("message",
d,!1):window.attachEvent("onmessage",d)},k={listen:function(){var d=this;this._listener=function(c){c=c.data;var b=c.split("-"),a=b[0],e=b[1],b=b[2];if(a!=d.id)return!1;if(b)try{var f=c.substring(a.length+1+e.length+1),b=h.parse(f)}catch(l){}d.trigger(e,b)};f(this._listener)},stopListening:function(){if(this._listener){var d=this._listener;window.removeEventListener?window.removeEventListener("message",d):window.detachEvent("onmessage",d)}},destroy:function(){this.stopListening()},sendMessage:function(d,
c){var b;b=this.id+"-"+d;c&&(b+="-"+h.stringify(c));this.sendTo.postMessage(b,"*")}};return{create:function(d,c){c||(c={});d||(d=e.uniqueId("socket_"));var b=e.createObject(k);e.extend(b,{id:d,options:c,sendTo:c.sendTo||window.parent},e.events);b.listen();return b}}});extole.define("zones",["zones/zone","zones/default-content","zones/resources","zones/requester"],function(e,h,f,k){return{zone:e,defaultContent:h,resources:f,requester:k}});extole.define("zones/creative-placement",["utils","dom"],function(e,
h){var f=function(c,b){var a=c;"none"!==b&&(a=document.createElement("span"));return a},k=function(c,b,a,d){var e=arguments,l=b.parentNode;if(!l)return h.ready(function(){l||(document.body.appendChild(b),k.apply(null,e))}),!1;"replace"==a?(l.insertBefore(c,b),l.removeChild(b)):"before"==a?l.insertBefore(c,b):"after"==a?b.nextSibling?l.insertBefore(c,b.nextSibling):l.appendChild(c):"inside"==a&&b.appendChild(c);d(null)},d=function(c){c=e.extend({insertPosition:void 0,referenceElement:void 0},c||{});
var b=c.insertPosition;c=c.referenceElement;b||(b="before","*"==c?b="inside":c&&(b="none"));return b};return{renderElement:function(c,b){var a=c.getData(),a=d({insertPosition:a.insert_position,referenceElement:a.reference_element}),e=c.element,h=f(e,a);k(h,e,a,function(){b(null,h)});return h},getInsertPosition:d}});extole.define("zones/default-content",["configuration","utils"],function(e,h){var f={},k={none:function(){return document.createDocumentFragment()},size:function(d){var c=document.createDocumentFragment(),
b=document.createElement("span"),a=["height","width"],e,f=d.default_types.size;b.style.display="block";for(var l=0;l<a.length;l++)d=a[l],e=f[d]+"px",b.style[d]=e;c.appendChild(b);return c},html:function(d){var c=document.createDocumentFragment(),b=document.createElement("div");for(b.innerHTML=d.default_types.html;0<b.childNodes.length;)c.appendChild(b.childNodes[0]);return c}};return{shouldShow:function(d){var c=e.get("CLIENT_CONFIG");d=d.name.toLowerCase();c=c.zones[d];return!0===e.get("SYSTEM_DOWN")?
(f[d]="the system is off",!0):!0===e.get("CLIENT_DOWN")?(f[d]="the client is disabled",!0):c&&void 0!==c.disabled&&!0===c.disabled?(f[d]="the zone is disabled",!0):e.zones.blacklisted(d)?(f[d]="the zone is blacklisted",!0):!1},getElement:function(d){var c=e.get("CLIENT_CONFIG");d=d.name.toLowerCase();var c=c.zones[d],b=f[d];h.log("Showing default content for "+d+(b?" because "+b:""));if(!c)return h.log("There was no config for the given zone, so I couldn't show the default content."),document.createDocumentFragment();
d="none";c.default_type&&(d=c.default_type);c.default_types&&c.default_types[d]&&!c.reference_element||(d="none");return k[d](c)}}});extole.define("zones/requester","JSON utils dom configuration page-scanner zones/zone campaigns https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js".split(" "),function(e,h,f,k,d,c,b,a){function g(a){function b(c,e){e=e||function(){};var g;g=c.reference_element&&"*"==c.reference_element?"body":c.reference_element?c.reference_element:
!1;if(!g)return e(null,a);d.whenYouFind(g).thenCall(function(a){e(null,a)}).andRemove()}this.prepare=function(c){c=c||function(){};var d;try{d=e.parse(a.innerHTML)}catch(g){return c(Error("element has bad JSON, can't make zone. html: "+a.innerHTML))}var f=(d.zone||"default").toLowerCase(),p=k.get("CLIENT_CONFIG").zones[f]||{},t=h.extend(!0,{},p,d);b(t,function(a,b){if(a)return c(a);c(null,f,{id:p.id,element:b,data:t})})}}return new function(){function e(){w||d.whenYouFind('script[type="extole/widget"]').thenCall(function(b){extole.LOG_TAG_CONTENTS&&
a.warn(["LEGACY_WIDGET_TAG START_INNER_TEXT",b.innerText,"END_INNER_TEXT"].join(" "));b.hasBeenUsed||(b.hasBeenUsed=!0,(new g(b)).prepare(function(a,b,c){if(a)return h.log("couldn't prepare page request "+a.message);k(b,c)}))});w=!0;d.findAllTheThings()}function l(){if(!v){var a=h.location.deserialize(location.search),b=a.extole_zone_name||a.xtl_zone_name,c=a.extole_campaign_id||a.xtl_campaign_id;b?(v=!0,f.ready(function(){var a="extole-"+b+"-zone",d=document.getElementById(a);d||(d=document.createElement("div"),
d.id=a,document.body.appendChild(d));k(b,{fromUri:!0,element:d,data:{campaign:c,insert_position:"none",parameters:{source:h.location.deserialize(location.search).extole_source}}})})):h.log("uri zone has no zone name")}}function k(a,d){d=d||{};var e=c(h.extend({name:a,type:a},d));b.renderZone(e)}var v=!1,w=!1;this.start=function(){e();l()};this.request=k}});extole.define("zones/resources",["utils","extole-creatives:/shared/js/legacy-resource-selector.js"],function(e,h){var f=function(c){return(new Function("legacyResourceSelector",
c))(h)},k=function(c,b){var a=f(c),d="";if(!a)return"";"::content::"==b?d=a.textContent||a.innerText||a.innerHTML:"string"==typeof b&&(d=a[b]?a[b]:a.getAttribute?a.getAttribute(b):"");return d},d=function(c){var b="",a=e.location.deserialize(location.search);"element"==c.resource_type?b=k(c.selector,c.attr):"query_param"==c.resource_type&&(b=a[c.param_name]);return b};return{getElementFromSelector:f,getValueFromSelector:k,getValueFromRule:d,getValuesFromRules:function(c){c=c||[];var b={},a;for(a in c)c.hasOwnProperty(a)&&
(b[a]=d(c[a]));return b},getQueryParameterByName:function(c){for(var b=location.search.substring(1).split("&"),a=0;a<b.length;a++){var d=b[a].split("=");if(decodeURIComponent(d[0])==c)return decodeURIComponent(d[1])}return""}}});extole.define("zones/zone",["utils","configuration","zones/default-content","zones/creative-placement"],function(e,h,f,k){var d=[],c={elementReady:function(a){var b=this;k.renderElement(this,function(c,d){b.element=d;a&&a(c,d)})},shouldShowDefaultContent:function(){return f.shouldShow(this)},
renderDefaultContent:function(){var a=f.getElement(this),b=this.element;b||e.throwError("zone","Tried to render default content without an element");e.each(a.childNodes,function(a){a&&b.appendChild(a)})},getConfig:function(){var a=this.getName();return h.get("CLIENT_CONFIG").zones[a]},getInsertPosition:function(){return k.getInsertPosition({insertPosition:this.data.insert_position,referenceElement:this.data.reference_element})},getData:function(){return this.data},getType:function(){return this.type||
"cta"},getName:function(){return this.name&&this.name.toLowerCase()},getParameters:function(){return e.extend({},this.data.parameters,this.data.params)},removeCampaignReferences:function(){this.data.parameters&&delete this.data.parameters.campaign_id;this.data.params&&delete this.data.params.campaign_id;this.campaign&&delete this.campaign},destroy:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);for(var a=0;a<d.length&&d[a]!=this;a++);d.splice(a,
1)}},b=function(a){var b;b=a||{};!0!==b.__created&&(b=e.createObject(c),e.extend(b,a),d.push(b),b.__created=!0);return b};e.extend(b,{getZones:function(){return d}});return b})})();
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/ajax.js",["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/collection.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/uri.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/type.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],
function(n,q,e,h){var f=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],k=function(c){if(c=c.match(/^([a-zA-Z]*:?\/\/)?([^/]+)/))return c[2]},d=function(c,b){var a=Array.prototype.slice.call(arguments),d=b.headers||{},f=b.xhrFields||{},l=b.url||"",u=b.data||"",v=(b.type||"get").toUpperCase(),w=b.complete||function(){},p=b.error||function(){h.error("Error with url "+
l+"= "+a.join(","))},t=k(l),r=k(location.toString());(t="undefined"!=typeof XDomainRequest&&!(t&&r&&t==r))&&(c=new XDomainRequest);e.isPlainObject(u)&&("GET"==v?(l+=q.serialize(u),u=null):u=JSON.stringify(u));t?(c.open(v,l),c.onprogress=function(){},c.ontimeout=p,c.timeout=0):c.open(v,l,!0);n.merge(c,f);t||n.each(d,function(a,b){try{c.setRequestHeader(b,a)}catch(d){h.error("AJAX ERROR: Couldn't set request header "+b+" to "+a)}});var z=!1;c.onerror=function(a){z||(z=!0,p.call(c,c.statusText,c.status))};
d=function(){void 0!==c.readyState&&4!==c.readyState||z||(z=!0,String(c.status||200).match(/^[23]/)?"function"===typeof w?w.call(c,c.responseText):h.warn("`complete` callback must be a function."):p.call(c,c.statusText,c.status))};c.onload=d;c.onreadystatechange=d;c.send(u)};return function(c){c=c||{};var b;b=!1;for(var a=0;a<f.length;a++){try{b=f[a]()}catch(e){continue}break}d(b,c);return b}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/api.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/collection.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/ajax.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/JSON.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/Timer.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/client/program.js".split(" "),
function(n,q,e,h,f,k){function d(){var a=this,b,c,d,e,f;this.withRequestSummary=function(b){e=b;return a};this.withResponseSummary=function(b){f=b;return a};this.withStatusCode=function(b){d=b;return a};this.withMessage=function(b){c=b;return a};this.asDebug=function(){b="debug";return a};this.asInfo=function(){b="info";return a};this.asWarn=function(){b="warn";return a};this.asError=function(){b="error";return a};this.log=function(){if(!e.url.match(q.LOGGING_ENDPOINT)){var a=[];d&&a.push("Status "+
d);c&&a.push(c);q[b](a.join(" "),{request:e,response:f})}}}var c=/^\/api\/v\d\//,b=k.getProgramDomain();return new function(){function a(a,b,c){m("get",a,null,b,c)}function g(a,b,c){m("delete",a,null,b,c)}function m(a,c,g,f,m){f=f||function(){};m=m||{};m=n.merge({"Content-Type":"application/json"},m.headers);c=k.getProtocol()+b+l(c);g=n.merge({},g);e({timeout:2E4,url:c,type:a,complete:function(a){var b=null;try{a=h.parse(a)}catch(c){a=null,b=Error("Couldn't parse as JSON response from request, response: "+
a)}f&&f(b,a);a=n.merge({},a);a.timestamp=String((new Date).getTime());(new d).withRequestSummary(u).withResponseSummary(a).withMessage("Completed api request").asDebug().log()},error:function(a,b){var c;try{c=h.parse(this.response)}catch(e){c={statusText:this.statusText,status:b}}f&&f(c);var g=n.merge({},c);g.timestamp=String((new Date).getTime());g=(new d).withRequestSummary(u).withResponseSummary(g);c=String(b||c.http_status_code);"4"===c[0]?g.asInfo().withMessage("Failed api request").withStatusCode(c).log():
g.asError().withMessage("Failed api request").withStatusCode(c).log()},data:g,headers:m,xhrFields:{withCredentials:!0}});var u={url:c,type:a,data:g,timestamp:String((new Date).getTime())}}function l(a){return a.match(c)?a:"/api/v4"+a}var u=!1;this.poll=function(b,c,d){function e(){var f=g.getElapsedTime();d.headers=n.merge({"X-Extole-Polling-Time":f},d.headers);a(b,function(a,b){a||u||"FAILED"===b.status?(u&&(a=Error("poll cancelled"),a.code="cancelled"),c(a||b.error)):"SUCCEEDED"===b.status?c(null,
b):"PENDING"===b.status&&setTimeout(e,d.pollInterval||300)},d)}u=!1;c=c||function(){};d=d||{};var g=(new f).start();e()};this.cancel=function(){u=!0};this.get=a;this.post=function(a,b,c,d){m("post",a,b,c,d)};this.delete=this.del=g}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/collection.js",["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/type.js"],function(n){var q=function(e,h){var d=Error.call(this,e);this.name="ExtoleError";this.message=d.message;this.stack=d.stack;this.code=h};q.prototype=Error();q.prototype.constructor=q;var e=function(e,h){var d,c;if(e.length===+e.length)for(c=0;c<e.length;c++){if(d=h(e[c],c),
!1===d)return!1}else for(c in e)if(e.hasOwnProperty(c)&&(d=h(e[c],c),!1===d))return!1};e.BREAK=!1;var h=function(){var e,k,d,c,b,a=arguments[0]||{},g=1,m=arguments.length,l=!1;"boolean"===typeof a&&(l=a,a=arguments[1]||{},g=2);for("object"===typeof a||n.isPlainFunction(a)||(a={});g<m;g++)if(e=arguments[g],null!==e)for(k in e)d=a[k],c=e[k],a!==c&&(l&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,d=d&&n.isArray(d)?d:[]):d=d&&n.isPlainObject(d)?d:{},a[k]=h(l,d,c)):void 0!==c&&(a[k]=c));return a};
return{each:e,map:function(f,h){function d(a,c){b=[];e(a,function(a,d){b.push(c(a,d))})}function c(a,c){b={};e(a,function(a,d){b[d]=c(a,d)})}var b;if(n.isArray(f))d(f,h);else if(n.isPlainObject(f))c(f,h);else throw new q(f+" argument must be type object or array","INVALID_ARGUMENT_EXCEPTION");return b},filter:function(f,h){function d(a,c){b=[];e(a,function(a,d){c(a,d)&&b.push(a)})}function c(a,c){b={};e(a,function(a,d){c(a,d)&&(b[d]=a)})}var b;if(n.isArray(f))d(f,h);else if(n.isPlainObject(f))c(f,
h);else throw new q(f+" argument must be type object or array","INVALID_ARGUMENT_EXCEPTION");return b},merge:h}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/cookie.js",["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/collection.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/JSON.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],function(n,q,e){function h(b){return b}function f(b){try{return decodeURIComponent(b.replace(d,
" "))}catch(a){return e.error("** utils.cookie.decoded ** Cookie error for: "+b,{error:a,message:a.message,stack:a.stack,cookiePart:b}),""}}function k(b){0===b.indexOf('"')&&(b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return c.json?q.parse(b):b}catch(a){}}var d=/\+/g,c=function(b,a,d){if(void 0!==a){d=n.merge({},c.defaults,d);if("number"===typeof d.expires){var e=d.expires,l=d.expires=new Date;l.setDate(l.getDate()+e)}a=c.json?q.stringify(a):String(a);return document.cookie=[c.raw?
b:encodeURIComponent(b),"=",c.raw?a:encodeURIComponent(a),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}a=c.raw?h:f;d=document.cookie.split("; ");for(var e=b?void 0:{},l=0,u=d.length;l<u;l++){var v=d[l].split("="),w=a(v[0]);if(!b)e[w]=k(a(v[1]));else if(b===w)return k(a(v[1]))}return e};c.defaults={};return c});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/dom.js",[],function(){var n={each:function(a,b){var c,d;if(a.length===+a.length)for(d=0;d<a.length;d++){if(c=b(a[d],d),!1===c)return!1}else for(d in a)if(a.hasOwnProperty(d)&&(c=b(a[d],d),!1===c))return!1},extend:function(){var a,b,c,d,e,f=arguments[0]||{},h=1,k=arguments.length,n=!1,r=this.extend;"boolean"===typeof f&&(n=f,f=arguments[1]||{},h=2);for("object"===typeof f||this.isFunction(f)||
(f={});h<k;h++)if(a=arguments[h],null!==a)for(b in a)c=f[b],d=a[b],f!==d&&(n&&d&&(this.isPlainObject(d)||(e=this.isArray(d)))?(e?(e=!1,c=c&&isArray(c)?c:[]):c=c&&isPlainObject(c)?c:{},f[b]=r(n,c,d)):void 0!==d&&(f[b]=d));return f},isFunction:function(a){return a&&"function"===typeof a&&a.call&&a.apply},isPlainObject:function(a){if("[object Object]"!==String(a)||a.nodeType||a.window&&a.window==a)return!1;try{if(a.constructor&&!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(b){return!1}return!0},
isArray:function(a){return a instanceof Array}};n.each.BREAK=!1;var q=function(){var a=[],b=function(b,c,d){for(var e=[],g=0;g<a.length;g++){var f=a[g];f.element==b&&f.eventType==c&&f.listener==d&&e.push({index:g,eventListener:f})}return e},c=function(a){this.originalEvent=a;this.type=a.type;this.keyCode=a.keyCode;this.target=a.srcElement?a.srcElement:a.target};c.prototype={preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){var a=
this.originalEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=!0}};return{addListener:function(d,e,f){if(0<b(d,e,f).length)console.warn("events.add - Listener already exists for event "+e+" on element "+d);else{var h=!d.addEventListener,k=function(a){h&&(a=window.event);return f.call(d,new c(a))};a.push({element:d,eventType:e,listener:f,listenerWrapper:k});d.addEventListener?d.addEventListener(e,k,!1):d.attachEvent("on"+e,k)}},triggerEvent:function(a,b,c){var d=document.createEvent("Event");
d.initEvent(b,!0,!1);n.extend(d,c);a.dispatchEvent(d)},removeListener:function(c,d,e){e=b(c,d,e);0>=e.length?console.warn("events.remove - Couldn't find exiting event listener for type \""+d+'" listener on element '+c):n.each(e,function(b){var e=b.index;b=b.eventListener;c.removeEventListener?c.removeEventListener(d,b.listenerWrapper,!1):c.detachEvent("on"+d,b.listenerWrapper);a.splice(e,1)})}}}(),e=function(){var a=function(a){a=a.className;var b={};if(!a)return b;n.each(a.split(" "),function(a){b[a]=
1});return b},b=function(a){var b="";n.each(a,function(a,c){b+=" "+c});return b.slice(1)};return{setAttribute:function(a,b,c){a.setAttribute(b,c);a[b]=c},getAttribute:function(a,b){return a.getAttribute(b)},addClass:function(c,d){var e=a(c);e[d]||(e[d]=1,c.className=b(e))},removeClass:function(c,d){var e=a(c);delete e[d];c.className=b(e)},getClassNames:function(a){return a.className.split(" ")}}}(),h=function(){var a=function(a){var b=document.createDocumentFragment(),c=document.createElement("div");
c.innerHTML=a;n.each(c.childNodes,function(a){1==a.nodeType&&b.appendChild(a)});return b},b=function(a){var b;n.each(a.childNodes,function(a){if(!b&&1==a.nodeType)return b=a,n.each.BREAK});return b};return{prepend:function(c,d){var e=b(c),f=d;"string"==typeof d&&(f=a(d));e?c.insertBefore(f,e):c.appendChild(f)},append:function(b,c){var d=c;"string"==typeof c&&(d=a(c));b.appendChild(d)}}}(),f=function(a,b){return(b||document).querySelectorAll(a)},k={},d=function(a,c){function d(){c();b.removeEventListener(e,
"load",d)}if(k[a])return c();k[a]=!0;var e=document.createElement("link");b.setAttribute(e,"rel","stylesheet");b.setAttribute(e,"href",a);b.append(b.query("head")[0],e);b.addEventListener(e,"load",d)},c=function(a,b){0===a.length?b():d(a[0],function(){c(a.slice(1),b)})},b={addEventListener:q.addListener,removeEventListener:q.removeListener,triggerEvent:q.triggerEvent,getAttribute:e.getAttribute,setAttribute:e.setAttribute,addClass:e.addClass,removeClass:e.removeClass,getClassNames:e.getClassNames,
prepend:h.prepend,append:h.append,query:f,queryFirst:function(a,b){return f(a,b)[0]},injectStylesheet:d,injectStylesheets:c};return b});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/event-bus.js",[],function(){function n(){this._events={};var h=/\s+/,f=function(d,c,b,a){if(!b)return!0;if("object"===typeof b){for(var e in b)d[c].apply(d,[e,b[e]].concat(a));return!1}if(h.test(b)){b=b.split(h);e=0;for(var f=b.length;e<f;e++)d[c].apply(d,[b[e]].concat(a));return!1}return!0},k=function(d,c){var b,a=-1,e=d.length,f=c[0],h=c[1],k=c[2];switch(c.length){case 0:for(;++a<e;)(b=d[a]).callback.call(b.ctx);
break;case 1:for(;++a<e;)(b=d[a]).callback.call(b.ctx,f);break;case 2:for(;++a<e;)(b=d[a]).callback.call(b.ctx,f,h);break;case 3:for(;++a<e;)(b=d[a]).callback.call(b.ctx,f,h,k);break;default:for(;++a<e;)(b=d[a]).callback.apply(b.ctx,c)}};this.on=function(d,c,b){if(!f(this,"on",d,[c,b])||!c)return this;this._events||(this._events={});(this._events[d]||(this._events[d]=[])).push({callback:c,context:b,ctx:b||this});return this};this.off=function(d,c,b){var a,g,h,l,k,v,n,p;if(!this._events||!f(this,"off",
d,[c,b]))return this;if(!d&&!c&&!b)return this._events=void 0,this;l=d?[d]:e.keys(this._events);k=0;for(v=l.length;k<v;k++)if(d=l[k],h=this._events[d]){this._events[d]=a=[];if(c||b)for(n=0,p=h.length;n<p;n++)g=h[n],(c&&c!==g.callback&&c!==g.callback._callback||b&&b!==g.context)&&a.push(g);a.length||delete this._events[d]}return this};this.once=function(d,c,b){var a=this,e=function(){var f=q.call(arguments);c.apply(this,f);a.off(d,e,b)};this.on(d,e,b);return this};this.trigger=function(d){if(!this._events)return this;
var c=q.call(arguments,1);if(!f(this,"trigger",d,c))return this;var b=this._events[d],a=this._events.all;b&&k(b,c);a&&k(a,arguments);return this}}var q=Array.prototype.slice,e={isPlainObject:function(e){if("[object Object]"!==String(e)||e.nodeType||e.window&&e.window==e)return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(f){return!1}return!0},keys:function(e){if(!this.isPlainObject(e))return[];var f=[],k;for(k in e)has(e,k)&&f.push(k);return f},_idCounter:0,
uniqueId:function(e){var f=++this._idCounter+"";return e?e+f:f}};return{create:function(){return new n}}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/JSON.js",[],function(){var n;"object"!==typeof n&&(n={});(function(){function q(a){return 10>a?"0"+a:a}function e(a){k.lastIndex=0;return k.test(a)?'"'+a.replace(k,function(a){var c=b[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function h(b,f){var k,n,v,w,p=d,t,r=f[b];r&&r instanceof Date&&(k=r,r=isFinite(k.valueOf())?k.getUTCFullYear()+
"-"+q(k.getUTCMonth()+1)+"-"+q(k.getUTCDate())+"T"+q(k.getUTCHours())+":"+q(k.getUTCMinutes())+":"+q(k.getUTCSeconds())+"Z":null);"function"===typeof a&&(r=a.call(f,b,r));switch(typeof r){case "string":return e(r);case "number":return isFinite(r)?String(r):"null";case "boolean":case "null":return String(r);case "object":if(!r)return"null";d+=c;t=[];if("[object Array]"===Object.prototype.toString.apply(r)){w=r.length;for(k=0;k<w;k+=1)t[k]=h(k,r)||"null";v=0===t.length?"[]":d?"[\n"+d+t.join(",\n"+d)+
"\n"+p+"]":"["+t.join(",")+"]";d=p;return v}if(a&&"object"===typeof a)for(w=a.length,k=0;k<w;k+=1)"string"===typeof a[k]&&(n=a[k],(v=h(n,r))&&t.push(e(n)+(d?": ":":")+v));else for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(v=h(n,r))&&t.push(e(n)+(d?": ":":")+v);v=0===t.length?"{}":d?"{\n"+d+t.join(",\n"+d)+"\n"+p+"}":"{"+t.join(",")+"}";d=p;return v}}var f,k,d,c,b,a;"function"!==typeof n.stringify&&(k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n.stringify=function(b,e,f){var k;c=d="";if("number"===typeof f)for(k=0;k<f;k+=1)c+=" ";else"string"===typeof f&&(c=f);if((a=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return h("",{"":b})});"function"!==typeof n.parse&&(f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n.parse=function(a,b){function c(a,
d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var d;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+
a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();return n});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js",[],function(){function n(b,a,g){g=g||{};g.pageId=h;g.referer=f;var m;try{m=[a||"no message","START_JSON",JSON.stringify(g),"END_JSON"].join(" ")}catch(l){e("Failed to stringify log's json data",{exception:l});return}extole.LOG_EXCLUDE_REGEX&&m.match(extole.LOG_EXCLUDE_REGEX)||(c[m]=++c[m]||1,k[b]>=k[extole.LOG_LEVEL_CONSOLE]&&window.console&&window.console.log&&window.console.log(b+
" "+m),k[b]>=k[extole.LOG_LEVEL_REMOTE]&&(a=c[m],d[a]&&q(b,m+(1<a?" log count: "+a:""))))}function q(b,a){extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/api.js"],function(c){var d="/api/v4/debug/logs",e;a:{e=document.cookie.split(";");for(var f=0;f<e.length;f++){var h=e[f].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(0===h.indexOf("extole_access_token=")){e=h.substring(20,h.length);break a}}e=null}e&&"null"!=e&&"undefined"!=e&&
(d+="?access_token="+e);c.post(d,{level:b,message:a})})}function e(b,a){n("ERROR",b,a)}var h=String((new Date).getTime()),f=window.location.href,k={DEBUG:0,INFO:1,WARN:2,ERROR:3,OFF:4},d={1:!0,3:!0,10:!0,30:!0,100:!0,250:!0,500:!0,1E3:!0};extole.LOG_EXCLUDE_REGEX=extole.LOG_EXCLUDE_REGEX||void 0;extole.LOG_LEVEL_CONSOLE=extole.LOG_LEVEL_CONSOLE||"OFF";extole.LOG_LEVEL_REMOTE=extole.LOG_LEVEL_REMOTE||"WARN";var c={};return{debug:function(b,a){n("DEBUG",b,a)},info:function(b,a){n("INFO",b,a)},warn:function(b,
a){n("WARN",b,a)},error:e,LOGGING_ENDPOINT:"/api/v4/debug/logs"}});extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/Timer.js",[],function(){return function(){var n=this,q;this.start=function(){if(q)throw Error("Timer.start has already been called");q=new Date;return n};this.getElapsedTime=function(){if(!q)throw Error("Timer has not been started");return new Date-q}}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/type.js",[],function(){return{isPlainObject:function(n){return"[object Object]"===Object.prototype.toString.call(n)},isPlainFunction:function(n){return"[object Function]"===Object.prototype.toString.call(n)},isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)}}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/uri.js",["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js"],function(n){function q(e){try{return decodeURIComponent(e)}catch(h){return e}}return{serialize:function(e){var h="",f,k;for(k in e)f=e[k],h+="&"+encodeURIComponent(k)+"="+encodeURIComponent(String(f));0<h.length&&(h="?"+h.slice(1));return h},deserialize:function(e){var h={};if(!e)return h;
"?"===e.substr(0,1)&&(e=e.slice(1));e=e.split("&");for(var f=0;f<e.length;f++){var k=e[f].split("="),d=k[0],k=k[1];try{h[d]=q(k)}catch(c){n.error("Invalid query parameter: "+d+"="+k)}}return h},objectToDotNotation:function(e){function h(e,d){for(var c in e){var b=e[c],a=d?d+"."+c:c;b&&"object"===typeof b?h(b,a):f[a]=b}}var f={};h(e);return f},dotNotationToObject:function(e){var h={},f;for(f in e){for(var k=h,d=f.split("."),c=d.pop();d.length;)var b=d.shift(),k=k[b]=k[b]||{};k[c]=e[f]}return h},decodeComponent:q,
encodeComponent:function(e){return encodeURIComponent(e)}}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/client/program.js",["sites"],function(n){var q=n.getDefault();return{getName:function(){return q.name},getProgramDomain:function(){return q.program_domain},getSitePatterns:function(){return q.allowed_domains},isSecure:function(){return Boolean(q.is_secure)},getProtocol:function(){return this.isSecure()?"https://":window.location.protocol.match(/^https/)?"https://":"http://"}}});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/user-service.js","https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/collection.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/uri.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/logger.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/event-bus.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/cookie.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/api.js https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/client/program.js".split(" "),
function(n,q,e,h,f,k,d){function c(){function a(){function b(a){var c=location.pathname.split("/");c.shift();c.pop();c.length&&n.each(c,function(b,d){var e="/"+c.slice(0,d+1).join("/");f(a,"",{expires:-1,path:e})})}this.get=function(a){return f(a)};this.set=function(a,c){extole.COOKIES_DISABLED||(b(a),f(a,c,{expires:365,path:"/",secure:d.isSecure()}))};this.remove=function(a){f(a,"",{expires:-1,path:"/"});b(a)}}function b(){(function(){var a="test"+(new Date).getTime();try{localStorage.setItem(a,
a),localStorage.removeItem(a)}catch(b){throw Error("Local storage not supported");}})();this.get=function(a){return window.localStorage.getItem(a)};this.set=function(a,b){window.localStorage.setItem(a,b)};this.remove=function(a){window.localStorage.removeItem(a)}}var c=[];c.push(new function(){var a={};this.get=function(b){return a[b]};this.set=function(b,c){a[b]=c};this.remove=function(b){delete a[b]}});extole.COOKIES_DISABLED||c.push(new a);if(extole.LOCAL_STORAGE_ENABLED)try{c.push(new b)}catch(h){e.info("Local Storage not supported in current browser")}this.get=
function(){for(var a,b=0;b<c.length;b++){a=c[b];var d=a.get("extole_access_token");if("string"===typeof d&&"undefined"!==d&&"null"!==d&&d.length)return a.get("extole_access_token")}};this.set=function(a){n.each(c,function(b){b.set("extole_access_token",a)})};this.remove=function(){n.each(c,function(a){a.remove("extole_access_token")})}}function b(a){function b(){return a.get()||""}function c(a){a.parameters=n.merge({},e.parameters,a.parameters);return n.merge({},e,a)}function d(){n.each(e,function(a,
b){e[b]=void 0})}var e={},f={getAccessToken:function(){return e.access_token},getId:function(){return e.id},getEmail:function(){return e.email},getFirstName:function(){return e.first_name},getLastName:function(){return e.last_name},getParameters:function(){return e.parameters},getMe:function(){return{id:e.id,email:e.email,first_name:e.first_name,last_name:e.last_name,profile_picture_url:e.profile_picture_url,partner_user_id:e.partner_user_id,parameters:e.parameters}},getCapabilities:function(){return Array.isArray(e.capabilities)?
e.capabilities.slice():[]},getScopes:function(){return Array.isArray(e.scopes)?e.scopes.slice():[]}};n.merge(this,f);(function(){var b=q.deserialize(window.location.search).extole_access_token;b&&a.set(b)})();this.asReadOnly=function(){return f};this.fetchAccessToken=function(d){var f=b(),h="/api/v4/token";f&&(h+="?access_token="+f);k.get(h,function(b,f){b?d(b):(a.set(f.access_token),e=c(f),d())})};this.upgradeAccessToken=function(a,d){var f="/api/v4/token/"+b()+"/upgrade";k.post(f,{extole_secret:a},
function(a,b){a?d(a):(e=c(b),d())})};this.deleteAccessToken=function(c){var e=b();d();a.remove();k.del("/api/v4/token?access_token="+e,function(a,b){c(a,b)})};this.fetchAttributes=function(a){var d=b();k.get("/api/v4/me?access_token="+d,function(b,d){b?a(b):(e=c(d),a(null,e))})};this.saveAttributes=function(a,d){var f=b(),g={email:a.email,first_name:a.first_name,last_name:a.last_name,profile_picture_url:a.profile_picture_url,partner_user_id:a.partner_user_id};k.post("/api/v4/me?access_token="+f,g,
function(a,b){a?d(a):(e=c(g),d(null,e))})};this.fetchParameters=function(a){var d=b();k.get("/api/v4/me/parameters?access_token="+d,function(b,d){b?a(b):(e=c({parameters:d}),a(null,e.parameters))})};this.saveParameters=function(a,d,f){d="PRIVATE"===(d||"PRIVATE").toUpperCase()?"PRIVATE":"PUBLIC";f=f||function(){};var g=b();k.post("/api/v4/me/parameters?access_token="+g,{type:d,parameters:a},function(b,d){b?f(b):(e=c({parameters:a}),f(null,e.parameters))})};this.fetchAdvocates=function(a){var c=b();
k.get("/api/v4/me/advocates?access_token="+c,function(b,c){a(b,c)})}}function a(){var a=0,b=[],c=this;this.push=function(a){b.push(a);this.next()};this.next=function(){for(;1>a&&b.length;)b.shift()(function(){a--;c.next()}),a++}}return new function(){function d(a){v.push(function(b){Boolean(p.getAccessToken())?a(null,b):f(function(c){a(c,b)})})}function f(a){function b(c){!c&&r&&(r=!1,t.events.trigger("login",p.asReadOnly()));a(c)}p.fetchAccessToken(function(c){c?"invalid_access_token"===c.code?k(b):
a(c):n(b)})}function k(a){p.deleteAccessToken(function(b){p.fetchAccessToken(a)})}function n(a){p.fetchAttributes(function(b){var c=z();b||!c?setTimeout(a,0):p.upgradeAccessToken(c,function(b){a(null)})})}var v=new a,w=new c,p=new b(w),t=this,r=!0;this.events=h.create();this.setAccessToken=function(a){w.set(a);this.flush()};this.getUser=function(a){a=a||function(){};d(function(b,c){b?a(b):a(null,p.asReadOnly());c()})};this.flush=function(a){a=a||function(){};v.push(function(b){f(function(c){c?a(c):
a(null,p.asReadOnly());b()})})};this.updateMe=function(a,b){b=b||function(){};d(function(c,d){function e(a,c){b(a,c);d()}c?e(c):a.email||a.first_name||a.last_name||a.profile_picture_url||a.partner_user_id?p.saveAttributes(a,function(a){a?e(a):e(null,p.asReadOnly())}):e(null,p.asReadOnly())})};this.updateProfile=function(a,b){e.warn("userService.updateProfile is deprecated");return this.updateMe(a,b)};this.updateParameters=function(a,b,c){"function"!==typeof b||c||(c=b,b=void 0);c=c||function(){};
d(function(d,e){d?(c(d,void 0),e()):p.saveParameters(a,b,function(a){a?c(a,void 0):(a=p.asReadOnly(),c(null,a));e()})})};this.fetchParameters=function(a){a=a||function(){};d(function(b,c){b?(a(b,void 0),c()):p.fetchParameters(function(b,d){b?a(b,void 0):a(null,d);c()})})};this.fetchAdvocates=function(a){a=a||function(){};d(function(b,c){b?(a(b,void 0),c()):p.fetchAdvocates(function(b,d){b?a(b,void 0):a(null,d);c()})})};this.logout=function(a){a=a||function(){};d(function(b,c){b?(a(b),c()):p.deleteAccessToken(function(b){r=
!0;t.events.trigger("logout",p.asReadOnly());a(null);c();t.getUser(function(){})})})};var z=function(){var a=q.deserialize(window.location.search).extole_secret;return function(){var b=a;b&&(a=null);return b}}()}});extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/shared/js/api.js",[],function(){var n=this.async();extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/api.js"],function(q){n(q)})});
extole.define("https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/shared/js/user-service.js",[],function(){var n=this.async();extole.require(["https://origin.extole.io/type=core:clientId=732469989:coreAssetsVersion=1509024379443/common/user-service.js"],function(q){n(q)})});